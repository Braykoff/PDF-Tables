"use-strict";var Zt="navy",Yt="blue";function Xt(c){return c==null||typeof c!="string"||c.C1().t===0}function yt(c,t,s){return Math.D(Math.B(c,t),s)}function Ts(c,t,s){return Math.H(t-c)<=s}function ct(c,t,s){return c>=t&&c<=s}function Tn(c){if(c.t===0)return"";let t=c[0].li;for(let i=1;i<c.t;i++)t=Math.B(t,c[i].li);if(t===0)return"";let s="Column0";for(let i=1;i<t;i++)s+=`,Column${i}`;for(let i of c)s+=`
`,s+=i.vM(t);return s}function On(c,t,s="text/csv"){let i=new Blob([t],{j:s}),h=URL.NM(i),n=document.$("a");n.mh=h,n.N6=c,document.ce.$u(n),n.EM(),n.x(),URL.E6(h)}var Os=10,In=3,Te=4,Oe=.6,Le=.75,Ii=Ie(Os)+In;function Ln(c,t){return Xt(t)?0:c*Oe*t.t}function Ie(c){return Le*c}var Ls=class{#t;#s;#h=!1;#i=0;constructor(t,s){this.#t=t,this.#s=s}CM(t){this.#h=!0,this.#i+=t;let s=this.#t.ae/2;if(this.#t.ma===0?this.#i=Math.B(this.#i,-s):this.#t.ma===this.#t.li-1&&(this.#i=Math.D(this.#i,s)),this.#i<-s){this.#t.ku(this.#t.ma-1);let i=this.#t.ae;this.#i=i/2+(this.#i+s)}else if(this.#i>s){this.#t.ku(this.#t.ma+1);let i=this.#t.ae;this.#i=-i/2+(this.#i-s)}}xu(){this.#i=0,this.#h=!1}TM(t,s){return ct(t,this.#t.cs+this.#t.Xo,this.#t.cs+this.#t.Xo+this.#t.ae)&&ct(s,this.#t.ps-Ii,this.#t.ps)}ba(){let t=null;for(let s of["INDEX","IDX","I"])if(Ln(Os,s)<=this.#t.ae-Te){t=s;break}this.#s.Vt=Zt,this.#s.ui((this.#t.cs+this.#t.Xo+this.#i)*2,(this.#t.ps-Ii)*2,this.#t.ae*2,Ii*2),t!==void 0&&(this.#s.Cn=`bold ${Os*2}px Courier New`,this.#s.Vt="white",this.#s.Ko(t,(this.#t.cs+this.#t.Xo+this.#i+(this.#t.ae-Ln(Os,t))/2)*2,(this.#t.ps-In/2)*2)),this.#h&&(this.#s.Vt=Yt,this.#s.Tn=.2,this.#s.ui((this.#t.cs+this.#t.Xo)*2,this.#t.ps*2,this.#t.ae*2,this.#t.Fr*2),this.#s.Tn=1)}};var Un=1.5,Dn=4,Ot=2,Z={Is:-1,vu:0,ya:1,T1:2,Nu:3,O1:4},pt={Is:-1,Xp:0,Eu:1};function Ue(c){switch(c){case Z.vu:case Z.O1:return"col-resize";case Z.ya:return"row-resize";case Z.T1:return"move";case Z.Nu:return"crosshair";default:return""}}var Is=class{#t=void 0;#s=void 0;#h=void 0;#i=void 0;#r=Z.Is;#e=-1;#n=pt.Is;#o=void 0;#a=void 0;#c=void 0;constructor(t,s,i){this.#t=t,this.#h=s,this.#i=i;let h=document.$("canvas");h.i=t.i*2,h.n=t.n*2,h.p.d("tableCanvas"),t.OM(h),this.#s=h.Us("2d"),this.#c=new Ls(this.#t,this.#s);let n=this.#d.N(this),e=this.#p.N(this),r=this.xu.N(this);document.o("mousemove",n),h.o("mousedown",e),document.o("mouseup",r),this.Cu=function(){document.je("mousemove",n),h.je("mousedown",e),document.je("mouseup",r)}}#f(t){let s=this.#t.Se;return{A:t.L1-s.A,f:t.I1-s.f}}#l(t){if(this.#c.TM(t.A,t.f))return[Z.O1,0];let s=[this.#t.cs+this.#t.Tu,this.#t.ps+this.#t.Fr];if(!ct(t.A,this.#t.cs-Ot,s[0]+Ot)||!ct(t.f,this.#t.ps-Ot,s[1]+Ot))return null;if(Ts(t.f,this.#t.ps,Ot))return[Z.ya,0];if(Ts(t.f,s[1],Ot))return[Z.ya,this.#t.Pe];let i=0;for(let h=0;h<=this.#t.li;h++){let n=this.#t.cs+i;if(Ts(t.A,n,Ot))return[Z.vu,h];h!==this.#t.li&&(i+=this.#t._h(h))}return[Z.T1,0]}#d(t){let s=this.#f(t);if(this.#n===pt.Eu){let i={A:s.A-this.#a.A,f:s.f-this.#a.f};switch(this.#r){case Z.vu:{if(this.#e===0){let h=yt(i.A,-this.#t.cs,this.#t._h(0)-5);this.#t.jr(this.#t.cs+h,this.#t.ps),this.#t.U1(0,this.#t._h(0)-h)}else{let h=this.#e-1;this.#t.U1(h,this.#t._h(h)+i.A)}break}case Z.ya:{this.#e===0?(this.#t.jr(this.#t.cs,this.#t.ps+i.f),this.#t.D1(this.#t.Fr-i.f)):this.#t.D1(this.#t.Fr+i.f);break}case Z.T1:{this.#t.jr(this.#t.cs+i.A,this.#t.ps+i.f);break}case Z.Nu:{let h=this.#t.LM(this.#o,s);this.#i.Ge=`${h} textbox${h===1?"":"es"} selected`,this.#h.M.tn="visible";break}case Z.O1:{this.#c.CM(i.A);break}}this.#a=s,this.ba()}else if(ct(s.A,0,this.#t.i)&&ct(s.f,0,this.#t.n)){let i=this.#l(s);i===null?this.#A(pt.Is,Z.Is,-1):this.#A(pt.Xp,i[0],i[1])}}#p(t){this.#o=this.#f(t),this.#a=this.#o,this.#n===pt.Xp?this.#A(pt.Eu,this.#r,this.#e):this.#n===pt.Is&&this.#A(pt.Eu,Z.Nu,0)}xu(){this.#h.M.tn="hidden",this.#c.xu(),this.#A(pt.Is,Z.Is,-1)}#A(t,s,i){let h=t!==this.#n||s!==this.#r||i!==this.#e;this.#n=t,this.#r=s,this.#e=i,h&&this.ba()}ba(){this.#s.Ou(),this.#c.ba();let t=0;for(let i=0;i<=this.#t.Pe;i++){let h=this.#t.ps+t;h*=2;let n=this.#n>=0&&this.#r===Z.ya&&this.#e===i;this.#s.si=(n?Dn:Un)*2,this.#s.le=n?Yt:Zt,this.#s.Sr(),this.#s.Pr(this.#t.cs*2,h),this.#s.Gr((this.#t.cs+this.#t.Tu)*2,h),this.#s.$i(),i!==this.#t.Pe&&(t+=this.#t.Kp(i))}let s=0;for(let i=0;i<=this.#t.li;i++){let h=this.#t.cs+s;h*=2;let n=this.#n>=0&&this.#r===Z.vu&&this.#e===i;this.#s.si=(n?Dn:Un)*2,this.#s.le=n?Yt:Zt,this.#s.Sr(),this.#s.Pr(h,this.#t.ps*2),this.#s.Gr(h,(this.#t.ps+this.#t.Fr)*2),this.#s.$i(),i!==this.#t.li&&(s+=this.#t._h(i))}this.#n===pt.Eu&&this.#r===Z.Nu&&(this.#s.Tn=.4,this.#s.Vt="gray",this.#s.ui(this.#o.A*2,this.#o.f*2,(this.#a.A-this.#o.A)*2,(this.#a.f-this.#o.f)*2),this.#s.Tn=1),this.#t.IM(Ue(this.#r))}};var nt=!(typeof process!="object"||process+""!="[object process]"||process.UM.C6||process.UM.T6&&process.j&&process.j!=="browser"),Wi=[.001,0,0,.001,0,0],Ui=1.35,De=1,xn=2,Hs=4,Re=16,Be=32,Fe=64,je=128,Se=256,Et={_p:0,Lu:1,DM:2,RM:3},os="pdfjs_internal_editor_",U={_p:-1,Is:0,Ma:3,ki:9,Hr:13,_o:15,tc:16,R1:101,O6:102},R={L6:1,BM:2,$a:11,sc:12,I6:13,tg:21,sg:22,FM:23,ic:31,Iu:32,ig:33,B1:34,hg:41},Pe={U6:4,D6:8,R6:16,B6:32,F6:256,j6:512,S6:1024,P6:2048},Ge=1,ee=2,Ps=0,Di=1,Kt=2,He=3,Rn=3,Bn=4,Gs={jM:1,SM:2,PM:3},K={GM:1,HM:2,Ma:3,WM:4,QM:5,VM:6,zM:7,JM:8,ki:9,qM:10,ZM:11,YM:12,Hr:13,XM:14,_o:15,tc:16,KM:17,G6:18,H6:19,_M:20,W6:21,Q6:22,V6:23,z6:24,J6:25,q6:26},re=1,We=2,Qe=3,Ve=4,ze=5,xi={Z6:0,ng:1,t$:5},cs={s$:1,eg:2,rg:3,og:4,cg:5,ag:6,lg:7,ug:8,F1:9,q:10,V:11,I:12,Pr:13,Gr:14,Y6:15,X6:16,K6:17,Wr:18,_6:19,$i:20,i$:21,as:22,h$:23,Uu:24,n$:25,e$:26,r$:27,ka:28,fi:29,o$:30,c$:31,a$:32,l$:33,u$:34,f$:35,fg:36,dg:37,d$:38,A$:39,hc:40,w$:41,p$:42,g$:43,m$:44,tE:45,sE:46,iE:47,b$:48,y$:49,hE:50,nE:51,eE:52,M$:53,rE:54,$$:55,oE:56,cE:57,k$:58,x$:59,aE:60,lE:61,v$:62,N$:63,E$:64,uE:65,fE:66,C$:67,T$:68,xa:69,O$:70,Du:71,L$:72,I$:73,U$:74,D$:75,R$:76,B$:77,F$:80,j$:81,S$:83,P$:84,G$:85,Ag:86,wg:87,H$:88,W$:89,Q$:90,V$:91,z$:92,J$:93,q$:94},Je=0,qe=1,Ze=2,Ye=3,Xe=4,Ke={dE:1,AE:2},vi=xi.ng;function _e(c){Number.He(c)&&(vi=c)}function tr(){return vi}function Ni(c){vi>=xi.t$&&console.Z$(`Info: ${c}`)}function I(c){vi>=xi.ng&&console.Y$(`Warning: ${c}`)}function G(c){throw new Error(c)}function B(c,t){c||G(t)}function oe(c,t=null,s=null){if(!c)return null;if(s&&typeof c=="string"&&(s.wE&&c.sn("www.")&&c.pg(/\./g)?.t>=2&&(c=`http://${c}`),s.pE))try{c=(function(n){return decodeURIComponent(escape(n))})(c)}catch{}let i=t?URL.We(c,t):URL.We(c);return(function(n){switch(n?.j1){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}})(i)?i:null}function ce(c,t,s=!1){let i=URL.We(c);return i?(i.On=t,i.mh):s&&oe(c,"http://example.com")?c.Ys("#",1)[0]+(t?`#${t}`:""):""}function D(c,t,s,i=!1){return Object.gE(c,t,{c:s,mE:!i,bE:!0,gg:!1}),s}var jt=(function(){function t(s,i){this.Ln=s,this.R=i}return t.prototype=new Error,t.constructor=t,t})(),Ws=class extends jt{constructor(t,s){super(t,"PasswordException"),this.S1=s}},hs=class extends jt{constructor(t,s){super(t,"UnknownErrorException"),this.va=s}},as=class extends jt{constructor(t){super(t,"InvalidPDFException")}},Jt=class extends jt{constructor(t,s,i){super(t,"ResponseException"),this.eh=s,this.P1=i}},Qi=class extends jt{constructor(t){super(t,"FormatError")}},bt=class extends jt{constructor(t){super(t,"AbortException")}};function ae(c){typeof c=="object"&&c?.t!==void 0||G("Invalid argument for bytesToString");let t=c.t,s=8192;if(t<s)return String.G1.X$(null,c);let i=[];for(let h=0;h<t;h+=s){let n=Math.D(h+s,t),e=c.gs(h,n);i.r(String.G1.X$(null,e))}return i.et("")}function vs(c){typeof c!="string"&&G("Invalid argument for stringToBytes");let t=c.t,s=new Uint8Array(t);for(let i=0;i<t;++i)s[i]=255&c.Na(i);return s}var tt=class{static get mg(){return D(this,"isLittleEndian",(function(){let s=new Uint8Array(4);return s[0]=1,new Uint32Array(s._,0,1)[0]===1})())}static get bg(){return D(this,"isEvalSupported",(function(){try{return new Function(""),!0}catch{return!1}})())}static get H1(){return D(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get W1(){return D(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get yE(){return D(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get ME(){return D(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get Hi(){let{Hi:t,$E:s}=navigator;return D(this,"platform",{kE:s.Wi("Android"),xE:t.Wi("Linux"),ue:t.Wi("Mac"),K$:t.Wi("Win"),Ru:s.Wi("Firefox")})}static get _$(){return D(this,"isCSSRoundSupported",globalThis.yg?.vE?.("width: round(1.5px, 1px)"))}},Ri=Array.xi(Array(256).Qr(),c=>c.fe(16).Ea(2,"0")),E=class{static hn(t,s,i){return`#${Ri[t]}${Ri[s]}${Ri[i]}`}static NE(t){return[t.Vr,t.nc,t.ec,t.zt,t.Bu,t.Fu]}static tk(t,s){let i;t[0]?(t[0]<0&&(i=s[0],s[0]=s[2],s[2]=i),s[0]*=t[0],s[2]*=t[0],t[3]<0&&(i=s[1],s[1]=s[3],s[3]=i),s[1]*=t[3],s[3]*=t[3]):(i=s[0],s[0]=s[1],s[1]=i,i=s[2],s[2]=s[3],s[3]=i,t[1]<0&&(i=s[1],s[1]=s[3],s[3]=i),s[1]*=t[1],s[3]*=t[1],t[2]<0&&(i=s[0],s[0]=s[2],s[2]=i),s[0]*=t[2],s[2]*=t[2]),s[0]+=t[4],s[1]+=t[5],s[2]+=t[4],s[3]+=t[5]}static I(t,s){return[t[0]*s[0]+t[2]*s[1],t[1]*s[0]+t[3]*s[1],t[0]*s[2]+t[2]*s[3],t[1]*s[2]+t[3]*s[3],t[0]*s[4]+t[2]*s[5]+t[4],t[1]*s[4]+t[3]*s[5]+t[5]]}static Q1(t,s){return[t[0]*s.Vr+t[2]*s.nc,t[1]*s.Vr+t[3]*s.nc,t[0]*s.ec+t[2]*s.zt,t[1]*s.ec+t[3]*s.zt,t[0]*s.Bu+t[2]*s.Fu+t[4],t[1]*s.Bu+t[3]*s.Fu+t[5]]}static ju(t,s,i=0){let h=t[i],n=t[i+1];t[i]=h*s[0]+n*s[2]+s[4],t[i+1]=h*s[1]+n*s[3]+s[5]}static EE(t,s,i=0){let h=s[0],n=s[1],e=s[2],r=s[3],o=s[4],a=s[5];for(let l=0;l<6;l+=2){let u=t[i+l],f=t[i+l+1];t[i+l]=u*h+f*e+o,t[i+l+1]=u*n+f*r+a}}static sk(t,s){let i=t[0],h=t[1],n=s[0]*s[3]-s[1]*s[2];t[0]=(i*s[3]-h*s[2]+s[2]*s[5]-s[4]*s[3])/n,t[1]=(-i*s[1]+h*s[0]+s[4]*s[1]-s[5]*s[0])/n}static nn(t,s,i){let h=s[0],n=s[1],e=s[2],r=s[3],o=s[4],a=s[5],l=t[0],u=t[1],f=t[2],d=t[3],w=h*l+o,A=w,g=h*f+o,p=g,m=r*u+a,b=m,y=r*d+a,M=y;if(n!==0||e!==0){let $=n*l,k=n*f,x=e*u,v=e*d;w+=x,p+=x,g+=v,A+=v,m+=$,M+=$,y+=k,b+=k}i[0]=Math.D(i[0],w,g,A,p),i[1]=Math.D(i[1],m,y,b,M),i[2]=Math.B(i[2],w,g,A,p),i[3]=Math.B(i[3],m,y,b,M)}static ik(t){let s=t[0]*t[3]-t[1]*t[2];return[t[3]/s,-t[1]/s,-t[2]/s,t[0]/s,(t[2]*t[5]-t[4]*t[3])/s,(t[4]*t[1]-t[5]*t[0])/s]}static In(t,s){let i=t[0],h=t[1],n=t[2],e=t[3],r=i**2+h**2,o=i*n+h*e,a=n**2+e**2,l=(r+a)/2,u=Math.zr(l**2-(r*a-o**2));s[0]=Math.zr(l+u||1),s[1]=Math.zr(l-u||1)}static Mg(t){let s=t.z(0);return t[0]>t[2]&&(s[0]=t[2],s[2]=t[0]),t[1]>t[3]&&(s[1]=t[3],s[3]=t[1]),s}static Ca(t,s){let i=Math.B(Math.D(t[0],t[2]),Math.D(s[0],s[2])),h=Math.D(Math.B(t[0],t[2]),Math.B(s[0],s[2]));if(i>h)return null;let n=Math.B(Math.D(t[1],t[3]),Math.D(s[1],s[3])),e=Math.D(Math.B(t[1],t[3]),Math.B(s[1],s[3]));return n>e?null:[i,n,h,e]}static $g(t,s,i){i[0]=Math.D(i[0],t),i[1]=Math.D(i[1],s),i[2]=Math.B(i[2],t),i[3]=Math.B(i[3],s)}static kg(t,s,i,h,n){n[0]=Math.D(n[0],t,i),n[1]=Math.D(n[1],s,h),n[2]=Math.B(n[2],t,i),n[3]=Math.B(n[3],s,h)}static#t(t,s,i,h,n,e,r,o,a,l){if(a<=0||a>=1)return;let u=1-a,f=a*a,d=f*a,w=u*(u*(u*t+3*a*s)+3*f*i)+d*h,A=u*(u*(u*n+3*a*e)+3*f*r)+d*o;l[0]=Math.D(l[0],w),l[1]=Math.D(l[1],A),l[2]=Math.B(l[2],w),l[3]=Math.B(l[3],A)}static#s(t,s,i,h,n,e,r,o,a,l,u,f){if(Math.H(a)<1e-12){Math.H(l)>=1e-12&&this.#t(t,s,i,h,n,e,r,o,-u/l,f);return}let d=l**2-4*u*a;if(d<0)return;let w=Math.zr(d),A=2*a;this.#t(t,s,i,h,n,e,r,o,(-l+w)/A,f),this.#t(t,s,i,h,n,e,r,o,(-l-w)/A,f)}static xg(t,s,i,h,n,e,r,o,a){a[0]=Math.D(a[0],t,r),a[1]=Math.D(a[1],s,o),a[2]=Math.B(a[2],t,r),a[3]=Math.B(a[3],s,o),this.#s(t,i,n,r,s,h,e,o,3*(3*(i-n)-t+r),6*(t-2*i+n),3*(i-t),a),this.#s(t,i,n,r,s,h,e,o,3*(3*(h-e)-s+o),6*(s-2*h+e),3*(h-s),a)}},Bi=null,Fn=null;function sr(c){return Bi||(Bi=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Fn=new Map([["\uFB05","\u017Ft"]])),c.bh(Bi,(t,s,i)=>s?s.V1("NFKC"):Fn.m(i))}function le(){if(typeof crypto.hk=="function")return crypto.hk();let c=new Uint8Array(32);return crypto.CE(c),ae(c)}var Wt="pdfjs_internal_id_";function et(c,t,s){return Math.D(Math.B(c,t),s)}function ue(c){return Uint8Array.prototype.nk?c.nk():btoa(ae(c))}typeof Promise.Ta!="function"&&(Promise.Ta=function(c,...t){return new Promise(s=>{s(c(...t))})});typeof Math.vg!="function"&&(Math.vg=function(c){return c.TE((t,s)=>t+s,0)});var ls=class c{static St(t){let s=[],i={vi:s,Su:Object.X(null)};return(function h(n){if(!n)return;let e=null,r=n.R;if(r==="#text")e=n.c;else{if(!c.z1(r))return;n?.Hs?.St?e=n.Hs.St:n.c&&(e=n.c)}if(e!==null&&s.r({Pt:e}),n.yh)for(let o of n.yh)h(o)})(t),i}static z1(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}},Qs=class{static ek(t,s,i,h,n){let e=h.rc(s,{c:null});switch(i.R){case"textarea":if(e.c!==null&&(t.St=e.c),n==="print")break;t.o("input",r=>{h.ft(s,{c:r.U.c})});break;case"input":if(i.Hs.j==="radio"||i.Hs.j==="checkbox"){if(e.c===i.Hs.OE?t.e("checked",!0):e.c===i.Hs.LE&&t.Jr("checked"),n==="print")break;t.o("change",r=>{h.ft(s,{c:r.U.Un?r.U.qr("xfaOn"):r.U.qr("xfaOff")})})}else{if(e.c!==null&&t.e("value",e.c),n==="print")break;t.o("input",r=>{h.ft(s,{c:r.U.c})})}break;case"select":if(e.c!==null){t.e("value",e.c);for(let r of i.yh)r.Hs.c===e.c?r.Hs.rh=!0:r.Hs.rk("selected")&&delete r.Hs.rh}t.o("input",r=>{let o=r.U.Qi,a=o.J1===-1?"":o[o.J1].c;h.ft(s,{c:a})})}}static Ng({oc:t,Eg:s,ok:i=null,Mh:h,Mt:n}){let{Hs:e}=s,r=t instanceof HTMLAnchorElement;e.j==="radio"&&(e.R=`${e.R}-${h}`);for(let[o,a]of Object.en(e))if(a!=null)switch(o){case"class":a.t&&t.e(o,a.et(" "));break;case"dataId":break;case"id":t.e("data-element-id",a);break;case"style":Object.$h(t.M,a);break;case"textContent":t.St=a;break;default:(!r||o!=="href"&&o!=="newWindow")&&t.e(o,a)}r&&n.ck(t,e.mh,e.ak),i&&e.lk&&this.ek(t,e.lk,s,i)}static P(t){let s=t.mt,i=t.Mt,h=t.uk,n=t.Mh||"display",e=document.$(h.R);h.Hs&&this.Ng({oc:e,Eg:h,Mh:n,Mt:i});let r=n!=="richText",o=t.h;if(o.g(e),t.ct){let u=`matrix(${t.ct.I.et(",")})`;o.M.I=u}r&&o.e("class","xfaLayer xfaFont");let a=[];if(h.yh.t===0){if(h.c){let u=document.cc(h.c);e.g(u),r&&ls.z1(h.R)&&a.r(u)}return{Cg:a}}let l=[[h,-1,e]];for(;l.t>0;){let[u,f,d]=l.Vi(-1);if(f+1===u.yh.t){l.kh();continue}let w=u.yh[++l.Vi(-1)[1]];if(w===null)continue;let{R:A}=w;if(A==="#text"){let p=document.cc(w.c);a.r(p),d.g(p);continue}let g=w?.Hs?.fk?document.de(w.Hs.fk,A):document.$(A);if(d.g(g),w.Hs&&this.Ng({oc:g,Eg:w,ok:s,Mh:n,Mt:i}),w.yh?.t>0)l.r([w,-1,g]);else if(w.c){let p=document.cc(w.c);r&&ls.z1(A)&&a.r(p),g.g(p)}}for(let u of o.IE(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.e("readOnly",!0);return{Cg:a}}static Ae(t){let s=`matrix(${t.ct.I.et(",")})`;t.h.M.I=s,t.h.Zt=!1}},Mt="http://www.w3.org/2000/svg",Tt=class{static yg=96;static dk=72;static Oa=this.yg/this.dk};async function Ns(c,t="text"){if(is(c,document.Pu)){let s=await fetch(c);if(!s.UE)throw new Error(s.Ak);switch(t){case"arraybuffer":return s.Tg();case"blob":return s.DE();case"json":return s.RE()}return s.zi()}return new Promise((s,i)=>{let h=new XMLHttpRequest;h.Gu("GET",c,!0),h.wk=t,h.pk=()=>{if(h.Og===XMLHttpRequest.BE)if(h.eh!==200&&h.eh!==0)i(new Error(h.Ak));else{switch(t){case"arraybuffer":case"blob":case"json":s(h.gk);return}s(h.FE)}},h.La(null)})}var us=class c{constructor({ks:t,Qe:s,J:i,C:h,Ct:n=0,Tt:e=0,Hu:r=!1}){this.ks=t,this.Qe=s,this.J=i,this.C=h,this.Ct=n,this.Tt=e,i*=s;let o=(t[2]+t[0])/2,a=(t[3]+t[1])/2,l,u,f,d,w,A,g,p;switch((h%=360)<0&&(h+=360),h){case 180:l=-1,u=0,f=0,d=1;break;case 90:l=0,u=1,f=1,d=0;break;case 270:l=0,u=-1,f=-1,d=0;break;case 0:l=1,u=0,f=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}r&&(f=-f,d=-d),l===0?(w=Math.H(a-t[1])*i+n,A=Math.H(o-t[0])*i+e,g=(t[3]-t[1])*i,p=(t[2]-t[0])*i):(w=Math.H(o-t[0])*i+n,A=Math.H(a-t[1])*i+e,g=(t[2]-t[0])*i,p=(t[3]-t[1])*i),this.I=[l*i,u*i,f*i,d*i,w-l*i*o-f*i*a,A-u*i*o-d*i*a],this.i=g,this.n=p}get Ji(){let t=this.ks;return D(this,"rawDims",{Ds:t[2]-t[0],Rs:t[3]-t[1],Zr:t[0],Yr:t[1]})}Dn({J:t=this.J,C:s=this.C,Ct:i=this.Ct,Tt:h=this.Tt,Hu:n=!1}={}){return new c({ks:this.ks.z(),Qe:this.Qe,J:t,C:s,Ct:i,Tt:h,Hu:n})}jE(t,s){let i=[t,s];return E.ju(i,this.I),i}SE(t){let s=[t[0],t[1]];E.ju(s,this.I);let i=[t[2],t[3]];return E.ju(i,this.I),[s[0],s[1],i[0],i[1]]}PE(t,s){let i=[t,s];return E.sk(i,this.I),i}},fs=class extends jt{constructor(t,s=0){super(t,"RenderingCancelledException"),this.q1=s}};function Ei(c){let t=c.t,s=0;for(;s<t&&c[s].C1()==="";)s++;return c.Ia(s,s+5).mk()==="data:"}function vn(c){return typeof c=="string"&&/\.pdf$/i.xh(c)}function ir(c){return[c]=c.Ys(/[#?]/,1),c.Ia(c.bk("/")+1)}function hr(c,t="document.pdf"){if(typeof c!="string")return t;if(Ei(c))return I('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let s=(e=>{try{return new URL(e)}catch{try{return new URL(decodeURIComponent(e))}catch{try{return new URL(e,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(e),"https://foo.bar")}catch{return null}}}}})(c);if(!s)return t;let i=e=>{try{let r=decodeURIComponent(e);return r.Wi("/")?(r=r.Ys("/").Vi(-1),r.xh(/^\.pdf$/i)?r:e):r}catch{return e}},h=/\.pdf$/i,n=s.GE.Ys("/").Vi(-1);if(h.xh(n))return i(n);if(s.Lg.rt>0){let e=Array.xi(s.Lg.W()).Ig();for(let o of e)if(h.xh(o))return i(o);let r=Array.xi(s.Lg.Qr()).Ig();for(let o of r)if(h.xh(o))return i(o)}if(s.On){let e=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.rn(s.On);if(e)return i(e[0])}return t}var Vs=class{Ua=Object.X(null);Z1=[];Wu(t){t in this.Ua&&I(`Timer is already running for ${t}`),this.Ua[t]=Date.ac()}Y1(t){t in this.Ua||I(`Timer has not been started for ${t}`),this.Z1.r({R:t,Qu:this.Ua[t],Xr:Date.ac()}),delete this.Ua[t]}fe(){let t=[],s=0;for(let{R:i}of this.Z1)s=Math.B(i.t,s);for(let{R:i,Qu:h,Xr:n}of this.Z1)t.r(`${i.HE(s)} ${n-h}ms
`);return t.et("")}};function is(c,t){let s=t?URL.We(c,t):URL.We(c);return s?.j1==="http:"||s?.j1==="https:"}function ut(c){c.Xs()}function Y(c){c.Xs(),c.Da()}var ds=class{static#t;static Ug(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let s=this.#t.rn(t);if(!s)return null;let i=parseInt(s[1],10),h=parseInt(s[2],10);h=h>=1&&h<=12?h-1:0;let n=parseInt(s[3],10);n=n>=1&&n<=31?n:1;let e=parseInt(s[4],10);e=e>=0&&e<=23?e:0;let r=parseInt(s[5],10);r=r>=0&&r<=59?r:0;let o=parseInt(s[6],10);o=o>=0&&o<=59?o:0;let a=s[7]||"Z",l=parseInt(s[8],10);l=l>=0&&l<=23?l:0;let u=parseInt(s[9],10)||0;return u=u>=0&&u<=59?u:0,a==="-"?(e+=l,r+=u):a==="+"&&(e-=l,r-=u),new Date(Date.WE(i,h,n,e,r,o))}};function nr(c,{J:t=1,C:s=0}){let{i,n:h}=c.Hs.M,n=[0,0,parseInt(i),parseInt(h)];return new us({ks:n,Qe:1,J:t,C:s})}function As(c){if(c.sn("#")){let t=parseInt(c.z(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return c.sn("rgb(")?c.z(4,-1).Ys(",").bt(t=>parseInt(t)):c.sn("rgba(")?c.z(5,-1).Ys(",").bt(t=>parseInt(t)).z(0,3):(I(`Not a valid color format: "${c}"`),[0,0,0])}function z(c){let{Vr:t,nc:s,ec:i,zt:h,Bu:n,Fu:e}=c.oh();return[t,s,i,h,n,e]}function mt(c){let{Vr:t,nc:s,ec:i,zt:h,Bu:n,Fu:e}=c.oh().Vu();return[t,s,i,h,n,e]}function Ut(c,t,s=!1,i=!0){if(t instanceof us){let{Ds:h,Rs:n}=t.Ji,{M:e}=c,r=tt._$,o=`var(--total-scale-factor) * ${h}px`,a=`var(--total-scale-factor) * ${n}px`,l=r?`round(down, ${o}, var(--scale-round-x))`:`calc(${o})`,u=r?`round(down, ${a}, var(--scale-round-y))`:`calc(${a})`;s&&t.C%180!=0?(e.i=u,e.n=l):(e.i=l,e.n=u)}i&&c.e("data-main-rotation",t.C)}var kt=class c{constructor(){let{lc:t}=c;this.Kr=t,this._r=t}get QE(){return this.Kr!==1||this._r!==1}get yk(){return this.Kr===this._r}VE(t,s,i,h,n=-1){let e=1/0,r=1/0,o=1/0;(i=c.Mk(i,n))>0&&(e=Math.zr(i/(t*s))),h!==-1&&(r=h/t,o=h/s);let a=Math.D(e,r,o);return this.Kr>a||this._r>a?(this.Kr=a,this._r=a,!0):!1}static get lc(){return globalThis.zE||1}static Mk(t,s){if(s>=0){let i=Math.dt(window.$k.JE*window.$k.qE*this.lc**2*(1+s/100));return t>0?Math.D(t,i):i}return t}},Vi=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],zi=class{static get kk(){return D(this,"isDarkMode",!!window?.xk?.("(prefers-color-scheme: dark)").vk)}},Ji=class{static get ZE(){let t=document.$("span");t.p.d("comment","sidebar");let{M:s}=t;s.i=s.n="0",s.uc="none",s.L="var(--comment-fg-color)",document.ce.g(t);let{L:i}=window.Dg(t);return t.x(),D(this,"commentForegroundColor",As(i))}};function er(c,t,s,i){let h=255*(1-(i=Math.D(Math.B(i??1,0),1)));return[c=Math.At(c*i+h),t=Math.At(t*i+h),s=Math.At(s*i+h)]}function jn(c,t){let s=c[0]/255,i=c[1]/255,h=c[2]/255,n=Math.B(s,i,h),e=Math.D(s,i,h),r=(n+e)/2;if(n===e)t[0]=t[1]=0;else{let o=n-e;switch(t[1]=r<.5?o/(n+e):o/(2-n-e),n){case s:t[0]=60*((i-h)/o+(i<h?6:0));break;case i:t[0]=60*((h-s)/o+2);break;case h:t[0]=60*((s-i)/o+4)}}t[2]=r}function qi(c,t){let s=c[0],i=c[1],h=c[2],n=(1-Math.H(2*h-1))*i,e=n*(1-Math.H(s/60%2-1)),r=h-n/2;switch(Math.It(s/60)){case 0:t[0]=n+r,t[1]=e+r,t[2]=r;break;case 1:t[0]=e+r,t[1]=n+r,t[2]=r;break;case 2:t[0]=r,t[1]=n+r,t[2]=e+r;break;case 3:t[0]=r,t[1]=e+r,t[2]=n+r;break;case 4:t[0]=e+r,t[1]=r,t[2]=n+r;break;case 5:case 6:t[0]=n+r,t[1]=r,t[2]=e+r}}function Sn(c){return c<=.03928?c/12.92:((c+.055)/1.055)**2.4}function Pn(c,t,s){qi(c,s),s.bt(Sn);let i=.2126*s[0]+.7152*s[1]+.0722*s[2];qi(t,s),s.bt(Sn);let h=.2126*s[0]+.7152*s[1]+.0722*s[2];return i>h?(i+.05)/(h+.05):(h+.05)/(i+.05)}var Gn=new Map;function rr(c,t){let s=c[0]+256*c[1]+65536*c[2]+16777216*t[0]+4294967296*t[1]+1099511627776*t[2],i=Gn.m(s);if(i)return i;let h=new Float32Array(9),n=h.gs(0,3),e=h.gs(3,6);jn(c,e);let r=h.gs(6,9);jn(t,r);let o=r[2]<.5,a=o?12:4.5;if(e[2]=o?Math.zr(e[2]):1-Math.zr(1-e[2]),Pn(e,r,n)<a){let l,u;o?(l=e[2],u=1):(l=0,u=e[2]);let f=.005;for(;u-l>f;){let d=e[2]=(l+u)/2;o===Pn(e,r,n)<a?l=d:u=d}e[2]=o?u:l}return qi(e,n),i=E.hn(Math.At(255*n[0]),Math.At(255*n[1]),Math.At(255*n[2])),Gn.y(s,i),i}function fe({oc:c,Ve:t,Gt:s},i){let h=document.Nk();if(typeof c=="string"){let n=document.$("p");n.Ve=t||"auto";let e=c.Ys(/(?:\r\n?|\n)/);for(let r=0,o=e.t;r<o;++r){let a=e[r];n.g(document.cc(a)),r<o-1&&n.g(document.$("br"))}h.g(n)}else Qs.P({uk:c,h,Mh:"richText"});h.on.p.d("richText",s),i.g(h)}function de(c){let t=new Path2D;if(!c)return t;for(let s=0,i=c.t;s<i;)switch(c[s++]){case Je:t.Pr(c[s++],c[s++]);break;case qe:t.Gr(c[s++],c[s++]);break;case Ze:t.zu(c[s++],c[s++],c[s++],c[s++],c[s++],c[s++]);break;case Ye:t.YE(c[s++],c[s++],c[s++],c[s++]);break;case Xe:t.Wr();break;default:I(`Unrecognized drawing path operator: ${c[s-1]}`)}return t}var Zi=class c{#t=null;#s=null;#h;#i=null;#r=null;#e=null;#n=null;#o=null;static#a=null;constructor(t){this.#h=t,c.#a||=Object.to({Ek:"pdfjs-editor-remove-freetext-button",X1:"pdfjs-editor-remove-highlight-button",Ck:"pdfjs-editor-remove-ink-button",XE:"pdfjs-editor-remove-stamp-button",KE:"pdfjs-editor-remove-signature-button"})}P(){let t=this.#t=document.$("div");t.p.d("editToolbar","hidden"),t.e("role","toolbar");let s=this.#h.b.ls;s instanceof AbortSignal&&!s.Ra&&(t.o("contextmenu",ut,{w:s}),t.o("pointerdown",c.#c,{w:s}));let i=this.#i=document.$("div");i.Gt="buttons",t.g(i);let h=this.#h.Rg;if(h){let{M:n}=t,e=this.#h.b.so==="ltr"?1-h[0]:h[0];n.Bg=100*e+"%",n.Ni=`calc(${100*h[1]}% + var(--editor-toolbar-vert-offset))`}return t}get h(){return this.#t}static#c(t){t.Da()}#f(t){this.#h.vh=!1,Y(t)}#l(t){this.#h.vh=!0,Y(t)}#d(t){let s=this.#h.b.ls;return!(s instanceof AbortSignal)||s.Ra?!1:(t.o("focusin",this.#f.N(this),{Ei:!0,w:s}),t.o("focusout",this.#l.N(this),{Ei:!0,w:s}),t.o("contextmenu",ut,{w:s}),!0)}ii(){this.#t.p.d("hidden"),this.#s?.Ba()}Ws(){this.#t.p.x("hidden"),this.#r?.K1(),this.#e?.K1()}Tk(){let{ze:t,b:s}=this.#h,i=document.$("button");i.p.d("basic","deleteButton"),i.xs=0,i.e("data-l10n-id",c.#a[t]),this.#d(i)&&i.o("click",h=>{s.it()},{w:s.ls}),this.#i.g(i)}get#p(){let t=document.$("div");return t.Gt="divider",t}async Ok(t){let s=await t.P();this.#d(s),this.#i.g(s,this.#p),this.#r=t}Je(t,s=null){if(this.#e)return;let i=t.Lk();if(!i)return;this.#d(i);let h=this.#n=this.#p;s?(this.#i.Ik(i,s),this.#i.Ik(h,s)):this.#i.g(i,h),this.#e=t,t._E=this}Uk(t){if(this.#s)return;this.#s=t;let s=t.Fg();this.#d(s),this.#i.g(s,this.#p)}async Dk(t){let s=this.#o=await t.tC(this.#h);this.#d(s),this.#i.g(s,this.#p)}Rk(t){t==="comment"&&(this.#e?.Bk(),this.#e=null,this.#n?.x(),this.#n=null)}async _1(t,s){switch(t){case"colorPicker":s&&this.Uk(s);break;case"altText":s&&await this.Ok(s);break;case"editSignature":s&&await this.Dk(s);break;case"delete":this.Tk();break;case"comment":s&&this.Je(s)}}async Fk(t,s,i){if(!s&&t==="comment")return;let h=this.#i.Ju(i);h&&t==="comment"&&this.Je(s,h)}jk(t){this.#o&&(this.#o.Nh=t)}x(){this.#t.x(),this.#s?.K(),this.#s=null}},Yi=class{#t=null;#s=null;#h;constructor(t){this.#h=t}#i(){let t=this.#s=document.$("div");t.Gt="editToolbar",t.e("role","toolbar");let s=this.#h.ls;s instanceof AbortSignal&&!s.Ra&&t.o("contextmenu",ut,{w:s});let i=this.#t=document.$("div");return i.Gt="buttons",t.g(i),this.#h.qu()&&this.#e("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#h.jg("floating_button")}),this.#e("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#h.Zu("floating_button")}),t}#r(t,s){let i=0,h=0;for(let n of t){let e=n.f+n.n;if(e<i)continue;let r=n.A+(s?n.i:0);e>i?(h=r,i=e):s?r>h&&(h=r):r<h&&(h=r)}return[s?1-h:h,i]}Ws(t,s,i){let[h,n]=this.#r(s,i),{M:e}=this.#s||=this.#i();t.g(this.#s),e.Bg=100*h+"%",e.Ni=`calc(${100*n}% + var(--editor-toolbar-vert-offset))`}ii(){this.#s.x()}#e(t,s,i,h){let n=document.$("button");n.p.d("basic",t),n.xs=0,n.e("data-l10n-id",s);let e=document.$("span");n.g(e),e.Gt="visuallyHidden",e.e("data-l10n-id",i);let r=this.#h.ls;r instanceof AbortSignal&&!r.Ra&&(n.o("contextmenu",ut,{w:r}),n.o("click",h,{w:r})),this.#t.g(n)}};function Ae(c,t,s){for(let i of s)t.o(i,c[i].N(c))}var ht=class c{static#t=NaN;static#s=null;static#h=NaN;static#i=null;static Sk(t){(c.#s||=new Set).d(t)}static Pk(t,s){c.#t||=s,c.#i??=t}static Gk(t){c.#h=t}static Hk(t){return c.#t===t}static Sg(t){return c.#t===t?!0:(c.#s?.it(t),!1)}static Pg(t){return c.#i===t}static Wk(t){return c.#i!==null&&!c.Pg(t)}static Gg(t){return c.#h===t}static Qk(){return c.#s?.rt>=1}static Vk(){c.#i=null}static zk(){c.#t=NaN,c.#s=null}static Jk(){c.#h=NaN}},Xi=class{#t=0;get l(){return`${os}${this.#t++}`}},Ki=class c{#t=le();#s=0;#h=null;static get qk(){let t=new OffscreenCanvas(1,3).Us("2d",{fc:!0}),s=new Image;return s.io='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',D(this,"_isSVGFittingCanvas",s.dc().wt(()=>(t.hs(s,0,0,1,1,0,0,1,3),new Uint32Array(t.Fa(0,0,1,1).s._)[0]===0)))}async#i(t,s){this.#h||=new Map;let i=this.#h.m(t);if(i===null)return null;if(i?.Ot)return i.ho+=1,i;try{i||={Ot:null,l:`image_${this.#t}_${this.#s++}`,ho:0,no:!1};let h;if(typeof s=="string"?(i.at=s,h=await Ns(s,"blob")):s instanceof File?h=i.Ac=s:s instanceof Blob&&(h=s),h.j==="image/svg+xml"){let n=c.qk,e=new FileReader,r=new Image,o=new Promise((a,l)=>{r.Zk=()=>{i.Ot=r,i.no=!0,a()},e.Zk=async()=>{let u=i.Yk=e.sC;r.io=await n?`${u}#svgView(preserveAspectRatio(none))`:u},r.Hg=e.Hg=l});e.iC(h),await o}else i.Ot=await createImageBitmap(h);i.ho=1}catch(h){I(h),i=null}return this.#h.y(t,i),i&&this.#h.y(i.l,i),i}async td(t){let{hC:s,R:i,rt:h,j:n}=t;return this.#i(`${s}_${i}_${h}_${n}`,t)}async Wg(t){return this.#i(t,t)}async Xk(t,s){let i=await s;return this.#i(t,i)}async Kk(t){this.#h||=new Map;let s=this.#h.m(t);if(!s)return null;if(s.Ot)return s.ho+=1,s;if(s.Ac)return this.td(s.Ac);if(s.sd){let{sd:i}=s;return delete s.sd,this.Xk(s.l,i)}return this.Wg(s.at)}Qg(t,s){this.#h||=new Map;let i=this.#h.m(t);if(i?.Ot)return i.ho+=1,i;let h=new OffscreenCanvas(s.i,s.n);return h.Us("2d").hs(s,0,0),i={Ot:h.id(),l:`image_${this.#t}_${this.#s++}`,ho:1,no:!1},this.#h.y(t,i),this.#h.y(i.l,i),i}_k(t){let s=this.#h.m(t);return s?.no?s.Yk:null}t3(t){this.#h||=new Map;let s=this.#h.m(t);if(!s||(s.ho-=1,s.ho!==0))return;let{Ot:i}=s;if(!s.at&&!s.Ac){let h=new OffscreenCanvas(i.i,i.n);h.Us("bitmaprenderer").nC(i),s.sd=h.eC()}i.Eh?.(),s.Ot=null}Vg(t){return t.sn(`image_${this.#t}_`)}},_i=class{#t=[];#s=!1;#h;#i=-1;constructor(t=128){this.#h=t}d({Ci:t,vs:s,qe:i,ch:h,j:n=NaN,ja:e=!1,Sa:r=!1}){if(h&&t(),this.#s)return;let o={Ci:t,vs:s,qe:i,j:n};if(this.#i===-1){this.#t.t>0&&(this.#t.t=0),this.#i=0,this.#t.r(o);return}if(e&&this.#t[this.#i].j===n){r&&(o.vs=this.#t[this.#i].vs),this.#t[this.#i]=o;return}let a=this.#i+1;a===this.#h?this.#t.cn(0,1):(this.#i=a,a<this.#t.t&&this.#t.cn(a)),this.#t.r(o)}vs(){if(this.#i===-1)return;this.#s=!0;let{vs:t,qe:s}=this.#t[this.#i];t(),s?.(),this.#s=!1,this.#i-=1}hd(){if(this.#i<this.#t.t-1){this.#i+=1,this.#s=!0;let{Ci:t,qe:s}=this.#t[this.#i];t(),s?.(),this.#s=!1}}eo(){return this.#i!==-1}ro(){return this.#i<this.#t.t-1}s3(t){if(this.#i!==-1){for(let s=this.#i;s>=0;s--)if(this.#t[s].j!==t){this.#t.cn(s+1,this.#i-s),this.#i=s;return}this.#t.t=0,this.#i=-1}}K(){this.#t=null}},Dt=class{constructor(t){this._=[],this.nd=new Map,this.ed=new Set;let{ue:s}=tt.Hi;for(let[i,h,n={}]of t)for(let e of i){let r=e.sn("mac+");s&&r?(this.nd.y(e.z(4),{qi:h,Qi:n}),this.ed.d(e.Ys("+").Vi(-1))):!s&&!r&&(this.nd.y(e,{qi:h,Qi:n}),this.ed.d(e.Ys("+").Vi(-1)))}}#t(t){t.i3&&this._.r("alt"),t.we&&this._.r("ctrl"),t.Yu&&this._.r("meta"),t.rd&&this._.r("shift"),this._.r(t.Qs);let s=this._.et("+");return this._.t=0,s}rn(t,s){if(!this.ed.ht(s.Qs))return;let i=this.nd.m(this.#t(s));if(!i)return;let{qi:h,Qi:{h3:n=!1,Ht:e=[],Ms:r=null}}=i;(!r||r(t,s))&&(h.N(t,...e,s)(),n||Y(s))}},th=class c{static n3=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get Xu(){let t=new Map([["CanvasText",null],["Canvas",null]]);return(function(i){let h=document.$("span");h.M.tn="hidden",h.M.rC="only light",document.ce.g(h);for(let n of i.Qr()){h.M.L=n;let e=window.Dg(h).L;i.y(n,As(e))}h.x()})(t),D(this,"_colors",t)}Ku(t){let s=As(t);if(!window.xk("(forced-colors: active)").vk)return s;for(let[i,h]of this.Xu)if(h.oC((n,e)=>n===s[e]))return c.n3.m(i);return s}e3(t){let s=this.Xu.m(t);return s?E.hn(...s):t}},Rt=class c{#t=new AbortController;#s=null;#h=null;#i=new Map;#r=new Map;#e=null;#n=null;#o=null;#a=new _i;#c=null;#f=null;#l=null;#d=0;#p=new Set;#A=null;#u=null;#w=new Set;oo=null;#g=!1;#b=!1;#m=!1;#v=null;#k=null;#M=null;#E=null;#y=!1;#x=null;#O=new Xi;#C=!1;#T=!1;#F=!1;#I=null;#D=null;#j=null;#R=null;#Q=null;#N=U.Is;#$=new Set;#U=null;#S=null;#G=null;#J=null;#z=null;#q={Rn:!1,ot:!0,eo:!1,ro:!1,Ze:!1,od:!1};#H=[0,0];#B=null;#V=null;#K=null;#_=null;#P=null;static cd=1;static ad=10;static get co(){let t=c.prototype,s=e=>e.#V.$s(document.Bn)&&document.Bn.cC!=="BUTTON"&&e.r3(),i=(e,{U:r})=>{if(r instanceof HTMLInputElement){let{j:o}=r;return o!=="text"&&o!=="number"}return!0},h=this.cd,n=this.ad;return D(this,"_keyboardManager",new Dt([[["ctrl+a","mac+meta+a"],t.o3,{Ms:i}],[["ctrl+z","mac+meta+z"],t.vs,{Ms:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.hd,{Ms:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.it,{Ms:i}],[["Enter","mac+Enter"],t.ld,{Ms:(e,{U:r})=>!(r instanceof HTMLButtonElement)&&e.#V.$s(r)&&!e.ud}],[[" ","mac+ "],t.ld,{Ms:(e,{U:r})=>!(r instanceof HTMLButtonElement)&&e.#V.$s(document.Bn)}],[["Escape","mac+Escape"],t.ao],[["ArrowLeft","mac+ArrowLeft"],t.pe,{Ht:[-h,0],Ms:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.pe,{Ht:[-n,0],Ms:s}],[["ArrowRight","mac+ArrowRight"],t.pe,{Ht:[h,0],Ms:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.pe,{Ht:[n,0],Ms:s}],[["ArrowUp","mac+ArrowUp"],t.pe,{Ht:[0,-h],Ms:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.pe,{Ht:[0,-n],Ms:s}],[["ArrowDown","mac+ArrowDown"],t.pe,{Ht:[0,h],Ms:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.pe,{Ht:[0,n],Ms:s}]]))}constructor(t,s,i,h,n,e,r,o,a,l,u,f,d,w,A,g){let p=this.ls=this.#t.w;this.#V=t,this.#K=s,this.#_=i,this.#e=h,this.#c=n,this.#S=e,this.#z=o,this.Ch=r,r.Pa("editingaction",this.c3.N(this),{w:p}),r.Pa("pagechanging",this.a3.N(this),{w:p}),r.Pa("scalechanging",this.ah.N(this),{w:p}),r.Pa("rotationchanging",this.l3.N(this),{w:p}),r.Pa("setpreference",this.u3.N(this),{w:p}),r.Pa("switchannotationeditorparams",m=>this.lo(m.j,m.c),{w:p}),window.o("pointerdown",()=>{this.#T=!0},{Ei:!0,w:p}),window.o("pointerup",()=>{this.#T=!1},{Ei:!0,w:p}),this.#rt(),this.#ft(),this.#st(),this.#n=o.mt,this.#v=o.Bs,this.#G=a,this.#E=l||null,this.#g=u,this.#b=f,this.#m=d,this.#Q=w||null,this.Ye={_u:Tt.Oa,C:0},this.uo=!1,this.oo=A||null,this.f3=g!==!1,n?.aC(this)}K(){this.#P?.G(),this.#P=null,this.#t?.Ut(),this.#t=null,this.ls=null;for(let t of this.#r.W())t.K();this.#r.tt(),this.#i.tt(),this.#w.tt(),this.#R?.tt(),this.#s=null,this.#$.tt(),this.#a.K(),this.#e?.K(),this.#c?.K(),this.#S?.K(),this.#x?.ii(),this.#x=null,this.#j?.K(),this.#j=null,this.#h=null,this.#k&&(clearTimeout(this.#k),this.#k=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this.oo?.K(),this.#z=null}hi(t){return AbortSignal.fd([this.ls,t.w])}get d3(){return this.#Q}get wc(){return this.#b}get dd(){return this.#m}get Ad(){return D(this,"hcmFilter",this.#G?this.#v.wd(this.#G.A3,this.#G.pc):"none")}get so(){return D(this,"direction",getComputedStyle(this.#V).so)}get pd(){return D(this,"_highlightColors",this.#E?new Map(this.#E.Ys(",").bt(t=>((t=t.Ys("=").bt(s=>s.C1()))[1]=t[1].zg(),t))):null)}get fo(){let{pd:t}=this;if(!t)return D(this,"highlightColors",null);let s=new Map,i=!!this.#G;for(let[h,n]of t){let e=h.Jg("_HCM");i&&e?s.y(h.qg("_HCM",""),n):i||e||s.y(h,n)}return D(this,"highlightColors",s)}get Zg(){return D(this,"highlightColorNames",this.fo?new Map(Array.xi(this.fo,t=>t.Ig())):null)}Ga(t){if(!this.pd)return t;let s=this.Zg.m(t);return this.pd.m(s)||t}gd(t){return this.Zg.m(t)||t}Yg(t){t?(this.ao(),this.Ha(!0)):this.Ha(!1),this.#l=t}lC(t){this.#j=t}md(t,s=!1){this.#e?.md(this,t,s)}qu(){return!!this.#c}Wa(t,s,i,h){this.#c?.w3(this,t,s,i,h)}uC(t,s){this.#r.m(t)?.p3(s)?.ge(!0,!0)}Xg(t){this.#c?.Xg(t.Th())}Kg(t){this.#c?.Kg(t)}g3(t){this.#c?.fC([t.gc])}ge(t,s,i=void 0){this.#c?.tf(t,s,i)}bd(t,s){return t&&this.#c?.bd(t,s)||null}m3(){return this.#c?.dC||null}async AC(t){if(this.#r.ht(t-1))return;let{G:s,Z:i}=Promise.Lt(),h=n=>{n.Fn===t&&(this.Ch.wC("editorsrendered",h),s())};this.Ch.us("editorsrendered",h),await i}_g(t){this.#S?._g({Ao:this,Oh:t})}get tm(){return this.#S}b3(t,s){this.Ch.us("annotationeditormodechanged",s,{sf:!0,w:this.ls}),this.Ch.Vs("showannotationeditorui",{ns:this,jn:t})}pC(t,s){this.Ch.Vs("setpreference",{ns:this,R:t,c:s})}u3({R:t,c:s}){t==="enableNewAltTextWhenAddingImage"&&(this.#m=s)}a3({Fn:t}){this.#d=t-1}y3(){this.#V.gt()}M3(t,s){for(let i of this.#r.W()){let{A:h,f:n,i:e,n:r}=i.h.di();if(t>=h&&t<=h+e&&s>=n&&s<=n+r)return i}return null}Ha(t=!1){this.#K.p.$t("noUserSelect",t)}yd(t){this.#w.d(t)}$3(t){this.#w.it(t)}ah({J:t}){this.zs(),this.Ye._u=t*Tt.Oa;for(let s of this.#w)s.ah();this.#l?.ah()}l3({gC:t}){this.zs(),this.Ye.C=t}#X({hf:t}){return t.nf===Node.ef?t.sm:t}#tt(t){let{Lh:s}=this;if(s.im(t))return s;for(let i of this.#r.W())if(i.im(t))return i;return null}Zu(t="",s=!1){let i=document.Qa();if(!i||i.hm)return;let{hf:h,nm:n,em:e,rm:r}=i,o=i.fe(),a=this.#X(i).Md(".textLayer"),l=this.om(a);if(!l)return;i.mC();let u=this.#tt(a),f=this.#N===U.Is,d=()=>{let w=u?.Va({A:0,f:0},!1,{$d:t,rf:l,hf:h,nm:n,em:e,rm:r,zi:o});f&&this.of("highlight",!0,!0),s&&w?.Wa()};f?this.b3(U.ki,d):d()}jg(t=""){this.Zu(t,!0)}#nt(){let t=document.Qa();if(!t||t.hm)return;let s=this.#X(t).Md(".textLayer"),i=this.om(s);i&&(this.#x||=new Yi(this),this.#x.Ws(s,i,this.so==="ltr"))}k3(t){if(!this.#n)return null;let s=`${os}${t}`,i=this.#n.cf(s);return i&&this.#n.x(s),i}Xe(t){t.ot()||!this.#n||this.#n.ht(t.l)||this.#n.ft(t.l,t)}af(t,s=null){let i=this.#_;i&&(i.e("data-l10n-id",t),s?i.e("data-l10n-args",JSON.Ke(s)):i.Jr("data-l10n-args"))}#et(){let t=document.Qa();if(!t||t.hm){this.#U&&(this.#x?.ii(),this.#U=null,this.#L({od:!1}));return}let{hf:s}=t;if(s===this.#U)return;let i=this.#X(t).Md(".textLayer");if(i){if(this.#x?.ii(),this.#U=s,this.#L({od:!0}),(this.#N===U.ki||this.#N===U.Is)&&(this.#N===U.ki&&this.of("highlight",!0,!0),this.#y=this.uo,!this.uo)){let h=this.#N===U.ki?this.#tt(i):null;if(h?._e(),this.#T){let n=new AbortController,e=this.hi(n),r=o=>{(o.j!=="pointerup"||o.za===0)&&(n.Ut(),h?._e(!0),o.j==="pointerup"&&this.#Z("main_toolbar"))};window.o("pointerup",r,{w:e}),window.o("blur",r,{w:e})}else h?._e(!0),this.#Z("main_toolbar")}}else this.#U&&(this.#x?.ii(),this.#U=null,this.#L({od:!1}))}#Z(t=""){this.#N===U.ki?this.Zu(t):this.#g&&this.#nt()}#rt(){document.o("selectionchange",this.#et.N(this),{w:this.ls})}#ot(){if(this.#M)return;this.#M=new AbortController;let t=this.hi(this.#M);window.o("focus",this.gt.N(this),{w:t}),window.o("blur",this.x3.N(this),{w:t})}#ct(){this.#M?.Ut(),this.#M=null}x3(){if(this.uo=!1,this.#y&&(this.#y=!1,this.#Z("main_toolbar")),!this.an)return;let{Bn:t}=document;for(let s of this.#$)if(s.h.$s(t)){this.#D=[s,t],s.vh=!1;break}}gt(){if(!this.#D)return;let[t,s]=this.#D;this.#D=null,s.o("focusin",()=>{t.vh=!0},{sf:!0,w:this.ls}),s.gt()}#st(){if(this.#I)return;this.#I=new AbortController;let t=this.hi(this.#I);window.o("keydown",this.kd.N(this),{w:t}),window.o("keyup",this.v3.N(this),{w:t})}#at(){this.#I?.Ut(),this.#I=null}#lt(){if(this.#f)return;this.#f=new AbortController;let t=this.hi(this.#f);document.o("copy",this.cm.N(this),{w:t}),document.o("cut",this.N3.N(this),{w:t}),document.o("paste",this.Ja.N(this),{w:t})}#ut(){this.#f?.Ut(),this.#f=null}#ft(){let t=this.ls;document.o("dragover",this.E3.N(this),{w:t}),document.o("drop",this.C3.N(this),{w:t})}bC(){this.#st(),this.me(!0)}yC(){this.#at(),this.me(!1)}E3(t){for(let{j:s}of t.am.vi)for(let i of this.#u)if(i.lf(s)){t.am.MC="copy",t.Xs();return}}C3(t){for(let s of t.am.vi)for(let i of this.#u)if(i.lf(s.j)){i.Ja(s,this.Lh),t.Xs();return}}cm(t){if(t.Xs(),this.#s?.zs(),!this.an)return;let s=[];for(let i of this.#$){let h=i.es(!0);h&&s.r(h)}s.t!==0&&t.xd.$C("application/pdfjs",JSON.Ke(s))}N3(t){this.cm(t),this.it()}async Ja(t){t.Xs();let{xd:s}=t;for(let n of s.vi)for(let e of this.#u)if(e.lf(n.j)){e.Ja(n,this.Lh);return}let i=s.Th("application/pdfjs");if(!i)return;try{i=JSON.We(i)}catch(n){I(`paste: "${n.Ln}".`);return}if(!Array.uf(i))return;this.ao();let h=this.Lh;try{let n=[];for(let o of i){let a=await h.Fs(o);if(!a)return;n.r(a)}let e=()=>{for(let o of n)this.#it(o);this.#ht(n)},r=()=>{for(let o of n)o.x()};this.ni({Ci:e,vs:r,ch:!0})}catch(n){I(`paste: "${n.Ln}".`)}}kd(t){this.uo||t.Qs!=="Shift"||(this.uo=!0),this.#N===U.Is||this.T3||c.co.rn(this,t)}v3(t){this.uo&&t.Qs==="Shift"&&(this.uo=!1,this.#y&&(this.#y=!1,this.#Z("main_toolbar")))}c3({R:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.Zu("context_menu");break;case"commentSelection":this.jg("context_menu")}}#L(t){Object.en(t).ff(([s,i])=>this.#q[s]!==i)&&(this.Ch.Vs("annotationeditorstateschanged",{ns:this,va:Object.$h(this.#q,t)}),this.#N===U.ki&&t.Ze===!1&&this.#W([[R.ig,!0]]))}#W(t){this.Ch.Vs("annotationeditorparamschanged",{ns:this,va:t})}me(t){t?(this.#ot(),this.#lt(),this.#L({Rn:this.#N!==U.Is,ot:this.#Y(),eo:this.#a.eo(),ro:this.#a.ro(),Ze:!1})):(this.#ct(),this.#ut(),this.#L({Rn:!1}),this.Ha(!1))}O3(t){if(!this.#u){this.#u=t;for(let s of this.#u)this.#W(s.qa)}}L3(){return this.#O.l}get Lh(){return this.#r.m(this.#d)}I3(t){return this.#r.m(t)}get kC(){return this.#d}U3(t){this.#r.y(t.Q,t),this.#C?t.df():t.Af()}D3(t){this.#r.it(t.Q)}async wf(t,s=null,i=!1,h=!1,n=!1){if(this.#N!==t){if(this.#P&&(await this.#P.Z,!this.#P))return;if(this.#P=Promise.Lt(),this.#l?.zs(),this.#N===U.tc&&this.#c?.xC(),this.#c?.vC(),this.#N=t,t!==U.Is){for(let e of this.#i.W())e.vd();t===U.R1&&await this.#S?.NC(),this.me(!0),await this.#dt(),this.ao();for(let e of this.#r.W())e.wf(t);if(t===U.tc){this.#h||=await this.#z.Nd(new Set(this.#u.bt(o=>o.be)));let e=new Set,r=[];for(let o of this.#i.W()){let{F:a,tr:l,lt:u}=o;a&&e.d(a),l&&!u&&r.r(o.Th())}for(let o of this.#h){let{l:a,pt:l,Ai:u}=o;l&&u?.Pt&&!e.ht(a)&&!this.#p.ht(a)&&r.r(o)}this.#c?.EC(r)}if(s){for(let e of this.#i.W())e.gc===s?(this.sr(e),n?e.Wa():h?e.pf():e.gt()):e.Zi();this.#P.G()}else i&&this.ld(),this.#P.G()}else{this.me(!1),this.#At();for(let e of this.#i.W())e.R3();this.oo?.ii(),this.ge(null),this.#P.G()}}}ld(){this.Lh.Za()&&this.Lh.lm()}Ya(t){t.jn!==this.#N&&this.Ch.Vs("switchannotationeditormode",{ns:this,...t})}lo(t,s){if(this.#u){switch(t){case R.BM:this.Lh.lm(s);return;case R.B1:this.Ch.Vs("reporttelemetry",{ns:this,va:{j:"editing",s:{j:"highlight",Ns:"toggle_visibility"}}}),(this.#J||=new Map).y(t,s),this.of("highlight",s)}if(this.an)for(let i of this.#$)i.lo(t,s);else for(let i of this.#u)i.gf(t,s)}}of(t,s,i=!1){for(let h of this.#i.W())h.ze===t&&h.Ws(s);(this.#J?.m(R.B1)??!0)!==s&&this.#W([[R.B1,s]])}mc(t=!1){if(this.#F!==t){this.#F=t;for(let s of this.#r.W())t?s.Ed():s.Cd(),s.h.p.$t("waiting",t)}}async#dt(){if(!this.#C){this.#C=!0;let t=[];for(let s of this.#r.W())t.r(s.df());await Promise.mf(t);for(let s of this.#i.W())s.df()}}#At(){if(this.ao(),this.#C){this.#C=!1;for(let t of this.#r.W())t.Af();for(let t of this.#i.W())t.Af()}}*um(t){for(let s of this.#i.W())s.Q===t&&(yield s)}Td(t){return this.#i.m(t)}Od(t){this.#i.y(t.l,t)}fm(t){t.h.$s(document.Bn)&&(this.#k&&clearTimeout(this.#k),this.#k=setTimeout(()=>{this.y3(),this.#k=null},0)),this.#i.it(t.l),t.F&&this.#R?.it(t.F),this.Zi(t),t.F&&this.#p.ht(t.F)||this.#n?.x(t.l)}dm(t){this.#p.d(t.F),this.Am(t),t.lt=!0}Ld(t){return this.#p.ht(t)}B3(t){this.#p.it(t.F),this.wm(t),t.lt=!1}#it(t){let s=this.#r.m(t.Q);s?s.bf(t):(this.Od(t),this.Xe(t))}Xa(t){this.#s!==t&&(this.#s=t,t&&this.#W(t.wo))}get#wt(){let t=null;for(t of this.#$);return t}Ka(t){this.#wt===t&&this.#W(t.wo)}F3(t){this.#W(t.qa)}Id(t){this.#$.ht(t)?(this.#$.it(t),t.Zi(),this.#L({Ze:this.an})):(this.#$.d(t),t.po(),this.#W(t.wo),this.#L({Ze:!0}))}sr(t){this.Ya({jn:t.jn,pm:t.gc}),this.#l?.zs();for(let s of this.#$)s!==t&&s.Zi();this.#$.tt(),this.#$.d(t),t.po(),this.#W(t.wo),this.#L({Ze:!0})}ye(t){return this.#$.ht(t)}get gm(){return this.#$.W().yf().c}Zi(t){t.Zi(),this.#$.it(t),this.#L({Ze:this.an})}get an(){return this.#$.rt!==0}get ud(){return this.#$.rt===1&&this.gm.ud}vs(){this.#a.vs(),this.#L({eo:this.#a.eo(),ro:!0,ot:this.#Y()}),this.oo?.ii()}hd(){this.#a.hd(),this.#L({eo:!0,ro:this.#a.ro(),ot:this.#Y()})}ni(t){this.#a.d(t),this.#L({eo:!0,ro:!1,ot:this.#Y()})}Ud(t){this.#a.s3(t)}#Y(){if(this.#i.rt===0)return!0;if(this.#i.rt===1)for(let t of this.#i.W())return t.ot();return!1}it(){this.zs();let t=this.Lh?.Mf(!0);if(!this.an&&!t)return;let s=t?[t]:[...this.#$],i=()=>{for(let h of s)this.#it(h)};this.ni({Ci:()=>{this.oo?.Ws(i,s.t===1?s[0].ze:s.t);for(let h of s)h.x()},vs:i,ch:!0})}zs(){this.#s?.zs()}r3(){return this.#s||this.an}#ht(t){for(let s of this.#$)s.Zi();this.#$.tt();for(let s of t)s.ot()||(this.#$.d(s),s.po());this.#L({Ze:this.an})}o3(){for(let t of this.#$)t.ir();this.#ht(this.#i.W())}ao(){if(!(this.#s&&(this.#s.zs(),this.#N!==U.Is))&&!this.#l?.zs()&&this.an){for(let t of this.#$)t.Zi();this.#$.tt(),this.#L({Ze:!1})}}pe(t,s,i=!1){if(i||this.zs(),!this.an)return;this.#H[0]+=t,this.#H[1]+=s;let[h,n]=this.#H,e=[...this.#$];this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#H[0]=this.#H[1]=0,this.ni({Ci:()=>{for(let r of e)this.#i.ht(r.l)&&(r.$f(h,n),r.Dd())},vs:()=>{for(let r of e)this.#i.ht(r.l)&&(r.$f(-h,-n),r.Dd())},ch:!1})},1e3);for(let r of e)r.$f(t,s),r.Dd()}j3(){if(this.an){this.Ha(!0),this.#A=new Map;for(let t of this.#$)this.#A.y(t,{bc:t.A,yc:t.f,mm:t.Q,bm:0,ym:0,Mm:-1})}}S3(){if(!this.#A)return!1;this.Ha(!1);let t=this.#A;this.#A=null;let s=!1;for(let[{A:h,f:n,Q:e},r]of t)r.bm=h,r.ym=n,r.Mm=e,s||=h!==r.bc||n!==r.yc||e!==r.mm;if(!s)return!1;let i=(h,n,e,r)=>{if(this.#i.ht(h.l)){let o=this.#r.m(r);o?h.P3(o,n,e):(h.Q=r,h.A=n,h.f=e)}};return this.ni({Ci:()=>{for(let[h,{bm:n,ym:e,Mm:r}]of t)i(h,n,e,r)},vs:()=>{for(let[h,{bc:n,yc:e,mm:r}]of t)i(h,n,e,r)},ch:!0}),!0}G3(t,s){if(this.#A)for(let i of this.#A.Qr())i.H3(t,s)}Yi(t){if(t.a===null){let s=this.I3(t.Q);s?(s.kf(t),s.bf(t)):(this.Od(t),this.Xe(t),t.Yi())}else t.a.bf(t)}get T3(){return this.xf()?.Rd()||this.#$.rt===1&&this.gm.Rd()}CC(t){return this.#s===t}xf(){return this.#s}_a(){return this.#N}W3(){return this.#N!==U.Is}get Sn(){return D(this,"imageManager",new Ki)}om(t){if(!t)return null;let s=document.Qa();for(let a=0,l=s.$m;a<l;a++)if(!t.$s(s.km(a).TC))return null;let{A:i,f:h,i:n,n:e}=t.di(),r;switch(t.qr("data-main-rotation")){case"90":r=(a,l,u,f)=>({A:(l-h)/e,f:1-(a+u-i)/n,i:f/e,n:u/n});break;case"180":r=(a,l,u,f)=>({A:1-(a+u-i)/n,f:1-(l+f-h)/e,i:u/n,n:f/e});break;case"270":r=(a,l,u,f)=>({A:1-(l+f-h)/e,f:(a-i)/n,i:f/e,n:u/n});break;default:r=(a,l,u,f)=>({A:(a-i)/n,f:(l-h)/e,i:u/n,n:f/e})}let o=[];for(let a=0,l=s.$m;a<l;a++){let u=s.km(a);if(!u.OC)for(let{A:f,f:d,i:w,n:A}of u.LC())w!==0&&A!==0&&o.r(r(f,d,w,A))}return o.t===0?null:o}Am({F:t,l:s}){(this.#o||=new Map).y(t,s)}wm({F:t}){this.#o?.it(t)}Pn(t){let s=this.#o?.m(t.s.l);if(!s)return;let i=this.#n.cf(s);i&&(this.#N!==U.Is||i.Q3)&&i.Pn(t)}V3(t,s,i){let h=this.#R?.m(t);h&&(h.z3(s,i),this.#R.it(t))}J3(t,s){(this.#R||=new Map).y(t,s)}},zs=class c{#t=null;#s=!1;#h=null;#i=null;#r=null;#e=null;#n=!1;#o=null;#a=null;#c=null;#f=null;#l=!1;static#d=null;static tl=null;constructor(t){this.#a=t,this.#l=t.b.wc,c.#d||=Object.to({IC:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",P1:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",UC:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static lh(t){c.tl??=t}async P(){let t=this.#h=document.$("button");t.Gt="altText",t.xs="0";let s=this.#i=document.$("span");t.g(s),this.#l?(t.p.d("new"),t.e("data-l10n-id",c.#d.P1),s.e("data-l10n-id",c.#d["missing-label"])):(t.e("data-l10n-id","pdfjs-editor-alt-text-button"),s.e("data-l10n-id","pdfjs-editor-alt-text-button-label"));let i=this.#a.b.ls;t.o("contextmenu",ut,{w:i}),t.o("pointerdown",n=>n.Da(),{w:i});let h=n=>{n.Xs(),this.#a.b.md(this.#a),this.#l&&this.#a.Ih({Ns:"pdfjs.image.alt_text.image_status_label_clicked",s:{q3:this.#p}})};return t.o("click",h,{Ei:!0,w:i}),t.o("keydown",n=>{n.U===t&&n.Qs==="Enter"&&(this.#n=!0,h(n))},{w:i}),await this.#A(),t}get#p(){return(this.#t?"added":this.#t===null&&this.vf&&"review")||"missing"}xm(){this.#h&&(this.#h.gt({Bd:this.#n}),this.#n=!1)}ot(){return this.#l?this.#t===null:!this.#t&&!this.#s}Z3(){return this.#l?this.#t!==null||!!this.#c:this.ot()}get vf(){return this.#c}async Y3(t){this.#t===null&&(this.#c=t,this.#f=await c.tl.m("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{DC:t}),this.#A())}vm(t=!1){if(this.#l&&!this.#t){if(!this.#o){let s=this.#o=document.$("div");s.Gt="noAltTextBadge",this.#a.h.g(s)}this.#o.p.$t("hidden",!t)}else this.#o?.x(),this.#o=null}es(t){let s=this.#t;return t||this.#c!==s||(s=this.#f),{Mc:s,sl:this.#s,vf:this.#c,X3:this.#f}}get s(){return{Mc:this.#t,sl:this.#s}}set s({Mc:t,sl:s,vf:i,X3:h,kt:n=!1}){i&&(this.#c=i,this.#f=h),(this.#t!==t||this.#s!==s)&&(n||(this.#t=t,this.#s=s),this.#A())}$t(t=!1){this.#h&&(!t&&this.#e&&(clearTimeout(this.#e),this.#e=null),this.#h.$c=!t)}K1(){this.#a.Ih({Ns:"pdfjs.image.alt_text.image_status_label_displayed",s:{q3:this.#p}})}K(){this.#h?.x(),this.#h=null,this.#i=null,this.#r=null,this.#o?.x(),this.#o=null}async#A(){let t=this.#h;if(!t)return;if(this.#l){if(t.p.$t("done",!!this.#t),t.e("data-l10n-id",c.#d[this.#p]),this.#i?.e("data-l10n-id",c.#d[`${this.#p}-label`]),!this.#t){this.#r?.x();return}}else{if(!this.#t&&!this.#s){t.p.x("done"),this.#r?.x();return}t.p.d("done"),t.e("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let s=this.#r;if(!s){this.#r=s=document.$("span"),s.Gt="tooltip",s.e("role","tooltip"),s.l=`alt-text-tooltip-${this.#a.l}`;let h=100,n=this.#a.b.ls;n.o("abort",()=>{clearTimeout(this.#e),this.#e=null},{sf:!0}),t.o("mouseenter",()=>{this.#e=setTimeout(()=>{this.#e=null,this.#r.p.d("show"),this.#a.Ih({Ns:"alt_text_tooltip"})},h)},{w:n}),t.o("mouseleave",()=>{this.#e&&(clearTimeout(this.#e),this.#e=null),this.#r?.p.x("show")},{w:n})}this.#s?s.e("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(s.Jr("data-l10n-id"),s.St=this.#t),s.il||t.g(s),this.#a.K3()?.e("aria-describedby",s.l)}},Qt=class{#t=null;#s=null;#h=!1;#i=null;#r=null;#e=null;#n=null;#o=null;#a=!1;#c=null;constructor(t){this.#i=t}Lk(){let t=this.#s=document.$("button");return t.Gt="comment",this.#f(t,!1)}_3(){let t=this.#t=document.$("button");t.Gt="annotationCommentButton";let s=this.#i.Me;if(s){let{M:i}=t;i.Bg=`calc(${100*(this.#i.b.so==="ltr"?1-s[0]:s[0])}% - var(--comment-button-dim))`,i.Ni=`calc(${100*s[1]}% - var(--comment-button-dim))`;let h=this.#i.Nf;h&&(i.hr=h)}return this.#f(t,!0)}tx(){setTimeout(()=>{(this.#t??this.#s)?.gt()},0)}ln(){if(!this.#t)return;let t=this.#i.Nf;t&&(this.#t.M.hr=t),this.#i.b.Kg(this.#i)}get Fd(){return(this.#t?.di().i??0)/this.#i.a.Se.i}get Ef(){if(this.#c)return this.#c;if(!this.#t)return null;let{A:t,f:s,n:i}=this.#t.di(),{A:h,f:n,i:e,n:r}=this.#i.a.Se;return[(t-h)/e,(s+i-n)/r]}set Ef(t){this.#c=t}jd(){return this.#c===null}Sd(){this.#t?.x(),this.#t=null}Bk(){this.#s?.x(),this.#s=null}Pd({rh:t,sx:s}){this.#t&&(this.#t.p.$t("selected",t),this.#t.Gd=s)}#f(t,s){if(!this.#i.b.qu())return null;t.xs="0",t.Cf="dialog",s?(t.Hd="commentPopup",t.e("data-l10n-id","pdfjs-show-comment-button")):(t.RC=[this.#i.b.m3()],t.e("data-l10n-id","pdfjs-editor-add-comment-button"));let i=this.#i.b.ls;if(!(i instanceof AbortSignal)||i.Ra)return t;t.o("contextmenu",ut,{w:i}),s&&(t.o("focusin",n=>{this.#i.vh=!1,Y(n)},{Ei:!0,w:i}),t.o("focusout",n=>{this.#i.vh=!0,Y(n)},{Ei:!0,w:i})),t.o("pointerdown",n=>n.Da(),{w:i});let h=n=>{n.Xs(),t===this.#s?this.Nm():this.#i.ge(!0)};return t.o("click",h,{Ei:!0,w:i}),t.o("keydown",n=>{n.U===t&&n.Qs==="Enter"&&(this.#h=!0,h(n))},{w:i}),t.o("pointerenter",()=>{this.#i.ge(!1,!0)},{w:i}),t.o("pointerleave",()=>{this.#i.ge(!1,!1)},{w:i}),t}Nm(t){let s=this.Ef,i,h;if(s)[i,h]=s;else{[i,h]=this.#i.Me;let{i:l,n:u,A:f,f:d}=this.#i;i=f+i*l,h=d+h*u}let n=this.#i.a.Se,{A:e,f:r,i:o,n:a}=n;this.#i.b.Wa(this.#i,e+i*o,r+h*a,{...t,Es:n})}xm(){this.#s&&(this.#s.gt({Bd:this.#h}),this.#h=!1)}Tf(){return this.#a||this.#n===""}ot(){return this.#n===null}ix(){return this.Tf()||this.#n!==this.#r}es(){return this.s}get s(){return{zi:this.#n,rs:this.#e,hl:this.#o,lt:this.Tf()}}set s(t){t!==this.#n&&(this.#e=null),t!==null?(this.#n=t,this.#o=new Date,this.#a=!1):(this.#n="",this.#a=!0)}hx(t,s=null){this.#r=t,this.s=t,this.#o=null,this.#e=s}K1(){}K(){this.#s?.x(),this.#s=null,this.#t?.x(),this.#t=null,this.#n="",this.#e=null,this.#o=null,this.#i=null,this.#h=!1,this.#a=!1}},Js=class c{#t;#s=!1;#h=null;#i;#r;#e;#n;#o=null;#a;#c=null;#f;#l=null;constructor({k:t,nx:s=null,BC:i=null,ex:h=null,rx:n=null,ox:e=null,w:r}){this.#t=t,this.#h=i,this.#i=s,this.#r=h,this.#e=n,this.#n=e,this.#f=new AbortController,this.#a=AbortSignal.fd([r,this.#f.w]),t.o("touchstart",this.#d.N(this),{go:!1,w:this.#a})}get cx(){return 35/kt.lc}#d(t){if(this.#i?.())return;if(t.nl.t===1){if(this.#o)return;let h=this.#o=new AbortController,n=AbortSignal.fd([this.#a,h.w]),e=this.#t,r={Ei:!0,w:n,go:!1},o=a=>{a.el==="touch"&&(this.#o?.Ut(),this.#o=null)};e.o("pointerdown",a=>{a.el==="touch"&&(Y(a),o(a))},r),e.o("pointerup",o,r),e.o("pointercancel",o,r);return}if(!this.#l){this.#l=new AbortController;let h=AbortSignal.fd([this.#a,this.#l.w]),n=this.#t,e={w:h,Ei:!1,go:!1};n.o("touchmove",this.#p.N(this),e);let r=this.#A.N(this);n.o("touchend",r,e),n.o("touchcancel",r,e),e.Ei=!0,n.o("pointerdown",Y,e),n.o("pointermove",Y,e),n.o("pointercancel",Y,e),n.o("pointerup",Y,e),this.#r?.()}if(Y(t),t.nl.t!==2||this.#h?.()){this.#c=null;return}let[s,i]=t.nl;s.Wd>i.Wd&&([s,i]=[i,s]),this.#c={Em:s.rl,Cm:s.ol,Tm:i.rl,Om:i.ol}}#p(t){if(!this.#c||t.nl.t!==2)return;Y(t);let[s,i]=t.nl;s.Wd>i.Wd&&([s,i]=[i,s]);let{rl:h,ol:n}=s,{rl:e,ol:r}=i,o=this.#c,{Em:a,Cm:l,Tm:u,Om:f}=o,d=u-a,w=f-l,A=e-h,g=r-n,p=Math.ei(A,g)||1,m=Math.ei(d,w)||1;if(!this.#s&&Math.H(m-p)<=c.cx)return;if(o.Em=h,o.Cm=n,o.Tm=e,o.Om=r,!this.#s){this.#s=!0;return}let b=[(h+e)/2,(n+r)/2];this.#e?.(b,m,p)}#A(t){t.nl.t>=2||(this.#l&&(this.#l.Ut(),this.#l=null,this.#n?.()),this.#c&&(Y(t),this.#c=null,this.#s=!1))}K(){this.#f?.Ut(),this.#f=null,this.#o?.Ut(),this.#o=null}},W=class c{#t=null;#s=null;#h=null;#i=null;#r=null;#e=!1;#n=null;#o="";#a=null;#c=null;#f=null;#l=null;#d=null;#p="";#A=!1;#u=null;#w=!1;#g=!1;#b=!1;#m=null;#v=0;#k=0;#M=null;#E=null;ye=!1;Gn=!1;js=null;cl=Object.X(null);Uh=null;al=!0;b=null;vh=!0;static tl=null;static Qd=null;#y=!1;#x=c.ax++;static Vd=-1;static ll=new th;static ax=1;static lx=1e3;static get ux(){let t=c.prototype.fx,s=Rt.cd,i=Rt.ad;return D(this,"_resizerKeyboardManager",new Dt([[["ArrowLeft","mac+ArrowLeft"],t,{Ht:[-s,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{Ht:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{Ht:[s,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{Ht:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{Ht:[0,-s]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{Ht:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{Ht:[0,s]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{Ht:[0,i]}],[["Escape","mac+Escape"],c.prototype.dx]]))}constructor(t){this.a=t.a,this.l=t.l,this.i=this.n=null,this.Q=t.a.Q,this.R=t.R,this.h=null,this.b=t.Ao,this.F=null,this.zd=!1,this.cl.ul=t.ul,this.Lm=null,this.F=t.F||null,this.Ks=t.Ks||new Date,this.ms=t.ms||null,this.Im=!0;let{C:s,Ji:{Ds:i,Rs:h,Zr:n,Yr:e}}=this.a.ct;this.C=s,this.Ax=(360+s-this.b.Ye.C)%360,this.Cs=[i,h],this.kc=[n,e];let[r,o]=this.Es;this.A=t.A/r,this.f=t.f/o,this.Ti=!1,this.lt=!1}get ze(){return Object.fl(this).constructor.un}get jn(){return Object.fl(this).constructor.be}static get Of(){return!1}static get dl(){return D(this,"_defaultLineColor",this.ll.e3("CanvasText"))}static wx(t){let s=new sh({l:t.a.Lf(),a:t.a,Ao:t.b});s.F=t.F,s.lt=!0,s.b.Xe(s)}static lh(t,s){if(c.tl??=t,c.Qd||=Object.to({FC:"pdfjs-editor-resizer-top-left",jC:"pdfjs-editor-resizer-top-middle",SC:"pdfjs-editor-resizer-top-right",PC:"pdfjs-editor-resizer-middle-right",GC:"pdfjs-editor-resizer-bottom-right",HC:"pdfjs-editor-resizer-bottom-middle",WC:"pdfjs-editor-resizer-bottom-left",QC:"pdfjs-editor-resizer-middle-left"}),c.Vd!==-1)return;let i=getComputedStyle(document.Um);c.Vd=parseFloat(i.Dm("--outline-width"))||0}static gf(t,s){}static get qa(){return[]}static lf(t){return!1}static Ja(t,s){G("Not implemented")}get wo(){return[]}get Dh(){return this.#y}set Dh(t){this.#y=t,this.h?.p.$t("draggable",t)}get gc(){return this.F||this.l}get ud(){return!0}Jd(){let[t,s]=this.Cs;switch(this.$e){case 90:this.A-=this.n*s/(2*t),this.f+=this.i*t/(2*s);break;case 180:this.A+=this.i/2,this.f+=this.n/2;break;case 270:this.A+=this.n*s/(2*t),this.f-=this.i*t/(2*s);break;default:this.A-=this.i/2,this.f-=this.n/2}this.Xi()}ni(t){this.b.ni(t)}get Lh(){return this.b.Lh}VC(){this.h.M.Rh=0}px(){this.h.M.Rh=this.#x}mo(t){t!==null?(this.Q=t.Q,this.Cs=t.Cs):(this.#B(),this.#l?.x(),this.#l=null),this.a=t}qd(t){this.vh&&(this.#A?this.#A=!1:this.a.sr(this))}gx(t){if(!this.vh||!this.Ti)return;t.If?.Md(`#${this.l}`)||(t.Xs(),this.a?.zC||this.zs())}zs(){this.ot()?this.x():this.ir()}ir(){this.Al()&&this.Xe()}Xe(){this.b.Xe(this)}Rm(t,s,i,h){let[n,e]=this.Es;[i,h]=this.Uf(i,h),this.A=(t+i)/n,this.f=(s+h)/e,this.Xi()}Df(t,s){let[i,h]=this.Es;this.Rm(t*i,s*h,this.i*i,this.n*h),this.Rf()}#O([t,s],i,h){[i,h]=this.Uf(i,h),this.A+=i/t,this.f+=h/s,this.Zd(this.A,this.f),this.Xi()}Js(t,s){this.#O(this.Es,t,s)}$f(t,s){this.#u||=[this.A,this.f,this.i,this.n],this.#O(this.Cs,t,s),this.h.mx({bx:"nearest"})}Dd(){this.Rf(this.A,this.f)}H3(t,s){this.#u||=[this.A,this.f,this.i,this.n];let{h:i,Es:[h,n]}=this;if(this.A+=t/h,this.f+=s/n,this.a&&(this.A<0||this.A>1||this.f<0||this.f>1)){let{A:u,f}=this.h.di();this.a.yx(this,u,f)&&(this.A-=Math.It(this.A),this.f-=Math.It(this.f))}let{A:e,f:r}=this,[o,a]=this.Bf();e+=o,r+=a;let{M:l}=i;l.fn=`${(100*e).uh(2)}%`,l.Ni=`${(100*r).uh(2)}%`,this.Zd(e,r),i.mx({bx:"nearest"})}Zd(t,s){}Rf(t,s){}get Ff(){return!!this.#u&&(this.#u[0]!==this.A||this.#u[1]!==this.f)}get Yd(){return!!this.#u&&(this.#u[2]!==this.i||this.#u[3]!==this.n)}Bf(){let[t,s]=this.Es,{Vd:i}=c,h=i/t,n=i/s;switch(this.C){case 90:return[-h,n];case 180:return[h,n];case 270:return[h,-n];default:return[-h,-n]}}get Bm(){return!0}Xi(t=this.C){let{h:{M:s},Cs:[i,h]}=this,{A:n,f:e,i:r,n:o}=this;if(r*=i,o*=h,n*=i,e*=h,this.Bm)switch(t){case 0:n=et(n,0,i-r),e=et(e,0,h-o);break;case 90:n=et(n,0,i-o),e=et(e,r,h);break;case 180:n=et(n,r,i),e=et(e,o,h);break;case 270:n=et(n,o,i),e=et(e,0,h-r)}this.A=n/=i,this.f=e/=h;let[a,l]=this.Bf();n+=a,e+=l,s.fn=`${(100*n).uh(2)}%`,s.Ni=`${(100*e).uh(2)}%`,this.Mx()}static#C(t,s,i){switch(i){case 90:return[s,-t];case 180:return[-t,-s];case 270:return[-s,t];default:return[t,s]}}Uf(t,s){return c.#C(t,s,this.$e)}$x(t,s){return c.#C(t,s,360-this.$e)}#T(t){switch(t){case 90:{let[s,i]=this.Cs;return[0,-s/i,i/s,0]}case 180:return[-1,0,0,-1];case 270:{let[s,i]=this.Cs;return[0,s/i,-i/s,0]}default:return[1,0,0,1]}}get wl(){return this.b.Ye._u}get $e(){return(this.b.Ye.C+this.Ax)%360}get Es(){let{wl:t,Cs:[s,i]}=this;return[s*t,i*t]}ke(){let{h:{M:t},i:s,n:i}=this;t.i=`${(100*s).uh(2)}%`,t.n=`${(100*i).uh(2)}%`}Xd(){return[0,0]}#F(){if(this.#a)return;this.#a=document.$("div"),this.#a.p.d("resizers");let t=this.zd?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],s=this.b.ls;for(let i of t){let h=document.$("div");this.#a.g(h),h.p.d("resizer",i),h.e("data-resizer-name",i),h.o("pointerdown",this.#I.N(this,i),{w:s}),h.o("contextmenu",ut,{w:s}),h.xs=-1}this.h.Fm(this.#a)}#I(t,s){s.Xs();let{ue:i}=tt.Hi;if(s.za!==0||s.we&&i)return;this.#h?.$t(!1);let h=this.Dh;this.Dh=!1,this.#c=[s.rl,s.ol];let n=new AbortController,e=this.b.hi(n);this.a.Bh(!1),window.o("pointermove",this.#R.N(this,t),{go:!0,Ei:!0,w:e}),window.o("touchmove",Y,{go:!1,w:e}),window.o("contextmenu",ut,{w:e}),this.#f={bc:this.A,yc:this.f,Kd:this.i,_d:this.n};let r=this.a.h.M.bo,o=this.h.M.bo;this.h.M.bo=this.a.h.M.bo=window.Dg(s.U).bo;let a=()=>{n.Ut(),this.a.Bh(!0),this.#h?.$t(!0),this.Dh=h,this.a.h.M.bo=r,this.h.M.bo=o,this.#j()};window.o("pointerup",a,{w:e}),window.o("blur",a,{w:e})}#D(t,s,i,h){this.i=i,this.n=h,this.A=t,this.f=s,this.ke(),this.Xi(),this.pl()}pl(){}#j(){if(!this.#f)return;let{bc:t,yc:s,Kd:i,_d:h}=this.#f;this.#f=null;let n=this.A,e=this.f,r=this.i,o=this.n;n===t&&e===s&&r===i&&o===h||this.ni({Ci:this.#D.N(this,n,e,r,o),vs:this.#D.N(this,t,s,i,h),ch:!0})}static Hn(t){return Math.At(1e4*t)/1e4}#R(t,s){let[i,h]=this.Es,n=this.A,e=this.f,r=this.i,o=this.n,a=c.jf/i,l=c.jf/h,u=this.#T(this.C),f=(O,L)=>[u[0]*O+u[2]*L,u[1]*O+u[3]*L],d=this.#T(360-this.C),w,A,g=!1,p=!1;switch(t){case"topLeft":g=!0,w=(O,L)=>[0,0],A=(O,L)=>[O,L];break;case"topMiddle":w=(O,L)=>[O/2,0],A=(O,L)=>[O/2,L];break;case"topRight":g=!0,w=(O,L)=>[O,0],A=(O,L)=>[0,L];break;case"middleRight":p=!0,w=(O,L)=>[O,L/2],A=(O,L)=>[0,L/2];break;case"bottomRight":g=!0,w=(O,L)=>[O,L],A=(O,L)=>[0,0];break;case"bottomMiddle":w=(O,L)=>[O/2,L],A=(O,L)=>[O/2,0];break;case"bottomLeft":g=!0,w=(O,L)=>[0,L],A=(O,L)=>[O,0];break;case"middleLeft":p=!0,w=(O,L)=>[0,L/2],A=(O,L)=>[O,L/2]}let m=w(r,o),b=A(r,o),y=f(...b),M=c.Hn(n+y[0]),$=c.Hn(e+y[1]),k,x,v=1,T=1;if(s.kx)({xx:k,vx:x}=s);else{let{rl:O,ol:L}=s,[ft,dt]=this.#c;[k,x]=this.Uf(O-ft,L-dt),this.#c[0]=O,this.#c[1]=L}[k,x]=(C=k/i,F=x/h,[d[0]*C+d[2]*F,d[1]*C+d[3]*F]);var C,F;if(g){let O=Math.ei(r,o);v=T=Math.B(Math.D(Math.ei(b[0]-m[0]-k,b[1]-m[1]-x)/O,1/r,1/o),a/r,l/o)}else p?v=et(Math.H(b[0]-m[0]-k),a,1)/r:T=et(Math.H(b[1]-m[1]-x),l,1)/o;let j=c.Hn(r*v),P=c.Hn(o*T);y=f(...A(j,P));let _=M-y[0],S=$-y[1];this.#u||=[this.A,this.f,this.i,this.n],this.i=j,this.n=P,this.A=_,this.f=S,this.ke(),this.Xi(),this.tA()}tA(){}jm(){this.#h?.xm()}get nr(){return null}async Sf(){if(this.js||this.#g)return this.js;this.js=new Zi(this),this.h.g(this.js.P());let{nr:t}=this;if(t)for(let[s,i]of t)await this.js._1(s,i);return this.tr||this.js._1("comment",this.Sm()),this.js._1("delete"),this.js}Nx(){this.js?.Fk("comment",this.Sm(),".deleteButton")}Ex(){this.js?.Rk("comment")}Cx(){this.js?.x(),this.js=null,this.#h?.K()}Tx(t){let s=this.js?.h;s?s.Pf(t):this.h.g(t)}Ox(){return this.h.di()}Pm(){return this.#h||(zs.lh(c.tl),this.#h=new zs(this),this.#t&&(this.#h.s=this.#t,this.#t=null)),this.#h}get Gf(){return this.#h?.s}set Gf(t){this.#h&&(this.#h.s=t)}get JC(){return this.#h?.vf}async Lx(t){await this.#h?.Y3(t)}Gm(t){return this.#h?.es(t)}sA(){return!!this.#h&&!this.#h.ot()}Hm(){return this.#h?.Z3()??!1}Ix(){this.#i?.tx()}Sm(){return this.Im?this.#i||=new Qt(this):null}vd(){this.b.qu()&&(this.#r?this.b.W3()&&this.#r.p.x("hidden"):this.tr&&(this.#r=this.#i._3(),this.h.g(this.#r)))}Sd(){this.#i.Sd(),this.#r=null}R3(){this.#r?.p.d("hidden")}get Yt(){let{s:{rs:t,zi:s,hl:i,lt:h}}=this.#i;return{zi:s,rs:t,hl:i,lt:h,L:this.Ga(),Jt:this.Jt??1}}set Yt(t){this.#i||=new Qt(this),this.#i.s=t,this.tr?(this.Ex(),this.vd(),this.b.Xg(this)):(this.Nx(),this.Sd(),this.b.g3(this))}Hf({Yt:t,pt:s,rs:i}){if(!s||(this.#i||=new Qt(this),this.#i.hx(t,i),!this.F))return;let h=this.b.k3(this.F);h&&this.Wm(h)}get er(){return this.#i?.ix()}get qC(){return this.#i?.Tf()}get tr(){return!!this.#i&&!this.#i.ot()&&!this.#i.Tf()}async Wa(t){this.#i||=new Qt(this),this.#i.Nm(t)}ge(t,s=void 0){this.tr&&this.b.ge(this,t,s)}Ux(t){this.#i.ZC(t)}Je(t){if(this.er){let[,,,h]=t.E,[n]=this.Cs,[e]=this.kc,r=e+n+1,o=h-100,a=r+180;t.xt={iA:this.Yt.zi,lt:this.Yt.lt,E:[r,o,a,h]}}}Wm({xt:{iA:t,lt:s}}){this.#i.s=s?null:t}get hA(){return this.a.Se}P(){let t=this.h=document.$("div");t.e("data-editor-rotation",(360-this.C)%360),t.Gt=this.R,t.e("id",this.l),t.xs=this.#e?-1:0,t.e("role","application"),this.gl&&t.e("data-l10n-id",this.gl),this.al||t.p.d("hidden"),this.px(),this.#G();let[s,i]=this.Es;this.$e%180!=0&&(t.M.YC=`${(100*i/s).uh(2)}%`,t.M.XC=`${(100*s/i).uh(2)}%`);let[h,n]=this.Xd();return this.Js(h,n),Ae(this,t,["keydown","pointerdown","dblclick"]),this.xc&&this.b.f3&&(this.#E||=new Js({k:t,nx:()=>!this.ye,ex:this.#Q.N(this),rx:this.#N.N(this),ox:this.#$.N(this),w:this.b.ls})),this.vd(),this.b.oo?.ii(),t}#Q(){this.#f={bc:this.A,yc:this.f,Kd:this.i,_d:this.n},this.#h?.$t(!1),this.a.Bh(!1)}#N(t,s,i){let h=i/s*.7+1-.7;if(h===1)return;let n=this.#T(this.C),e=(M,$)=>[n[0]*M+n[2]*$,n[1]*M+n[3]*$],[r,o]=this.Es,a=this.A,l=this.f,u=this.i,f=this.n,d=c.jf/r,w=c.jf/o;h=Math.B(Math.D(h,1/u,1/f),d/u,w/f);let A=c.Hn(u*h),g=c.Hn(f*h);if(A===u&&g===f)return;this.#u||=[a,l,u,f];let p=e(u/2,f/2),m=c.Hn(a+p[0]),b=c.Hn(l+p[1]),y=e(A/2,g/2);this.A=m-y[0],this.f=b-y[1],this.i=A,this.n=g,this.ke(),this.Xi(),this.tA()}#$(){this.#h?.$t(!0),this.a.Bh(!0),this.#j()}Qm(t){let{ue:s}=tt.Hi;t.za!==0||t.we&&s?t.Xs():(this.#A=!0,this.Dh?this.#S(t):this.#U(t))}#U(t){let{ue:s}=tt.Hi;t.we&&!s||t.rd||t.Yu&&s?this.a.Id(this):this.a.sr(this)}#S(t){let{ye:s}=this;this.b.j3();let i=!1,h=new AbortController,n=this.b.hi(h),e={Ei:!0,go:!1,w:n},r=a=>{h.Ut(),this.#n=null,this.#A=!1,this.b.S3()||this.#U(a),i&&this.Vm()};s&&(this.#v=t.L1,this.#k=t.I1,this.#n=t.yo,this.#o=t.el,window.o("pointermove",a=>{i||(i=!0,this.b.ge(this,!0,!1),this.zm());let{L1:l,I1:u,yo:f}=a;if(f!==this.#n){Y(a);return}let[d,w]=this.Uf(l-this.#v,u-this.#k);this.#v=l,this.#k=u,this.b.G3(d,w)},e),window.o("touchmove",Y,e),window.o("pointerdown",a=>{a.el===this.#o&&(this.#E||a.KC)&&r(a),Y(a)},e));let o=a=>{this.#n&&this.#n!==a.yo?Y(a):r(a)};window.o("pointerup",o,{w:n}),window.o("blur",o,{w:n})}zm(){}Vm(){}Mx(){this.#m&&clearTimeout(this.#m),this.#m=setTimeout(()=>{this.#m=null,this.a?.Dx(this)},0)}P3(t,s,i){t.kf(this),this.A=s,this.f=i,this.Xi(),this.Rf()}Wf(t,s,i=this.C){let h=this.wl,[n,e]=this.Cs,[r,o]=this.kc,a=t/h,l=s/h,u=this.A*n,f=this.f*e,d=this.i*n,w=this.n*e;switch(i){case 0:return[u+a+r,e-f-l-w+o,u+a+d+r,e-f-l+o];case 90:return[u+l+r,e-f+a+o,u+l+w+r,e-f+a+d+o];case 180:return[u-a-d+r,e-f+l+o,u-a+r,e-f+l+w+o];case 270:return[u-l-w+r,e-f-a-d+o,u-l+r,e-f-a+o];default:throw new Error("Invalid rotation")}}Rx(t,s){let[i,h,n,e]=t,r=n-i,o=e-h;switch(this.C){case 0:return[i,s-e,r,o];case 90:return[i,s-h,o,r];case 180:return[n,s-h,r,o];case 270:return[n,s-e,o,r];default:throw new Error("Invalid rotation")}}Wn(){return this.Wf(0,0)}Ga(){return this.L&&c.ll.Ku(this.b.Ga(this.L))}ln(){this.#i?.ln()}Th(){let{Yt:{zi:t,L:s,hl:i,Jt:h,lt:n,rs:e},gc:r,Q:o,Ks:a,ms:l}=this;return{l:r,Q:o,E:this.Wn(),rs:e,Ai:{Pt:t},Ks:a,ms:i||l,pt:!n,L:s,Jt:h}}ml(t){}ot(){return!1}bl(){return this.Al()?!1:(this.a.me(!1),this.#g=!0,!0)}Qf(){return this.Al()?(this.a.me(!0),this.#g=!1,!0):!1}Al(){return this.#g}Rd(){return this.#b}Bx(){return this.h&&!this.Ti}get Fx(){let{Ni:t,fn:s,jx:i,_C:h}=this.Ox(),{Jm:n,Sx:e}=window;return s<e&&h>0&&t<n&&i>0}#G(){if(this.#d||!this.h)return;this.#d=new AbortController;let t=this.b.hi(this.#d);this.h.o("focusin",this.qd.N(this),{w:t}),this.h.o("focusout",this.gx.N(this),{w:t})}Yi(){this.#G()}Oi(t){}tT(){}yl(){return{l:this.F,lt:!0,Q:this.Q,pt:this.Uh?.pt||""}}es(t=!1,s=null){return{Qn:this.jn,Q:this.Q,E:this.Wn(),C:this.C,sT:this.Lm,pt:this.Uh?.pt||""}}static async Fs(t,s,i){let h=new this.prototype.constructor({a:s,l:s.Lf(),Ao:i,F:t.F,Ks:t.Ks,ms:t.ms});h.C=t.C,h.#t=t.Vn,h.Gn=t.Vf||!1;let[n,e]=h.Cs,[r,o,a,l]=h.Rx(t.E,e);return h.A=r/n,h.f=o/e,h.i=a/n,h.n=l/e,h}get Q3(){return!!this.F&&(this.lt||this.es()!==null)}x(){if(this.#d?.Ut(),this.#d=null,this.ot()||this.ir(),this.a?this.a.x(this):this.b.fm(this),this.qm(),this.#m&&(clearTimeout(this.#m),this.#m=null),this.#B(),this.Cx(),this.#M){for(let t of this.#M.W())clearTimeout(t);this.#M=null}this.a=null,this.#E?.K(),this.#E=null,this.#l?.x(),this.#l=null}get xc(){return!1}Px(){this.xc&&(this.#F(),this.#a.p.x("hidden"))}get Rg(){return null}get Me(){return this.b.so==="ltr"?[1,0]:[0,0]}get Zm(){let{Me:[t,s]}=this,[i,h,n,e]=this.Wn();return[c.Hn(i+(n-i)*t),c.Hn(h+(e-h)*(1-s))]}get Nf(){return this.b.bd(this.Ga(),this.Jt)}get nA(){return this.#i.Ef}set nA(t){this.#i.Ef=t}jd(){return this.#i.jd()}get Fd(){return this.#i.Fd}get Gx(){return this.h}Pd(t){this.#i?.Pd(t)}kd(t){if(!this.xc||t.U!==this.h||t.Qs!=="Enter")return;this.b.sr(this),this.#f={bc:this.A,yc:this.f,Kd:this.i,_d:this.n};let s=this.#a.yh;if(!this.#s){this.#s=Array.xi(s);let e=this.#J.N(this),r=this.#z.N(this),o=this.b.ls;for(let a of this.#s){let l=a.qr("data-resizer-name");a.e("role","spinbutton"),a.o("keydown",e,{w:o}),a.o("blur",r,{w:o}),a.o("focus",this.#q.N(this,l),{w:o}),a.e("data-l10n-id",c.Qd[l])}}let i=this.#s[0],h=0;for(let e of s){if(e===i)break;h++}let n=(360-this.C+this.$e)%360/90*(this.#s.t/4);if(n!==h){if(n<h)for(let r=0;r<h-n;r++)this.#a.g(this.#a.on);else if(n>h)for(let r=0;r<n-h;r++)this.#a.on.Pf(this.#a.Ym);let e=0;for(let r of s){let o=this.#s[e++].qr("data-resizer-name");r.e("data-l10n-id",c.Qd[o])}}this.#H(0),this.#b=!0,this.#a.on.gt({Bd:!0}),t.Xs(),t.iT()}#J(t){c.ux.rn(this,t)}#z(t){this.#b&&t.If?.il!==this.#a&&this.#B()}#q(t){this.#p=this.#b?t:""}#H(t){if(this.#s)for(let s of this.#s)s.xs=t}fx(t,s){this.#b&&this.#R(this.#p,{xx:t,vx:s,kx:!0})}#B(){this.#b=!1,this.#H(-1),this.#j()}dx(){this.#B(),this.h.gt()}po(){this.ye&&this.js?this.js.Ws():(this.ye=!0,this.Px(),this.h?.p.d("selectedEditor"),this.js?(this.js?.Ws(),this.#h?.vm(!1)):this.Sf().wt(()=>{this.h?.p.$s("selectedEditor")&&this.js?.Ws()}))}gt(){this.h&&!this.h.$s(document.Bn)&&setTimeout(()=>this.h?.gt({Ml:!0}),0)}Zi(){this.ye&&(this.ye=!1,this.#a?.p.d("hidden"),this.h?.p.x("selectedEditor"),this.h?.$s(document.Bn)&&this.b.Lh.h.gt({Ml:!0}),this.js?.ii(),this.#h?.vm(!0),this.qm())}qm(){this.tr&&this.b.ge(null)}lo(t,s){}rr(){}xe(){}get Xm(){return!1}pf(){this.Xm&&(this.bl(),this.h.gt())}Hx(t){t.U.$l!=="BUTTON"&&(this.pf(),this.a.Ya({jn:this.constructor.be,pm:this.gc}))}K3(){return this.h}get zf(){return this.h}get Rn(){return this.#w}set Rn(t){this.#w=t,this.a&&(t?(this.a.sr(this),this.a.Xa(this)):this.a.Xa(null))}static get jf(){return 16}static Za(){return!0}get Km(){return{Ns:"added"}}get Jf(){return null}Ih(t,s=!1){if(s){this.#M||=new Map;let{Ns:i}=t,h=this.#M.m(i);h&&clearTimeout(h),h=setTimeout(()=>{this.Ih(t),this.#M.it(i),this.#M.rt===0&&(this.#M=null)},c.lx),this.#M.y(i,h);return}t.j||=this.ze,this.b.Ch.Vs("reporttelemetry",{ns:this,va:{j:"editing",s:t}})}Ws(t=this.al){this.h.p.$t("hidden",!t),this.al=t}df(){this.h&&(this.h.xs=0),this.#e=!1}Af(){this.h&&(this.h.xs=-1),this.#e=!0}Wx(t){this.#l||this.lt?this.lt?(this.#l.x(),this.#l=null):(this.er||this.Ff||this.Yd)&&this.#l.dn({E:this.Wn(),xt:this.Yt}):this.#l=t.Qx(this)}Pn(t){if(this.lt)return t.ii(),null;let s=t.k.Ju(".annotationContent");if(s){if(s.$l==="CANVAS"){let i=s;s=document.$("div"),s.p.d("annotationContent",this.ze),i.Pf(s)}}else s=document.$("div"),s.p.d("annotationContent",this.ze),t.k.Fm(s);return s}eA(t){let{on:s}=t.k;s?.$l==="DIV"&&s.p.$s("annotationContent")&&s.x()}},sh=class extends W{constructor(t){super(t),this.F=t.F,this.lt=!0}es(){return this.yl()}},Hn=3285377520,lt=4294901760,Nt=65535,qs=class{constructor(t){this.rA=t?4294967295&t:Hn,this.oA=t?4294967295&t:Hn}Ae(t){let s,i;if(typeof t=="string"){s=new Uint8Array(2*t.t),i=0;for(let A=0,g=t.t;A<g;A++){let p=t.Na(A);p<=255?s[i++]=p:(s[i++]=p>>>8,s[i++]=255&p)}}else{if(!ArrayBuffer._m(t))throw new Error("Invalid data format, must be a string or TypedArray.");s=t.z(),i=s.Ts}let h=i>>2,n=i-4*h,e=new Uint32Array(s._,0,h),r=0,o=0,a=this.rA,l=this.oA,u=3432918353,f=461845907,d=11601,w=13715;for(let A=0;A<h;A++)1&A?(r=e[A],r=r*u&lt|r*d&Nt,r=r<<15|r>>>17,r=r*f&lt|r*w&Nt,a^=r,a=a<<13|a>>>19,a=5*a+3864292196):(o=e[A],o=o*u&lt|o*d&Nt,o=o<<15|o>>>17,o=o*f&lt|o*w&Nt,l^=o,l=l<<13|l>>>19,l=5*l+3864292196);switch(r=0,n){case 3:r^=s[4*h+2]<<16;case 2:r^=s[4*h+1]<<8;case 1:r^=s[4*h],r=r*u&lt|r*d&Nt,r=r<<15|r>>>17,r=r*f&lt|r*w&Nt,1&h?a^=r:l^=r}this.rA=a,this.oA=l}t2(){let t=this.rA,s=this.oA;return t^=s>>>1,t=3981806797*t&lt|36045*t&Nt,s=4283543511*s&lt|(2950163797*(s<<16|t>>>16)&lt)>>>16,t^=s>>>1,t=444984403*t&lt|60499*t&Nt,s=3301882366*s&lt|(3120437893*(s<<16|t>>>16)&lt)>>>16,t^=s>>>1,(t>>>0).fe(16).Ea(8,"0")+(s>>>0).fe(16).Ea(8,"0")}},ih=Object.to({bt:null,On:"",Mo:void 0}),ws=class{#t=!1;#s=null;#h=null;#i=new Map;constructor(){this.s2=null,this.i2=null,this.qf=null}rc(t,s){let i=this.#i.m(t);return i===void 0?s:Object.$h(s,i)}cf(t){return this.#i.m(t)}x(t){let s=this.#i.m(t);if(s!==void 0&&(s instanceof W&&this.#h.it(s.F),this.#i.it(t),this.#i.rt===0&&this.cA(),typeof this.qf=="function")){for(let i of this.#i.W())if(i instanceof W)return;this.qf(null)}}ft(t,s){let i=this.#i.m(t),h=!1;if(i!==void 0)for(let[n,e]of Object.en(s))i[n]!==e&&(h=!0,i[n]=e);else h=!0,this.#i.y(t,s);h&&this.#r(),s instanceof W&&((this.#h||=new Map).y(s.F,s),typeof this.qf=="function"&&this.qf(s.constructor.un))}ht(t){return this.#i.ht(t)}get rt(){return this.#i.rt}#r(){this.#t||(this.#t=!0,typeof this.s2=="function"&&this.s2())}cA(){this.#t&&(this.#t=!1,typeof this.i2=="function"&&this.i2())}get Zf(){return new Zs(this)}get Yf(){if(this.#i.rt===0)return ih;let t=new Map,s=new qs,i=[],h=Object.X(null),n=!1;for(let[e,r]of this.#i){let o=r instanceof W?r.es(!1,h):r;o&&(t.y(e,o),s.Ae(`${e}:${JSON.Ke(o)}`),n||=!!o.Ot)}if(n)for(let e of t.W())e.Ot&&i.r(e.Ot);return t.rt>0?{bt:t,On:s.t2(),Mo:i}:ih}get hT(){let t=null,s=new Map,i=0,h=0;for(let n of this.#i.W()){if(!(n instanceof W)){n.xt&&(n.xt.lt?h+=1:i+=1);continue}n.nT?h+=1:n.er&&(i+=1);let e=n.Jf;if(!e)continue;let{j:r}=e;s.ht(r)||s.y(r,Object.fl(n).constructor),t||=Object.X(null);let o=t[r]||=new Map;for(let[a,l]of Object.en(e)){if(a==="type")continue;let u=o.m(a);u||(u=new Map,o.y(a,u));let f=u.m(l)??0;u.y(l,f+1)}}if((h>0||i>0)&&(t||=Object.X(null),t.eT={lt:h,rT:i}),!t)return null;for(let[n,e]of s)t[n]=e.aA(t[n]);return t}oT(){this.#s=null}Vx(t,s){let i=this.#h?.m(t);return i?(i.Wm(s),!0):!1}Td(t){return this.#h?.m(t)||null}get kl(){if(this.#s)return this.#s;let t=[];if(this.#h)for(let s of this.#h.W())s.es()&&t.r(s.F);return this.#s={$o:new Set(t),On:t.et(",")}}[Symbol.lA](){return this.#i.en()}},Zs=class extends ws{#t;constructor(t){super();let{bt:s,On:i,Mo:h}=t.Yf,n=structuredClone(s,h?{Mo:h}:null);this.#t={bt:n,On:i,Mo:h}}get Zf(){G("Should not call PrintAnnotationStorage.print")}get Yf(){return this.#t}get kl(){return D(this,"modifiedIds",{$o:new Set,On:""})}},hh=class{#t=new Set;constructor({or:t=globalThis.uA,An:s=null}){this.Fh=t,this.Xf=new Set,this.An=null,this.zx=[],this.Jx=0}h2(t){this.Xf.d(t),this.Fh.fA.d(t)}qx(t){this.Xf.it(t),this.Fh.fA.it(t)}dA(t){this.An||(this.An=this.Fh.$("style"),this.Fh.Um.cT("head")[0].g(this.An));let s=this.An.aT;s.dA(t,s.lT.t)}tt(){for(let t of this.Xf)this.Fh.fA.it(t);this.Xf.tt(),this.#t.tt(),this.An&&(this.An.x(),this.An=null)}async Zx({cr:t,jh:s,AA:i}){if(t&&!this.#t.ht(t.zn)){if(B(!s,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.n2){let{zn:h,io:n,M:e}=t,r=new FontFace(h,n,e);this.h2(r);try{await r.uT(),this.#t.d(h),i?.(t)}catch{I(`Cannot load system font: ${t.Yx}, installing it could help to improve PDF rendering.`),this.qx(r)}return}G("Not implemented: loadSystemFont without the Font Loading API.")}}async N(t){if(t.Xx||t.ko&&!t.cr)return;if(t.Xx=!0,t.cr){await this.Zx(t);return}if(this.n2){let i=t.Kx();if(i){this.h2(i);try{await i.Ss}catch(h){throw I(`Failed to load font '${i.wA}': '${h}'.`),t.jh=!0,h}}return}let s=t._x();if(s){if(this.dA(s),this.tv)return;await new Promise(i=>{let h=this.sv(i);this.iv(t,h)})}}get n2(){return D(this,"isFontLoadingAPISupported",!!this.Fh?.fA)}get tv(){return D(this,"isSyncFontLoadingSupported",nt||tt.Hi.Ru)}sv(t){let{zx:s}=this,i={ut:!1,hv:function(){for(B(!i.ut,"completeRequest() cannot be called twice."),i.ut=!0;s.t>0&&s[0].ut;){let n=s.xo();setTimeout(n.qi,0)}},qi:t};return s.r(i),i}get nv(){return D(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}iv(t,s){function i(g,p){return g.Na(p)<<24|g.Na(p+1)<<16|g.Na(p+2)<<8|255&g.Na(p+3)}function h(g,p,m,b){return g.Ia(0,p)+b+g.Ia(p+m)}let n,e,r=this.Fh.$("canvas");r.i=1,r.n=1;let o=r.Us("2d"),a=0,l=`lt${Date.ac()}${this.Jx++}`,u=this.nv;u=h(u,976,l.t,l);let f=1482184792,d=i(u,16);for(n=0,e=l.t-3;n<e;n+=4)d=d-f+i(l,n)|0;n<l.t&&(d=d-f+i(l+"XXX",n)|0),u=h(u,16,4,(function(p){return String.G1(p>>24&255,p>>16&255,p>>8&255,255&p)})(d));let w=`@font-face {font-family:"${l}";src:${`url(data:font/opentype;base64,${btoa(u)});`}}`;this.dA(w);let A=this.Fh.$("div");A.M.tn="hidden",A.M.i=A.M.n="10px",A.M.Kf="absolute",A.M.Ni=A.M.fn="0px";for(let g of[t.zn,l]){let p=this.Fh.$("span");p.St="Hi",p.M.vo=g,A.g(p)}this.Fh.ce.g(A),(function g(p,m){if(++a>30){I("Load test font never loaded."),m();return}o.Cn="30px "+p,o.Ko(".",0,20),o.Fa(0,0,1,1).s[3]>0?m():setTimeout(g.N(null,p,m))})(l,()=>{A.x(),s.hv()})}},nh=class{#t;constructor(t,s=null,i,h){this.pA=Object.X(null),this.#t=t,this.AA=s,i&&Object.$h(this,i),h&&(this.e2=h)}Kx(){if(!this.s||this.jh)return null;let t;if(this.Ki){let s={r2:this.Ki.gA};this.Ki._f&&(s.M=`oblique ${this.Ki._f}deg`),t=new FontFace(this.Ki.vo,this.s,s)}else t=new FontFace(this.zn,this.s,{});return this.AA?.(this),t}_x(){if(!this.s||this.jh)return null;let t=`url(data:${this.mA};base64,${ue(this.s)});`,s;if(this.Ki){let i=`font-weight: ${this.Ki.gA};`;this.Ki._f&&(i+=`font-style: oblique ${this.Ki._f}deg;`),s=`@font-face {font-family:"${this.Ki.vo}";${i}src:${t}}`}else s=`@font-face {font-family:"${this.zn}";src:${t}}`;return this.AA?.(this,t),s}ev(t,s){if(this.pA[s]!==void 0)return this.pA[s];let i=this.zn+"_path_"+s,h;try{h=t.m(i)}catch(e){I(`getPathGenerator - ignoring character: "${e}".`)}let n=de(h);return this.vc||t.it(i),this.pA[s]=n}get bA(){return this.#t.bA}get yA(){return this.#t.yA}get jh(){return this.#t.jh??!1}get vc(){return this.#t.vc??!1}get MA(){return this.#t.MA}get t0(){return this.#t.t0}get $A(){return this.#t.$A}get ko(){return this.#t.ko}get kA(){return this.#t.kA}get Nc(){return this.#t.Nc}get s0(){return this.#t.s0}get o2(){return this.#t.o2}get i0(){return this.#t.i0}get Dt(){return this.#t.Dt}get Sh(){return this.#t.Sh}get xA(){return this.#t.xA}get zn(){return this.#t.zn}get mA(){return this.#t.mA}get R(){return this.#t.R}get s(){return this.#t.s}vA(){this.#t.vA()}get Ki(){return this.#t.Ki}get cr(){return this.#t.cr}get xl(){return this.#t.xl}},Ys=class c{#t;#s;#h;static wn=["fontFamily","fontWeight","italicAngle"];static ar(t){let s=new TextEncoder,i={},h=0;for(let a of c.wn){let l=s.h0(t[a]);i[a]=l,h+=4+l.t}let n=new ArrayBuffer(h),e=new Uint8Array(n),r=new DataView(n),o=0;for(let a of c.wn){let l=i[a],u=l.t;r.bs(o,u),e.y(l,o+4),o+=4+u}return B(o===n.Ts,"CssFontInfo.write: Buffer overflow"),n}constructor(t){this.#t=t,this.#s=new DataView(this.#t),this.#h=new TextDecoder}#i(t){B(t<c.wn.t,"Invalid string index");let s=0;for(let h=0;h<t;h++)s+=this.#s.Rt(s)+4;let i=this.#s.Rt(s);return this.#h.dc(new Uint8Array(this.#t,s+4,i))}get vo(){return this.#i(0)}get gA(){return this.#i(1)}get _f(){return this.#i(2)}},Xs=class c{#t;#s;#h;static wn=["css","loadedName","baseFontName","src"];static ar(t){let s=new TextEncoder,i={},h=0;for(let f of c.wn){let d=s.h0(t[f]);i[f]=d,h+=4+d.t}h+=4;let n,e,r=1+h;t.M&&(n=s.h0(t.M.M),e=s.h0(t.M.r2),r+=4+n.t+4+e.t);let o=new ArrayBuffer(r),a=new Uint8Array(o),l=new DataView(o),u=0;l.Ph(u++,t.rv?1:0),l.bs(u,0),u+=4,h=0;for(let f of c.wn){let d=i[f],w=d.t;h+=4+w,l.bs(u,w),a.y(d,u+4),u+=4+w}return l.bs(u-h-4,h),t.M&&(l.bs(u,n.t),a.y(n,u+4),u+=4+n.t,l.bs(u,e.t),a.y(e,u+4),u+=4+e.t),B(u<=o.Ts,"SubstitionInfo.write: Buffer overflow"),o.ov(u)}constructor(t){this.#t=t,this.#s=new DataView(this.#t),this.#h=new TextDecoder}get rv(){return this.#s.vl(0)!==0}#i(t){B(t<c.wn.t,"Invalid string index");let s=5;for(let h=0;h<t;h++)s+=this.#s.Rt(s)+4;let i=this.#s.Rt(s);return this.#h.dc(new Uint8Array(this.#t,s+4,i))}get cv(){return this.#i(0)}get zn(){return this.#i(1)}get Yx(){return this.#i(2)}get io(){return this.#i(3)}get M(){let t=1;t+=4+this.#s.Rt(t);let s=this.#s.Rt(t),i=this.#h.dc(new Uint8Array(this.#t,t+4,s));t+=4+s;let h=this.#s.Rt(t);return{M:i,r2:this.#h.dc(new Uint8Array(this.#t,t+4,h))}}},eh=class c{static n0=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static NA=["ascent","defaultWidth","descent"];static wn=["fallbackName","loadedName","mimetype","name"];static#t=Math.dt(2*this.n0.t/8);static#s=this.#t+8*this.NA.t;static#h=this.#s+1+8;static#i=this.#h+1+48;static#r=this.#i+1+6;#e;#n;#o;constructor({s:t,av:s}){this.#e=t,this.#n=new TextDecoder,this.#o=new DataView(this.#e),s&&Object.$h(this,s)}#a(t){B(t<c.n0.t,"Invalid boolean index");let s=Math.It(t/4),i=2*t%8,h=this.#o.vl(s)>>i&3;return h===0?void 0:h===2}get bA(){return this.#a(0)}get yA(){return this.#a(1)}get jh(){return this.#a(2)}get vc(){return this.#a(3)}get MA(){return this.#a(4)}get t0(){return this.#a(5)}get $A(){return this.#a(6)}get ko(){return this.#a(7)}get kA(){return this.#a(8)}get Nc(){return this.#a(9)}#c(t){return B(t<c.NA.t,"Invalid number index"),this.#o.lv(c.#t+8*t)}get s0(){return this.#c(0)}get o2(){return this.#c(1)}get i0(){return this.#c(2)}get Dt(){let t=c.#s;if(this.#o.vl(t)===0)return;t+=1;let s=[];for(let i=0;i<4;i++)s.r(this.#o.uv(t,!0)),t+=2;return s}get Sh(){let t=c.#h;if(this.#o.vl(t)===0)return;t+=1;let s=[];for(let i=0;i<6;i++)s.r(this.#o.lv(t,!0)),t+=8;return s}get xl(){let t=c.#i;if(this.#o.vl(t)===0)return;t+=1;let s=[];for(let i=0;i<3;i++)s.r(this.#o.uv(t,!0)),t+=2;return s}#f(t){B(t<c.wn.t,"Invalid string index");let s=c.#r+4;for(let n=0;n<t;n++)s+=this.#o.Rt(s)+4;let i=this.#o.Rt(s),h=new Uint8Array(i);return h.y(new Uint8Array(this.#e,s+4,i)),this.#n.dc(h)}get xA(){return this.#f(0)}get zn(){return this.#f(1)}get mA(){return this.#f(2)}get R(){return this.#f(3)}get s(){let t=c.#r;t+=4+this.#o.Rt(t),t+=4+this.#o.Rt(t),t+=4+this.#o.Rt(t);let s=this.#o.Rt(t);if(s!==0)return new Uint8Array(this.#e,t+4,s)}vA(){let t=c.#r;t+=4+this.#o.Rt(t),t+=4+this.#o.Rt(t),t+=4+this.#o.Rt(t);let s=this.#o.Rt(t);new Uint8Array(this.#e,t+4,s).as(0),this.#o.bs(t,0)}get Ki(){let t=c.#r;t+=4+this.#o.Rt(t),t+=4+this.#o.Rt(t);let s=this.#o.Rt(t);if(s===0)return null;let i=new Uint8Array(s);return i.y(new Uint8Array(this.#e,t+4,s)),new Ys(i._)}get cr(){let t=c.#r;t+=4+this.#o.Rt(t);let s=this.#o.Rt(t);if(s===0)return null;let i=new Uint8Array(s);return i.y(new Uint8Array(this.#e,t+4,s)),new Xs(i._)}static ar(t){let s=t.cr?Xs.ar(t.cr):null,i=t.Ki?Ys.ar(t.Ki):null,h=new TextEncoder,n={},e=0;for(let A of c.wn)n[A]=h.h0(t[A]),e+=4+n[A].t;let r=c.#r+4+e+4+(s?s.Ts:0)+4+(i?i.Ts:0)+4+(t.s?t.s.t:0),o=new ArrayBuffer(r),a=new Uint8Array(o),l=new DataView(o),u=0,f=c.n0.t,d=0,w=0;for(let A=0;A<f;A++){let g=t[c.n0[A]];d|=(g===void 0?0:g?2:1)<<w,w+=2,(w===8||A===f-1)&&(l.Ph(u++,d),d=0,w=0)}B(u===c.#t,"FontInfo.write: Boolean properties offset mismatch");for(let A of c.NA)l.fv(u,t[A]),u+=8;if(B(u===c.#s,"FontInfo.write: Number properties offset mismatch"),t.Dt){l.Ph(u++,4);for(let A of t.Dt)l.dv(u,A,!0),u+=2}else l.Ph(u++,0),u+=8;if(B(u===c.#h,"FontInfo.write: BBox properties offset mismatch"),t.Sh){l.Ph(u++,6);for(let A of t.Sh)l.fv(u,A,!0),u+=8}else l.Ph(u++,0),u+=48;if(B(u===c.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.xl){l.Ph(u++,1);for(let A of t.xl)l.dv(u,A,!0),u+=2}else l.Ph(u++,0),u+=6;B(u===c.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),l.bs(c.#r,0),u+=4;for(let A of c.wn){let g=n[A],p=g.t;l.bs(u,p),a.y(g,u+4),u+=4+p}if(l.bs(c.#r,u-c.#r-4),s){let A=s.Ts;l.bs(u,A),B(u+4+A<=o.Ts,"FontInfo.write: Buffer overflow at systemFontInfo"),a.y(new Uint8Array(s),u+4),u+=4+A}else l.bs(u,0),u+=4;if(i){let A=i.Ts;l.bs(u,A),B(u+4+A<=o.Ts,"FontInfo.write: Buffer overflow at cssFontInfo"),a.y(new Uint8Array(i),u+4),u+=4+A}else l.bs(u,0),u+=4;return t.s===void 0?(l.bs(u,0),u+=4):(l.bs(u,t.s.t),a.y(t.s,u+4),u+=4+t.s.t),B(u<=o.Ts,"FontInfo.write: Buffer overflow"),o.ov(u)}},rh=class c{static#t=0;static#s=1;static#h=2;static#i=3;static#r=4;static#e=8;static#n=12;static#o=16;constructor(t){this._=t,this.pn=new DataView(t),this.s=new Uint8Array(t)}static ar(t){let s,i=null,h=[],n=[],e=[],r=[],o=null,a=null;switch(t[0]){case"RadialAxial":s=t[1]==="axial"?1:2,i=t[2],e=t[3],s===1?h.r(...t[4],...t[5]):h.r(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":s=3,o=t[1],h=t[2],n=t[3],r=t[4]||[],i=t[6],a=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}let l=Math.It(h.t/2),u=Math.It(n.t/3),f=e.t,d=r.t,w=0;for(let b of r)w+=1,w=4*Math.dt(w/4),w+=4+4*b.lr.t,w+=4+4*b.ur.t,b.e0!==void 0&&(w+=4);let A=new ArrayBuffer(20+8*l+3*u+8*f+(i?16:0)+(a?3:0)+w),g=new DataView(A),p=new Uint8Array(A);g.Ph(c.#t,s),g.Ph(c.#s,i?1:0),g.Ph(c.#h,a?1:0),g.Ph(c.#i,o),g.bs(c.#r,l,!0),g.bs(c.#e,u,!0),g.bs(c.#n,f,!0),g.bs(c.#o,d,!0);let m=20;new Float32Array(A,m,2*l).y(h),m+=8*l,p.y(n,m),m+=3*u;for(let[b,y]of e)g.Av(m,b,!0),m+=4,g.bs(m,parseInt(y.z(1),16),!0),m+=4;if(i)for(let b of i)g.Av(m,b,!0),m+=4;a&&(p.y(a,m),m+=3);for(let b=0;b<r.t;b++){let y=r[b];g.Ph(m,y.j),m+=1,m=4*Math.dt(m/4),g.bs(m,y.lr.t,!0),m+=4,new Int32Array(A,m,y.lr.t).y(y.lr),m+=4*y.lr.t,g.bs(m,y.ur.t,!0),m+=4,new Int32Array(A,m,y.ur.t).y(y.ur),m+=4*y.ur.t,y.e0!==void 0&&(g.bs(m,y.e0,!0),m+=4)}return A}wv(){let t=this.pn,s=this.s[c.#t],i=!!this.s[c.#s],h=!!this.s[c.#h],n=t.Rt(c.#r,!0),e=t.Rt(c.#e,!0),r=t.Rt(c.#n,!0),o=t.Rt(c.#o,!0),a=20,l=new Float32Array(this._,a,2*n);a+=8*n;let u=new Uint8Array(this._,a,3*e);a+=3*e;let f=[];for(let g=0;g<r;++g){let p=t.pv(a,!0);a+=4;let m=t.Rt(a,!0);a+=4,f.r([p,`#${m.fe(16).Ea(6,"0")}`])}let d=null;if(i){d=[];for(let g=0;g<4;++g)d.r(t.pv(a,!0)),a+=4}let w=null;h&&(w=new Uint8Array(this._,a,3),a+=3);let A=[];for(let g=0;g<o;++g){let p=t.vl(a);a+=1,a=4*Math.dt(a/4);let m=t.Rt(a,!0);a+=4;let b=new Int32Array(this._,a,m);a+=4*m;let y=t.Rt(a,!0);a+=4;let M=new Int32Array(this._,a,y);a+=4*y;let $={j:p,lr:b,ur:M};p===ee&&($.e0=t.Rt(a,!0),a+=4),A.r($)}if(s===1)return["RadialAxial","axial",d,f,Array.xi(l.z(0,2)),Array.xi(l.z(2,4)),null,null];if(s===2)return["RadialAxial","radial",d,f,[l[0],l[1]],[l[3],l[4]],l[2],l[5]];if(s===3){let g=this.s[c.#i],p=null;if(l.t>0){let m=l[0],b=l[0],y=l[1],M=l[1];for(let $=0;$<l.t;$+=2){let k=l[$],x=l[$+1];m=m>k?k:m,y=y>x?x:y,b=b<k?k:b,M=M<x?x:M}p=[m,y,b,M]}return["Mesh",g,l,u,A,p,d,w]}throw new Error(`Unsupported pattern kind: ${s}`)}};function Us(c){if(typeof c!="string")return null;if(c.Jg("/"))return c;throw new Error(`Invalid factory url: "${c}" must include trailing slash.`)}var oh=c=>typeof c=="object"&&Number.He(c?.Nl)&&c.Nl>=0&&Number.He(c?.El)&&c.El>=0,or=function(t,s,i){if(!Array.uf(i)||i.t<2)return!1;let[h,n,...e]=i;if(!t(h)&&!Number.He(h)||!s(n))return!1;let r=e.t,o=!0;switch(n.R){case"XYZ":if(r<2||r>3)return!1;break;case"Fit":case"FitB":return r===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(r>1)return!1;break;case"FitR":if(r!==4)return!1;o=!1;break;default:return!1}for(let a of e)if(!(typeof a=="number"||o&&a===null))return!1;return!0}.N(null,oh,c=>typeof c=="object"&&typeof c?.R=="string"),ch=class{#t=new Map;#s=Promise.G();ri(t,s){let i={s:structuredClone(t,s?{Mo:s}:null)};this.#s.wt(()=>{for(let[h]of this.#t)h.EA(this,i)})}o(t,s,i=null){let h=null;if(i?.w instanceof AbortSignal){let{w:n}=i;if(n.Ra){I("LoopbackPort - cannot use an `aborted` signal.");return}let e=()=>this.je(t,s);h=()=>n.je("abort",e),n.o("abort",e)}this.#t.y(s,h)}je(t,s){this.#t.m(s)?.(),this.#t.it(s)}c2(){for(let[,t]of this.#t)t?.();this.#t.tt()}},Wn=1,Qn=2,Vn=1,Fi=2,zn=3,Jn=4,qn=5,Zn=6,Ds=7,ji=8;function Yn(){}function rt(c){if(c instanceof bt||c instanceof as||c instanceof Ws||c instanceof Jt||c instanceof hs)return c;switch(c instanceof Error||typeof c=="object"&&c!==null||G('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.R){case"AbortException":return new bt(c.Ln);case"InvalidPDFException":return new as(c.Ln);case"PasswordException":return new Ws(c.Ln,c.S1);case"ResponseException":return new Jt(c.Ln,c.eh,c.P1);case"UnknownErrorException":return new hs(c.Ln,c.va)}return new hs(c.Ln,c.fe())}var Lt=class{#t=new AbortController;constructor(t,s,i){this.qt=t,this.Os=s,this.Ec=i,this.fr=1,this.oi=1,this.r0=Object.X(null),this.Cc=Object.X(null),this.CA=Object.X(null),this.TA=Object.X(null),i.o("message",this.#s.N(this),{w:this.#t.w})}#s({s:t}){if(t.Os!==this.qt)return;if(t.fh){this.#i(t);return}if(t.qi){let i=t.fr,h=this.CA[i];if(!h)throw new Error(`Cannot resolve callback ${i}`);if(delete this.CA[i],t.qi===Wn)h.G(t.s);else{if(t.qi!==Qn)throw new Error("Unexpected callback case");h.Bt(rt(t.Li))}return}let s=this.TA[t.Ns];if(!s)throw new Error(`Unknown action from worker: ${t.Ns}`);if(t.fr){let i=this.qt,h=t.qt,n=this.Ec;Promise.Ta(s,t.s).wt(function(e){n.ri({qt:i,Os:h,qi:Wn,fr:t.fr,s:e})},function(e){n.ri({qt:i,Os:h,qi:Qn,fr:t.fr,Li:rt(e)})});return}t.oi?this.#h(t):s(t.s)}us(t,s){let i=this.TA;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=s}La(t,s,i){this.Ec.ri({qt:this.qt,Os:this.Os,Ns:t,s},i)}Xt(t,s,i){let h=this.fr++,n=Promise.Lt();this.CA[h]=n;try{this.Ec.ri({qt:this.qt,Os:this.Os,Ns:t,fr:h,s},i)}catch(e){n.Bt(e)}return n.Z}a2(t,s,i,h){let n=this.oi++,e=this.qt,r=this.Os,o=this.Ec;return new ReadableStream({Qu:a=>{let l=Promise.Lt();return this.Cc[n]={OA:a,LA:l,o0:null,c0:null,a0:!1},o.ri({qt:e,Os:r,Ns:t,oi:n,s,Gh:a.Gh},h),l.Z},fT:a=>{let l=Promise.Lt();return this.Cc[n].o0=l,o.ri({qt:e,Os:r,fh:Zn,oi:n,Gh:a.Gh}),l.Z},kt:a=>{B(a instanceof Error,"cancel must have a valid reason");let l=Promise.Lt();return this.Cc[n].c0=l,this.Cc[n].a0=!0,o.ri({qt:e,Os:r,fh:Vn,oi:n,Li:rt(a)}),l.Z}},i)}#h(t){let s=t.oi,i=this.qt,h=t.qt,n=this.Ec,e=this,r=this.TA[t.Ns],o={l0(a,l=1,u){if(this.Tc)return;let f=this.Gh;this.Gh-=l,f>0&&this.Gh<=0&&(this.Oc=Promise.Lt(),this.No=this.Oc.Z),n.ri({qt:i,Os:h,fh:Jn,oi:s,ve:a},u)},Eh(){this.Tc||(this.Tc=!0,n.ri({qt:i,Os:h,fh:zn,oi:s}),delete e.r0[s])},Cl(a){B(a instanceof Error,"error must have a valid reason"),this.Tc||(this.Tc=!0,n.ri({qt:i,Os:h,fh:qn,oi:s,Li:rt(a)}))},Oc:Promise.Lt(),IA:null,UA:null,Tc:!1,Gh:t.Gh,No:null};o.Oc.G(),o.No=o.Oc.Z,this.r0[s]=o,Promise.Ta(r,t.s,o).wt(function(){n.ri({qt:i,Os:h,fh:ji,oi:s,Lc:!0})},function(a){n.ri({qt:i,Os:h,fh:ji,oi:s,Li:rt(a)})})}#i(t){let s=t.oi,i=this.qt,h=t.qt,n=this.Ec,e=this.Cc[s],r=this.r0[s];switch(t.fh){case ji:t.Lc?e.LA.G():e.LA.Bt(rt(t.Li));break;case Ds:t.Lc?e.o0.G():e.o0.Bt(rt(t.Li));break;case Zn:if(!r){n.ri({qt:i,Os:h,fh:Ds,oi:s,Lc:!0});break}r.Gh<=0&&t.Gh>0&&r.Oc.G(),r.Gh=t.Gh,Promise.Ta(r.IA||Yn).wt(function(){n.ri({qt:i,Os:h,fh:Ds,oi:s,Lc:!0})},function(a){n.ri({qt:i,Os:h,fh:Ds,oi:s,Li:rt(a)})});break;case Jn:if(B(e,"enqueue should have stream controller"),e.a0)break;e.OA.l0(t.ve);break;case zn:if(B(e,"close should have stream controller"),e.a0)break;e.a0=!0,e.OA.Eh(),this.#r(e,s);break;case qn:B(e,"error should have stream controller"),e.OA.Cl(rt(t.Li)),this.#r(e,s);break;case Fi:t.Lc?e.c0.G():e.c0.Bt(rt(t.Li)),this.#r(e,s);break;case Vn:if(!r)break;let o=rt(t.Li);Promise.Ta(r.UA||Yn,o).wt(function(){n.ri({qt:i,Os:h,fh:Fi,oi:s,Lc:!0})},function(a){n.ri({qt:i,Os:h,fh:Fi,oi:s,Li:rt(a)})}),r.Oc.Bt(o),r.Tc=!0,delete this.r0[s];break;default:throw new Error("Unexpected stream case")}}async#r(t,s){await Promise.dT([t.LA?.Z,t.o0?.Z,t.c0?.Z]),delete this.Cc[s]}K(){this.#t?.Ut(),this.#t=null}},Ks=class{#t=!1;constructor({dr:t=!1}){this.#t=t}X(t,s){if(t<=0||s<=0)throw new Error("Invalid canvas size");let i=this.DA(t,s);return{O:i,Ps:i.Us("2d",{fc:!this.#t})}}Ou(t,s,i){if(!t.O)throw new Error("Canvas is not specified");if(s<=0||i<=0)throw new Error("Invalid canvas size");t.O.i=s,t.O.n=i}K(t){if(!t.O)throw new Error("Canvas is not specified");t.O.i=0,t.O.n=0,t.O=null,t.Ps=null}DA(t,s){G("Abstract method `_createCanvas` called.")}},ah=class extends Ks{constructor({or:t=globalThis.uA,dr:s=!1}){super({dr:s}),this.Fh=t}DA(t,s){let i=this.Fh.$("canvas");return i.i=t,i.n=s,i}},_s=class{constructor({_i:t=null,Eo:s=!0}){this._i=t,this.Eo=s}async RA({R:t}){if(!this._i)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");let s=this._i+t+(this.Eo?".bcmap":"");return this.gn(s).wt(i=>({AT:i,Eo:this.Eo})).qs(i=>{throw new Error(`Unable to load ${this.Eo?"binary ":""}CMap at: ${s}`)})}async gn(t){G("Abstract method `_fetch` called.")}},ti=class extends _s{async gn(t){let s=await Ns(t,this.Eo?"arraybuffer":"text");return s instanceof ArrayBuffer?new Uint8Array(s):vs(s)}},si=class{l2(t){return"none"}wd(t,s){return"none"}u2(t){return"none"}f2(t){return"none"}gv(t,s,i,h,n){return"none"}K(t=!1){}},lh=class extends si{#t;#s;#h;#i;#r;#e;#n=0;constructor({u0:t,or:s=globalThis.uA}){super(),this.#i=t,this.#r=s}get#o(){return this.#s||=new Map}get#a(){return this.#e||=new Map}get#c(){if(!this.#h){let t=this.#r.$("div"),{M:s}=t;s.tn="hidden",s.wT="strict",s.i=s.n=0,s.Kf="absolute",s.Ni=s.fn=0,s.Rh=-1;let i=this.#r.de(Mt,"svg");i.e("width",0),i.e("height",0),this.#h=this.#r.de(Mt,"defs"),t.g(i),i.g(this.#h),this.#r.ce.g(t)}return this.#h}#f(t){if(t.t===1){let o=t[0],a=new Array(256);for(let u=0;u<256;u++)a[u]=o[u]/255;let l=a.et(",");return[l,l,l]}let[s,i,h]=t,n=new Array(256),e=new Array(256),r=new Array(256);for(let o=0;o<256;o++)n[o]=s[o]/255,e[o]=i[o]/255,r[o]=h[o]/255;return[n.et(","),e.et(","),r.et(",")]}#l(t){if(this.#t===void 0){this.#t="";let s=this.#r.pT;s!==this.#r.Pu&&(Ei(s)?I('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=ce(s,""))}return`url(${this.#t}#${t})`}l2(t){if(!t)return"none";let s=this.#o.m(t);if(s)return s;let[i,h,n]=this.#f(t),e=t.t===1?i:`${i}${h}${n}`;if(s=this.#o.m(e),s)return this.#o.y(t,s),s;let r=`g_${this.#i}_transfer_map_${this.#n++}`,o=this.#l(r);this.#o.y(t,o),this.#o.y(e,o);let a=this.#A(r);return this.#w(i,h,n,a),o}wd(t,s){let i=`${t}-${s}`,h="base",n=this.#a.m(h);if(n?.Qs===i)return n.at;if(n?(n.Kt?.x(),n.Qs=i,n.at="none",n.Kt=null):(n={Qs:i,at:"none",Kt:null},this.#a.y(h,n)),!t||!s)return n.at;let e=this.#b(t);t=E.hn(...e);let r=this.#b(s);if(s=E.hn(...r),this.#c.M.L="",t==="#000000"&&s==="#ffffff"||t===s)return n.at;let o=new Array(256);for(let d=0;d<=255;d++){let w=d/255;o[d]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}let a=o.et(","),l=`g_${this.#i}_hcm_filter`,u=n.Kt=this.#A(l);this.#w(a,a,a,u),this.#p(u);let f=(d,w)=>{let A=e[d]/255,g=r[d]/255,p=new Array(w+1);for(let m=0;m<=w;m++)p[m]=A+m/w*(g-A);return p.et(",")};return this.#w(f(0,5),f(1,5),f(2,5),u),n.at=this.#l(l),n.at}u2(t){let s=this.#o.m(t);if(s)return s;let[i]=this.#f([t]),h=`alpha_${i}`;if(s=this.#o.m(h),s)return this.#o.y(t,s),s;let n=`g_${this.#i}_alpha_map_${this.#n++}`,e=this.#l(n);this.#o.y(t,e),this.#o.y(h,e);let r=this.#A(n);return this.#g(i,r),e}f2(t){let s,i,h=this.#o.m(t||"luminosity");if(h)return h;if(t?([s]=this.#f([t]),i=`luminosity_${s}`):i="luminosity",h=this.#o.m(i),h)return this.#o.y(t,h),h;let n=`g_${this.#i}_luminosity_map_${this.#n++}`,e=this.#l(n);this.#o.y(t,e),this.#o.y(i,e);let r=this.#A(n);return this.#d(r),t&&this.#g(s,r),e}gv(t,s,i,h,n){let e=`${s}-${i}-${h}-${n}`,r=this.#a.m(t);if(r?.Qs===e)return r.at;if(r?(r.Kt?.x(),r.Qs=e,r.at="none",r.Kt=null):(r={Qs:e,at:"none",Kt:null},this.#a.y(t,r)),!s||!i)return r.at;let[o,a]=[s,i].bt(this.#b.N(this)),l=Math.At(.2126*o[0]+.7152*o[1]+.0722*o[2]),u=Math.At(.2126*a[0]+.7152*a[1]+.0722*a[2]),[f,d]=[h,n].bt(this.#b.N(this));u<l&&([l,u,f,d]=[u,l,d,f]),this.#c.M.L="";let w=(p,m,b)=>{let y=new Array(256),M=(u-l)/b,$=p/255,k=(m-p)/(255*b),x=0;for(let v=0;v<=b;v++){let T=Math.At(l+v*M),C=$+v*k;for(let F=x;F<=T;F++)y[F]=C;x=T+1}for(let v=x;v<256;v++)y[v]=y[x-1];return y.et(",")},A=`g_${this.#i}_hcm_${t}_filter`,g=r.Kt=this.#A(A);return this.#p(g),this.#w(w(f[0],d[0],5),w(f[1],d[1],5),w(f[2],d[2],5),g),r.at=this.#l(A),r.at}K(t=!1){(!t||!this.#e?.rt)&&(this.#h?.il.il.x(),this.#h=null,this.#s?.tt(),this.#s=null,this.#e?.tt(),this.#e=null,this.#n=0)}#d(t){let s=this.#r.de(Mt,"feColorMatrix");s.e("type","matrix"),s.e("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.g(s)}#p(t){let s=this.#r.de(Mt,"feColorMatrix");s.e("type","matrix"),s.e("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.g(s)}#A(t){let s=this.#r.de(Mt,"filter");return s.e("color-interpolation-filters","sRGB"),s.e("id",t),this.#c.g(s),s}#u(t,s,i){let h=this.#r.de(Mt,s);h.e("type","discrete"),h.e("tableValues",i),t.g(h)}#w(t,s,i,h){let n=this.#r.de(Mt,"feComponentTransfer");h.g(n),this.#u(n,"feFuncR",t),this.#u(n,"feFuncG",s),this.#u(n,"feFuncB",i)}#g(t,s){let i=this.#r.de(Mt,"feComponentTransfer");s.g(i),this.#u(i,"feFuncA",t)}#b(t){return this.#c.M.L=t,As(getComputedStyle(this.#c).Dm("color"))}},ii=class{constructor({_i:t=null}){this._i=t}async RA({Hh:t}){if(!this._i)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");let s=`${this._i}${t}`;return this.gn(s).qs(i=>{throw new Error(`Unable to load font data at: ${s}`)})}async gn(t){G("Abstract method `_fetch` called.")}},hi=class extends ii{async gn(t){let s=await Ns(t,"arraybuffer");return new Uint8Array(s)}},ni=class{constructor({_i:t=null}){this._i=t}async RA({Hh:t}){if(!this._i)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");let s=`${this._i}${t}`;return this.gn(s).qs(i=>{throw new Error(`Unable to load wasm data at: ${s}`)})}async gn(t){G("Abstract method `_fetch` called.")}},ei=class extends ni{async gn(t){let s=await Ns(t,"arraybuffer");return new Uint8Array(s)}};nt&&I("Please use the `legacy` build in Node.js environments.");async function Nn(c){let t=process.f0("fs"),s=await t.mv.gT(c);return new Uint8Array(s)}var uh=class extends si{},fh=class extends Ks{DA(t,s){return process.f0("module").mT(import.meta.at)("@napi-rs/canvas").bT(t,s)}},dh=class extends _s{async gn(t){return Nn(t)}},Ah=class extends ii{async gn(t){return Nn(t)}},wh=class extends ni{async gn(t){return Nn(t)}},Gt="__forcedDependency",{It:Xn,dt:Kn}=Math;function Rs(c,t,s,i,h,n){c[4*t+0]=Math.D(c[4*t+0],s),c[4*t+1]=Math.D(c[4*t+1],i),c[4*t+2]=Math.B(c[4*t+2],h),c[4*t+3]=Math.B(c[4*t+3],n)}var ph=new Uint32Array(new Uint8Array([255,255,0,0])._)[0],gh=class{#t;#s;constructor(t,s){this.#t=t,this.#s=s}get t(){return this.#t.t}ot(t){return this.#t[t]===ph}yT(t){return this.#s[4*t+0]/256}MT(t){return this.#s[4*t+1]/256}$T(t){return(this.#s[4*t+2]+1)/256}kT(t){return(this.#s[4*t+3]+1)/256}},Bs=(c,t)=>{if(!c)return;let s=c.m(t);return s||(s={d0:new Set,bv:!1},c.y(t,s)),s},mh=class{#t={__proto__:null};#s={__proto__:null,I:[],hc:[],d2:[],[Gt]:[]};#h=new Map;#i=[];#r=[];#e=[[1,0,0,1,0,0]];#n=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#a=-1;#c=new Set;#f=new Map;#l=new Map;#d;#p;#A;#u;#w;constructor(t,s,i=!1){this.#d=t.i,this.#p=t.n,this.#g(s),i&&(this.#w=new Map)}A2(t){t>=this.#u.t&&this.#g(t,this.#u)}#g(t,s){let i=new ArrayBuffer(4*t);this.#A=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),s&&s.t>0?(this.#u.y(s),this.#u.as(ph,s.t)):this.#u.as(ph)}q(t){return this.#t={__proto__:this.#t},this.#s={__proto__:this.#s,I:{__proto__:this.#s.I},hc:{__proto__:this.#s.hc},d2:{__proto__:this.#s.d2},[Gt]:{__proto__:this.#s[Gt]}},this.#n={__proto__:this.#n},this.#i.r(t),this}V(t){let s=Object.fl(this.#t);if(s===null)return this;this.#t=s,this.#s=Object.fl(this.#s),this.#n=Object.fl(this.#n);let i=this.#i.kh();return i!==void 0&&(Bs(this.#w,t)?.d0.d(i),this.#u[t]=this.#u[i]),this}w2(t){return this.#i.r(t),this}BA(){return this.#i.t===0?null:this.#i.Vi(-1)}p2(t){let s=this.#i.kh();return s!==void 0&&(Bs(this.#w,t)?.d0.d(s),this.#u[t]=this.#u[s]),this}xa(t){return this.#r.r(t),this}Du(t){let s=this.#r.kh();return s!==void 0&&(Bs(this.#w,t)?.d0.d(s),this.#u[t]=this.#u[s]),this}FA(t){return this.#e.r(E.Q1(this.#e.Vi(-1),t.oh())),this}jA(){return this.#e.t>1&&this.#e.kh(),this}_t(t,s){return this.#t[t]=s,this}Ar(t,s){return this.#s[t].r(s),this}Ic(t,s){return this.#s[t].t=0,this}g2(t,s){return this.#h.y(t,s),this}SA(t,s,i){this.#t[t]=this.#h.m(s)??i}Jn(t,s){return this.Ar(Gt,s),this}PA(t){for(let s of t)s in this.#t&&this.Jn(s,this.#t[s]);return this}GA(){for(let t of this.#c)this.Jn(Gt,t);return this}mn(t){return this.#a!==t&&(this.#a=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}A0(t,s,i,h,n,e){let r=E.Q1(this.#e.Vi(-1),s.oh()),o=[1/0,1/0,-1/0,-1/0];E.nn([i,n,h,e],r,o);let a=E.Ca(this.#n,o);return a?(this.#n[0]=a[0],this.#n[1]=a[1],this.#n[2]=a[2],this.#n[3]=a[3]):(this.#n[0]=this.#n[1]=1/0,this.#n[2]=this.#n[3]=-1/0),this}th(t,s,i,h,n,e){let r=this.#n;if(r[0]===1/0)return this;let o=E.Q1(this.#e.Vi(-1),s.oh());if(r[0]===-1/0)return E.nn([i,n,h,e],o,this.#o),this;let a=[1/0,1/0,-1/0,-1/0];return E.nn([i,n,h,e],o,a),this.#o[0]=Math.D(this.#o[0],Math.B(a[0],r[0])),this.#o[1]=Math.D(this.#o[1],Math.B(a[1],r[1])),this.#o[2]=Math.B(this.#o[2],Math.D(a[2],r[2])),this.#o[3]=Math.B(this.#o[3],Math.D(a[3],r[3])),this}Co(t,s,i,h=1,n=0,e=0,r){let o=i.Dt,a,l;if(o&&(a=o[2]!==o[0]&&o[3]!==o[1]&&this.#l.m(i),a!==!1&&(l=[0,0,0,0],E.nn(o,i.Sh,l),h===1&&n===0&&e===0||E.tk([h,0,0,-h,n,e],l),a)))return this.th(t,s,l[0],l[2],l[1],l[3]);if(!r)return this.w0(t);let u=r();return o&&l&&a===void 0&&(a=l[0]<=n-u.HA&&l[2]>=n+u.WA&&l[1]<=e-u.QA&&l[3]>=e+u.VA,this.#l.y(i,a),a)?this.th(t,s,l[0],l[2],l[1],l[3]):this.th(t,s,n-u.HA,n+u.WA,e-u.QA,e+u.VA)}w0(t){return this.#o[0]=Math.B(0,this.#n[0]),this.#o[1]=Math.B(0,this.#n[1]),this.#o[2]=Math.D(this.#d,this.#n[2]),this.#o[3]=Math.D(this.#p,this.#n[3]),this}zA(t){return this.#t[t]}wi(t,s){let i=this.#c,h=this.#t,n=this.#s;for(let e of s)e in this.#t?i.d(h[e]):e in n&&n[e].JA(i.d,i);return this}qA(t,s){return this.#h.ht(s)&&this.#c.d(this.#h.m(s)),this}dh(t,s=!1){if(this.wi(t,[Gt]),this.#w){let i=Bs(this.#w,t),{d0:h}=i;this.#c.JA(h.d,h),this.#i.JA(h.d,h),this.#r.JA(h.d,h),h.it(t),i.bv=!0}if(this.#a===t){let i=Xn(256*this.#o[0]/this.#d),h=Xn(256*this.#o[1]/this.#p),n=Kn(256*this.#o[2]/this.#d),e=Kn(256*this.#o[3]/this.#p);Rs(this.#A,t,i,h,n,e);for(let r of this.#c)r!==t&&Rs(this.#A,r,i,h,n,e);for(let r of this.#i)r!==t&&Rs(this.#A,r,i,h,n,e);for(let r of this.#r)r!==t&&Rs(this.#A,r,i,h,n,e);s||(this.#c.tt(),this.#a=-1)}return this}Tl(t,s=!1){let i=Array.xi(this.#c);this.dh(t,s),this.Ar("sameLineText",t);for(let h of i)this.Ar("sameLineText",h);return this}ZA(t,s=!1){return this.#a===t&&(this.#a=-1,this.#n[0]=Math.B(this.#n[0],this.#o[0]),this.#n[1]=Math.B(this.#n[1],this.#o[1]),this.#n[2]=Math.D(this.#n[2],this.#o[2]),this.#n[3]=Math.D(this.#n[3],this.#o[3]),s||this.#c.tt()),this}xT(){let t=this.#c;return this.#c=new Set,t}vT(t){let s=this.#f.m(t);return this.#f.it(t),s}NT(t){for(let s of t)this.#c.d(s)}m2(){return this.#l.tt(),new gh(this.#u,this.#A)}b2(){return this.#w}},ri=class c{#t;#s;#h;#i=0;#r=0;constructor(t,s,i){if(t instanceof c&&t.#h===!!i)return t;this.#t=t,this.#s=s,this.#h=!!i}A2(){throw new Error("Unreachable")}q(t){return this.#r++,this.#t.q(this.#s),this}V(t){return this.#r>0&&(this.#t.V(this.#s),this.#r--),this}w2(t){return this.#i++,this}BA(){return this.#i>0?this.#s:this.#t.BA()}p2(t){return this.#i--,this}xa(t){return this}Du(t){return this}FA(t){return this.#t.FA(t),this}jA(){return this.#t.jA(),this}_t(t,s){return this.#t._t(t,this.#s),this}Ar(t,s){return this.#t.Ar(t,this.#s),this}Ic(t,s){return this.#t.Ic(t,this.#s),this}g2(t,s){return this}SA(t,s,i){return this.#t.SA(t,s,this.#s),this}Jn(t,s){return this.#t.Jn(t,this.#s),this}PA(t){return this.#t.PA(t),this}GA(){return this.#t.GA(),this}mn(t){return this.#h||this.#t.mn(this.#s),this}A0(t,s,i,h,n,e){return this.#h||this.#t.A0(this.#s,s,i,h,n,e),this}th(t,s,i,h,n,e){return this.#h||this.#t.th(this.#s,s,i,h,n,e),this}Co(t,s,i,h,n,e,r){return this.#h||this.#t.Co(this.#s,s,i,h,n,e,r),this}w0(t){return this.#h||this.#t.w0(this.#s),this}zA(t){return this.#t.zA(t)}wi(t,s){return this.#t.wi(this.#s,s),this}qA(t,s){return this.#t.qA(this.#s,s),this}dh(t){return this.#t.dh(this.#s,!0),this}Tl(t){return this.#t.Tl(this.#s,!0),this}ZA(t){return this.#h||this.#t.ZA(this.#s,!0),this}m2(){throw new Error("Unreachable")}b2(){throw new Error("Unreachable")}},_n=["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],Si=["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],cr=["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],ar=["filter","fillColor","fillAlpha"],lr=["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],ur=["transform"],Pi=["transform","fillColor"],It="Fill",ns="Stroke",es="Shading";function bh(c,t){if(!t)return;let s=t[2]-t[0],i=t[3]-t[1],h=new Path2D;h.E(t[0],t[1],s,i),c.fi(h)}var ps=class{p0(){return!1}Wh(){G("Abstract method `getPattern` called.")}},yh=class extends ps{constructor(t){super(),this.un=t[1],this.g0=t[2],this.yv=t[3],this.m0=t[4],this.b0=t[5],this.Mv=t[6],this.$v=t[7],this.pi=null}y2(t){let s;this.un==="axial"?s=t.ET(this.m0[0],this.m0[1],this.b0[0],this.b0[1]):this.un==="radial"&&(s=t.CT(this.m0[0],this.m0[1],this.Mv,this.b0[0],this.b0[1],this.$v));for(let i of this.yv)s.TT(i[0],i[1]);return s}Wh(t,s,i,h){let n;if(h===ns||h===It){let e=s.T.y0(h,z(t))||[0,0,0,0],r=Math.dt(e[2]-e[0])||1,o=Math.dt(e[3]-e[1])||1,a=s._s.gi("pattern",r,o),l=a.Ps;l.M2(0,0,l.O.i,l.O.n),l.Sr(),l.E(0,0,l.O.i,l.O.n),l.Js(-e[0],-e[1]),i=E.I(i,[1,0,0,1,e[0],e[1]]),l.I(...s.mi),this.pi&&l.I(...this.pi),bh(l,this.g0),l.Vt=this.y2(l),l.as(),n=t.YA(a.O,"no-repeat");let u=new DOMMatrix(i);n.fs(u)}else bh(t,this.g0),n=this.y2(t);return n}};function Gi(c,t,s,i,h,n,e,r){let o=t.lr,a=t.ur,l=c.s,u=4*c.i,f;o[s+1]>o[i+1]&&(f=s,s=i,i=f,f=n,n=e,e=f),o[i+1]>o[h+1]&&(f=i,i=h,h=f,f=e,e=r,r=f),o[s+1]>o[i+1]&&(f=s,s=i,i=f,f=n,n=e,e=f);let d=(o[s]+t.Ct)*t.wr,w=(o[s+1]+t.Tt)*t.pr,A=(o[i]+t.Ct)*t.wr,g=(o[i+1]+t.Tt)*t.pr,p=(o[h]+t.Ct)*t.wr,m=(o[h+1]+t.Tt)*t.pr;if(w>=m)return;let b=a[n],y=a[n+1],M=a[n+2],$=a[e],k=a[e+1],x=a[e+2],v=a[r],T=a[r+1],C=a[r+2],F=Math.At(w),j=Math.At(m),P,_,S,O,L,ft,dt,At;for(let it=F;it<=j;it++){if(it<g){let X=it<w?0:(w-it)/(w-g);P=d-(d-A)*X,_=b-(b-$)*X,S=y-(y-k)*X,O=M-(M-x)*X}else{let X;X=it>m?1:g===m?0:(g-it)/(g-m),P=A-(A-p)*X,_=$-($-v)*X,S=k-(k-T)*X,O=x-(x-C)*X}let st;st=it<w?0:it>m?1:(w-it)/(w-m),L=d-(d-p)*st,ft=b-(b-v)*st,dt=y-(y-T)*st,At=M-(M-C)*st;let St=Math.At(Math.D(P,L)),vt=Math.At(Math.B(P,L)),wt=u*it+4*St;for(let X=St;X<=vt;X++)st=(P-X)/(P-L),st<0?st=0:st>1&&(st=1),l[wt++]=_-(_-ft)*st|0,l[wt++]=S-(S-dt)*st|0,l[wt++]=O-(O-At)*st|0,l[wt++]=255}}function fr(c,t,s){let i=t.lr,h=t.ur,n,e;switch(t.j){case ee:let r=t.e0,o=Math.It(i.t/r)-1,a=r-1;for(n=0;n<o;n++){let l=n*r;for(let u=0;u<a;u++,l++)Gi(c,s,i[l],i[l+1],i[l+r],h[l],h[l+1],h[l+r]),Gi(c,s,i[l+r+1],i[l+1],i[l+r],h[l+r+1],h[l+1],h[l+r])}break;case Ge:for(n=0,e=i.t;n<e;n+=3)Gi(c,s,i[n],i[n+1],i[n+2],h[n],h[n+1],h[n+2]);break;default:throw new Error("illegal figure")}}var Mh=class extends ps{constructor(t){super(),this.kv=t[2],this.Xu=t[3],this.xv=t[4],this.M0=t[5],this.g0=t[6],this.vv=t[7],this.pi=null}Nv(t,s,i){let h=Math.It(this.M0[0]),n=Math.It(this.M0[1]),e=Math.dt(this.M0[2])-h,r=Math.dt(this.M0[3])-n,o=Math.D(Math.dt(Math.H(e*t[0]*1.1)),3e3),a=Math.D(Math.dt(Math.H(r*t[1]*1.1)),3e3),l=e/o,u=r/a,f={lr:this.kv,ur:this.Xu,Ct:-h,Tt:-n,wr:1/l,pr:1/u},d=o+4,w=a+4,A=i.gi("mesh",d,w),g=A.Ps,p=g.$2(o,a);if(s){let m=p.s;for(let b=0,y=m.t;b<y;b+=4)m[b]=s[0],m[b+1]=s[1],m[b+2]=s[2],m[b+3]=255}for(let m of this.xv)fr(p,m,f);return g.Uc(p,2,2),{O:A.O,Ct:h-2*l,Tt:n-2*u,wr:l,pr:u}}p0(){return!0}Wh(t,s,i,h){bh(t,this.g0);let n=new Float32Array(2);if(h===es)E.In(z(t),n);else if(this.pi){E.In(this.pi,n);let[r,o]=n;E.In(s.mi,n),n[0]*=r,n[1]*=o}else E.In(s.mi,n);let e=this.Nv(n,h===es?null:this.vv,s._s);return h!==es&&(t.fs(...s.mi),this.pi&&t.I(...this.pi)),t.Js(e.Ct,e.Tt),t.J(e.wr,e.pr),t.YA(e.O,"no-repeat")}},$h=class extends ps{Wh(){return"hotpink"}},dr=1,Ar=2,kh=class c{static Ev=3e3;constructor(t,s,i,h){this.L=t[1],this.ds=t[2],this.pi=t[3],this.Dt=t[4],this.Cv=t[5],this.Tv=t[6],this.Ov=t[7],this.Lv=t[8],this.u=s,this.Iv=i,this.mi=h}Uv(t,s){let{Dt:i,ds:h,Ov:n,Lv:e,L:r,Iv:o}=this,{Cv:a,Tv:l}=this;a=Math.H(a),l=Math.H(l),Ni("TilingType: "+e);let u=i[0],f=i[1],d=i[2],w=i[3],A=d-u,g=w-f,p=new Float32Array(2);E.In(this.pi,p);let[m,b]=p;E.In(this.mi,p);let y=m*p[0],M=b*p[1],$=A,k=g,x=!1,v=!1,T=Math.dt(a*y),C=Math.dt(l*M);T>=Math.dt(A*y)?$=a:x=!0,C>=Math.dt(g*M)?k=l:v=!0;let F=this.$0($,this.u.O.i,y),j=this.$0(k,this.u.O.n,M),P=t._s.gi("pattern",F.rt,j.rt),_=P.Ps,S=o.Dv(_,s);if(S.Dc=t.Dc,this.Rv(S,n,r),_.Js(-F.J*u,-j.J*f),S.I(0,F.J,0,0,j.J,0,0),_.q(),S.v?.q(),this.Bv(S,u,f,d,w),S.mi=z(S.u),S.XA(h),S.Rc(),S.v?.V(),_.V(),x||v){let O=P.O;x&&($=a),v&&(k=l);let L=this.$0($,this.u.O.i,y),ft=this.$0(k,this.u.O.n,M),dt=L.rt,At=ft.rt,it=t._s.gi("pattern-workaround",dt,At),st=it.Ps,St=x?Math.It(A/a):0,vt=v?Math.It(g/l):0;for(let wt=0;wt<=St;wt++)for(let X=0;X<=vt;X++)st.hs(O,dt*wt,At*X,dt,At,0,0,dt,At);return{O:it.O,wr:L.J,pr:ft.J,Ct:u,Tt:f}}return{O:P.O,wr:F.J,pr:j.J,Ct:u,Tt:f}}$0(t,s,i){let h=Math.B(c.Ev,s),n=Math.dt(t*i);return n>=h?n=h:i=n/t,{J:i,rt:n}}Bv(t,s,i,h,n){let e=h-s,r=n-i;t.u.E(s,i,e,r),E.nn([s,i,h,n],z(t.u),t.T.gr),t.fi(),t.ka()}Rv(t,s,i){let h=t.u,n=t.T;switch(s){case dr:let{Vt:e,le:r}=this.u;h.Vt=n.qn=e,h.le=n.mr=r;break;case Ar:h.Vt=h.le=i,n.qn=n.mr=i;break;default:throw new Qi(`Unsupported paint type: ${s}`)}}p0(){return!1}Wh(t,s,i,h,n){let e=i;h!==es&&(e=E.I(e,s.mi),this.pi&&(e=E.I(e,this.pi)));let r=this.Uv(s,n),o=new DOMMatrix(e);o=o.Js(r.Ct,r.Tt),o=o.J(1/r.wr,1/r.pr);let a=t.YA(r.O,"repeat");return a.fs(o),a}};function wr({io:c,KA:t=0,_A:s,i,n:h,Fv:n=4294967295,OT:e=!1}){let r=tt.mg?4278190080:255,[o,a]=e?[n,r]:[r,n],l=i>>3,u=7&i,f=c.t;s=new Uint32Array(s._);let d=0;for(let w=0;w<h;w++){for(let g=t+l;t<g;t++){let p=t<f?c[t]:255;s[d++]=128&p?a:o,s[d++]=64&p?a:o,s[d++]=32&p?a:o,s[d++]=16&p?a:o,s[d++]=8&p?a:o,s[d++]=4&p?a:o,s[d++]=2&p?a:o,s[d++]=1&p?a:o}if(u===0)continue;let A=t<f?c[t++]:255;for(let g=0;g<u;g++)s[d++]=A&1<<7-g?a:o}return{KA:t,LT:d}}var ot=16,Hi=new DOMMatrix,at=new Float32Array(2),Vt=new Float32Array([1/0,1/0,-1/0,-1/0]),xh=class{constructor(t){this.ci=t,this.To=Object.X(null)}gi(t,s,i){let h;return this.To[t]!==void 0?(h=this.To[t],this.ci.Ou(h,s,i)):(h=this.ci.X(s,i),this.To[t]=h),h}it(t){delete this.To[t]}tt(){for(let t in this.To){let s=this.To[t];this.ci.K(s),delete this.To[t]}}};function Fs(c,t,s,i,h,n,e,r,o,a){let[l,u,f,d,w,A]=z(c);if(u===0&&f===0){let g=e*l+w,p=Math.At(g),m=r*d+A,b=Math.At(m),y=(e+o)*l+w,M=Math.H(Math.At(y)-p)||1,$=(r+a)*d+A,k=Math.H(Math.At($)-b)||1;return c.fs(Math.tw(l),0,0,Math.tw(d),p,b),c.hs(t,s,i,h,n,0,0,M,k),c.fs(l,u,f,d,w,A),[M,k]}if(l===0&&d===0){let g=r*f+w,p=Math.At(g),m=e*u+A,b=Math.At(m),y=(r+a)*f+w,M=Math.H(Math.At(y)-p)||1,$=(e+o)*u+A,k=Math.H(Math.At($)-b)||1;return c.fs(0,Math.tw(u),Math.tw(f),0,p,b),c.hs(t,s,i,h,n,0,0,k,M),c.fs(l,u,f,d,w,A),[k,M]}return c.hs(t,s,i,h,n,e,r,o,a),[Math.ei(l,u)*o,Math.ei(f,d)*a]}var oi=class{IT=!1;os=0;sw=1;Bc=null;iw=1;Sh=Wi;k2=0;A=0;f=0;hw=0;nw=0;ew=0;rw=0;ow=1;Fc=Ps;cw=0;qn="#000000";mr="#000000";Ne=!1;Ol=!1;jc=1;x2=1;si=1;Oo=null;Ll="none";constructor(t,s,i){i?.(this),this.Sc=new Float32Array([0,0,t,s]),this.gr=Vt.z()}Dn(){let t=Object.X(this);return t.Sc=this.Sc.z(),t.gr=this.gr.z(),t}v2(t=It,s=null){let i=this.gr.z();if(t===ns){s||G("Stroke bounding box must include transform."),E.In(s,at);let h=at[0]*this.si/2,n=at[1]*this.si/2;i[0]-=h,i[1]-=n,i[2]+=h,i[3]+=n}return i}jv(){let t=E.Ca(this.Sc,this.v2());this.aw(t||[0,0,0,0])}Sv(){return this.gr[0]===1/0}aw(t){this.Sc.y(t,0),this.gr.y(Vt,0)}y0(t=It,s=null){return E.Ca(this.Sc,this.v2(t,s))}};function te(c,t){if(t instanceof ImageData){c.Uc(t,0,0);return}let s=t.n,i=t.i,h=s%ot,n=(s-h)/ot,e=h===0?n:n+1,r=c.$2(i,ot),o,a=0,l=t.s,u=r.s,f,d,w,A;if(t.lw===Gs.jM){let g=l.Ts,p=new Uint32Array(u._,0,u.Ts>>2),m=p.t,b=i+7>>3,y=4294967295,M=tt.mg?4278190080:255;for(f=0;f<e;f++){for(w=f<n?ot:h,o=0,d=0;d<w;d++){let $=g-a,k=0,x=$>b?i:8*$-7,v=-8&x,T=0,C=0;for(;k<v;k+=8)C=l[a++],p[o++]=128&C?y:M,p[o++]=64&C?y:M,p[o++]=32&C?y:M,p[o++]=16&C?y:M,p[o++]=8&C?y:M,p[o++]=4&C?y:M,p[o++]=2&C?y:M,p[o++]=1&C?y:M;for(;k<x;k++)T===0&&(C=l[a++],T=128),p[o++]=C&T?y:M,T>>=1}for(;o<m;)p[o++]=0;c.Uc(r,0,f*ot)}}else if(t.lw===Gs.PM){for(d=0,A=i*ot*4,f=0;f<n;f++)u.y(l.gs(a,a+A)),a+=A,c.Uc(r,0,d),d+=ot;f<e&&(A=i*h*4,u.y(l.gs(a,a+A)),c.Uc(r,0,d))}else{if(t.lw!==Gs.SM)throw new Error(`bad image kind: ${t.lw}`);for(w=ot,A=i*w,f=0;f<e;f++){for(f>=n&&(w=h,A=i*w),o=0,d=A;d--;)u[o++]=l[a++],u[o++]=l[a++],u[o++]=l[a++],u[o++]=255;c.Uc(r,0,f*ot)}}}function se(c,t){if(t.Ot){c.hs(t.Ot,0,0);return}let s=t.n,i=t.i,h=s%ot,n=(s-h)/ot,e=h===0?n:n+1,r=c.$2(i,ot),o=0,a=t.s,l=r.s;for(let u=0;u<e;u++){let f=u<n?ot:h;({KA:o}=wr({io:a,KA:o,_A:l,i,n:f,Fv:0})),c.Uc(r,0,u*ot)}}function _t(c,t){let s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let i of s)c[i]!==void 0&&(t[i]=c[i]);c.Pc!==void 0&&(t.Pc(c.Pv()),t.k0=c.k0)}function js(c){c.le=c.Vt="#000000",c.UT="nonzero",c.Tn=1,c.si=1,c.Gv="butt",c.Hv="miter",c.Wv=10,c.br="source-over",c.Cn="10px sans-serif",c.Pc!==void 0&&(c.Pc([]),c.k0=0);let{Kt:t}=c;t!=="none"&&t!==""&&(c.Kt="none")}function ie(c,t){if(t)return!0;E.In(c,at);let s=Math.Qv(kt.lc*Tt.Oa);return at[0]<=s&&at[1]<=s}var pr=["butt","round","square"],gr=["miter","round","bevel"],mr={},he={},zt=class c{constructor(t,s,i,h,n,{Lo:e,Ee:r=null},o,a,l){this.u=t,this.T=new oi(this.u.O.i,this.u.O.n),this.x0=[],this.yr=null,this.Il=!1,this.DT=null,this.RT=null,this.Ls=s,this.sh=i,this.ci=h,this.Bs=n,this.N2=[],this.mi=null,this.E2=[],this.Dc=0,this.C2=[],this.Vv=0,this.uw=null,this.bn=null,this.Zs=!0,this.Ee=r||[],this.Lo=e,this._s=new xh(this.ci),this.v0=new Map,this.Ce=o,this.T2=1,this.O2=1,this.L2=1,this.Mr=a,this.$r=[-1,0],this.Io=null,this.N0=new Map,this.v=l??null}Gc(t,s,i=null){return typeof s=="string"?(this.v?.qA(t,s),s.sn("g_")?this.Ls.m(s):this.sh.m(s)):i}zv({I:t,ct:s,E0:i=!1,pc:h=null}){let n=this.u.O.i,e=this.u.O.n,r=this.u.Vt;if(this.u.Vt=h||"#ffffff",this.u.ui(0,0,n,e),this.u.Vt=r,i){let o=this._s.gi("transparent",n,e);this.I2=this.u,this.fw=o.O,this.u=o.Ps,this.u.q(),this.u.I(...z(this.I2))}this.u.q(),js(this.u),t&&(this.u.I(...t),this.O2=t[0],this.L2=t[0]),this.u.I(...s.I),this.T2=s.J,this.mi=z(this.u)}XA(t,s,i,h,n){let e=t.Ul,r=t.Dl,o=s||0,a=e.t;if(a===o)return o;let l=a-o>10&&typeof i=="function",u=l?Date.ac()+15:0,f=0,d=this.Ls,w=this.sh,A,g;for(;;){if(h!==void 0&&o===h.Jv)return h.BT(o,i),o;if(!n||n(o))if(A=r[o],g=e[o]??null,A!==cs.s$)g===null?this[A](o):this[A](o,...g);else for(let p of g){this.v?.g2(p,o);let m=p.sn("g_")?d:w;if(!m.ht(p))return m.m(p,i),o}if(o++,o===a)return o;if(l&&++f>10){if(Date.ac()>u)return i(),o;f=0}}}#t(){for(;this.x0.t||this.kr;)this.V();this.T.Oo=null,this.u.V(),this.fw&&(this.u=this.I2,this.u.q(),this.u.fs(1,0,0,1,0,0),this.u.hs(this.fw,0,0),this.u.V(),this.fw=null)}Rc(){this.#t(),this._s.tt(),this.v0.tt();for(let t of this.N0.W()){for(let s of t.W())typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&(s.i=s.n=0);t.tt()}this.N0.tt(),this.#s()}#s(){if(this.Mr){let t=this.Bs.wd(this.Mr.A3,this.Mr.pc);if(t!=="none"){let s=this.u.Kt;this.u.Kt=t,this.u.hs(this.u.O,0,0),this.u.Kt=s}}}U2(t,s){let i=t.i??t.FT,h=t.n??t.jT,n,e,r=Math.B(Math.ei(s[0],s[1]),1),o=Math.B(Math.ei(s[2],s[3]),1),a=i,l=h,u="prescale1";for(;r>2&&a>1||o>2&&l>1;){let f=a,d=l;r>2&&a>1&&(f=a>=16384?Math.It(a/2)-1||1:Math.dt(a/2),r/=a/f),o>2&&l>1&&(d=l>=16384?Math.It(l/2)-1||1:Math.dt(l)/2,o/=l/d),n=this._s.gi(u,f,d),e=n.Ps,e.M2(0,0,f,d),e.hs(t,0,0,a,l,0,0,f,d),t=n.O,a=f,l=d,u=u==="prescale1"?"prescale2":"prescale1"}return{D2:t,qv:a,Zv:l}}R2(t,s){let i=this.u,{i:h,n}=s,e=this.T.qn,r=this.T.Ne,o=z(i),a,l,u,f;if((s.Ot||s.s)&&s.B2>1){let T=s.Ot||s.s._;l=JSON.Ke(r?o:[o.z(0,4),e]),a=this.N0.m(T),a||(a=new Map,this.N0.y(T,a));let C=a.m(l);if(C&&!r){let F=Math.At(Math.D(o[0],o[2])+o[4]),j=Math.At(Math.D(o[1],o[3])+o[5]);return this.v?.wi(t,Pi),{O:C,Ct:F,Tt:j}}u=C}u||(f=this._s.gi("maskCanvas",h,n),se(f.Ps,s));let d=E.I(o,[1/h,0,0,-1/n,0,0]);d=E.I(d,[1,0,0,1,0,-n]);let w=Vt.z();E.nn([0,0,h,n],d,w);let[A,g,p,m]=w,b=Math.At(p-A)||1,y=Math.At(m-g)||1,M=this._s.gi("fillCanvas",b,y),$=M.Ps,k=A,x=g;$.Js(-k,-x),$.I(...d),u||(u=this.U2(f.O,mt($)),u=u.D2,a&&r&&a.y(l,u)),$.F2=ie(z($),s.Yv),Fs($,u,0,0,u.i,u.n,0,0,h,n),$.br="source-in";let v=E.I(mt($),[1,0,0,1,-k,-x]);return $.Vt=r?e.Wh(i,this,v,It,t):e,$.ui(0,0,h,n),a&&!r&&(this._s.it("fillCanvas"),a.y(l,M.O)),this.v?.wi(t,Pi),{O:M.O,Ct:Math.At(k),Tt:Math.At(x)}}eg(t,s){this.v?._t("lineWidth",t),s!==this.T.si&&(this.$r[0]=-1),this.T.si=s,this.u.si=s}rg(t,s){this.v?._t("lineCap",t),this.u.Gv=pr[s]}og(t,s){this.v?._t("lineJoin",t),this.u.Hv=gr[s]}cg(t,s){this.v?._t("miterLimit",t),this.u.Wv=s}ag(t,s,i){this.v?._t("dash",t);let h=this.u;h.Pc!==void 0&&(h.Pc(s),h.k0=i)}lg(t,s){}ug(t,s){}F1(t,s){for(let[i,h]of s)switch(i){case"LW":this.eg(t,h);break;case"LC":this.rg(t,h);break;case"LJ":this.og(t,h);break;case"ML":this.cg(t,h);break;case"D":this.ag(t,h[0],h[1]);break;case"RI":this.lg(t,h);break;case"FL":this.ug(t,h);break;case"Font":this.dg(t,h[0],h[1]);break;case"CA":this.v?._t("strokeAlpha",t),this.T.x2=h;break;case"ca":this.v?._t("fillAlpha",t),this.u.Tn=this.T.jc=h;break;case"BM":this.v?._t("globalCompositeOperation",t),this.u.br=h;break;case"SMask":this.v?._t("SMask",t),this.T.Oo=h?this.uw:null,this.uw=null,this.j2();break;case"TR":this.v?._t("filter",t),this.u.Kt=this.T.Ll=this.Bs.l2(h)}}get kr(){return!!this.bn}j2(){let t=this.kr;this.T.Oo&&!t?this.Xv():!this.T.Oo&&t&&this.dw()}Xv(t){if(this.kr)throw new Error("beginSMaskMode called while already in smask mode");let s=this.u.O.i,i=this.u.O.n,h="smaskGroupAt"+this.Dc,n=this._s.gi(h,s,i);this.bn=this.u;let e=this.u=n.Ps;e.fs(this.bn.oh()),_t(this.bn,e),(function(o,a){if(o.Aw)throw new Error("Context is already forwarding operations.");o.S2=o.q,o.P2=o.V,o.G2=o.Oi,o.H2=o.J,o.W2=o.Js,o.Q2=o.I,o.V2=o.fs,o.z2=o.ww,o.J2=o.fi,o.q2=o.Pr,o.Z2=o.Gr,o.Y2=o.zu,o.X2=o.E,o.K2=o.Wr,o._2=o.Sr,o.Aw=()=>{o.q=o.S2,o.V=o.P2,o.Oi=o.G2,o.J=o.H2,o.Js=o.W2,o.I=o.Q2,o.fs=o.V2,o.ww=o.z2,o.fi=o.J2,o.Pr=o.q2,o.Gr=o.Z2,o.zu=o.Y2,o.E=o.X2,o.Wr=o.K2,o.Sr=o._2,delete o.Aw},o.q=function(){a.q(),this.S2()},o.V=function(){a.V(),this.P2()},o.Js=function(l,u){a.Js(l,u),this.W2(l,u)},o.J=function(l,u){a.J(l,u),this.H2(l,u)},o.I=function(l,u,f,d,w,A){a.I(l,u,f,d,w,A),this.Q2(l,u,f,d,w,A)},o.fs=function(l,u,f,d,w,A){a.fs(l,u,f,d,w,A),this.V2(l,u,f,d,w,A)},o.ww=function(){a.ww(),this.z2()},o.Oi=function(l){a.Oi(l),this.G2(l)},o.fi=function(l){a.fi(l),this.J2(l)},o.Pr=function(l,u){a.Pr(l,u),this.q2(l,u)},o.Gr=function(l,u){a.Gr(l,u),this.Z2(l,u)},o.zu=function(l,u,f,d,w,A){a.zu(l,u,f,d,w,A),this.Y2(l,u,f,d,w,A)},o.E=function(l,u,f,d){a.E(l,u,f,d),this.X2(l,u,f,d)},o.Wr=function(){a.Wr(),this.K2()},o.Sr=function(){a.Sr(),this._2()}})(e,this.bn),this.F1(t,[["BM","source-over"]])}dw(){if(!this.kr)throw new Error("endSMaskMode called while not in smask mode");this.u.Aw(),_t(this.u,this.bn),this.u=this.bn,this.bn=null}yn(t){if(!this.T.Oo)return;t?(t[0]=Math.It(t[0]),t[1]=Math.It(t[1]),t[2]=Math.dt(t[2]),t[3]=Math.dt(t[3])):t=[0,0,this.u.O.i,this.u.O.n];let s=this.T.Oo,i=this.bn;this.Kv(i,s,this.u,t),this.u.q(),this.u.fs(1,0,0,1,0,0),this.u.M2(0,0,this.u.O.i,this.u.O.n),this.u.V()}Kv(t,s,i,h){let n=h[0],e=h[1],r=h[2]-n,o=h[3]-e;r!==0&&o!==0&&(this._v(s.Ps,i,r,o,s.tb,s.sb,s.ib,n,e,s.Ct,s.Tt),t.q(),t.Tn=1,t.br="source-over",t.fs(1,0,0,1,0,0),t.hs(i.O,0,0),t.V())}_v(t,s,i,h,n,e,r,o,a,l,u){let f=t.O,d=o-l,w=a-u;if(e)if(d<0||w<0||d+i>f.i||w+h>f.n){let g=this._s.gi("maskExtension",i,h),p=g.Ps;p.hs(f,-d,-w),p.br="destination-atop",p.Vt=e,p.ui(0,0,i,h),p.br="source-over",f=g.O,d=w=0}else{t.q(),t.Tn=1,t.fs(1,0,0,1,0,0);let g=new Path2D;g.E(d,w,i,h),t.fi(g),t.br="destination-atop",t.Vt=e,t.ui(d,w,i,h),t.V()}s.q(),s.Tn=1,s.fs(1,0,0,1,0,0),n==="Alpha"&&r?s.Kt=this.Bs.u2(r):n==="Luminosity"&&(s.Kt=this.Bs.f2(r));let A=new Path2D;A.E(o,a,i,h),s.fi(A),s.br="destination-in",s.hs(f,d,w,i,h,o,a,i,h),s.V()}q(t){this.kr&&_t(this.u,this.bn),this.u.q();let s=this.T;this.x0.r(s),this.T=s.Dn(),this.v?.q(t)}V(t){this.v?.V(t),this.x0.t!==0?(this.T=this.x0.kh(),this.u.V(),this.kr&&_t(this.bn,this.u),this.j2(),this.yr=null,this.$r[0]=-1,this.Io=null):this.kr&&this.dw()}I(t,s,i,h,n,e,r){this.v?.Ar("transform",t),this.u.I(s,i,h,n,e,r),this.$r[0]=-1,this.Io=null}V$(t,s,i,h){let[n]=i;if(h){if(this.v!==null){let e=s===cs.$i?this.T.si/2:0;this.v.mn(t).th(t,this.u,h[0]-e,h[2]+e,h[1]-e,h[3]+e).wi(t,["transform"])}n instanceof Path2D||(n=i[0]=de(n)),E.nn(h,z(this.u),this.T.gr),this[s](t,n),this.ST=t}else n||=i[0]=new Path2D,this[s](t,n)}Wr(t){this.u.Wr()}$i(t,s,i=!0){let h=this.u,n=this.T.mr;if(h.Tn=this.T.x2,this.Zs)if(typeof n=="object"&&n?.Wh){let e=n.p0()?h.oh():null;if(h.q(),h.le=n.Wh(h,this,mt(h),ns,t),e){let r=new Path2D;r.Rl(s,h.oh().Vu().hb(e)),s=r}this.nb(s,!1),h.V()}else this.nb(s,!0);this.v?.wi(t,_n),i&&this.C0(t,s,this.T.y0(ns,z(this.u))),h.Tn=this.T.jc}i$(t,s){this.$i(t,s)}as(t,s,i=!0){let h=this.u,n=this.T.qn,e=!1;if(this.T.Ne){let o=n.p0()?h.oh():null;if(this.v?.q(t),h.q(),h.Vt=n.Wh(h,this,mt(h),It,t),o){let a=new Path2D;a.Rl(s,h.oh().Vu().hb(o)),s=a}e=!0}let r=this.T.y0();this.Zs&&r!==null&&(this.Il?(h.as(s,"evenodd"),this.Il=!1):h.as(s)),this.v?.wi(t,Si),e&&(h.V(),this.v?.V(t)),i&&this.C0(t,s,r)}h$(t,s){this.Il=!0,this.as(t,s)}Uu(t,s){this.as(t,s,!1),this.$i(t,s,!1),this.C0(t,s)}n$(t,s){this.Il=!0,this.Uu(t,s)}e$(t,s){this.Uu(t,s)}r$(t,s){this.Il=!0,this.Uu(t,s)}ka(t,s){this.C0(t,s)}q$(t,s){this.u.as(s),this.v?.wi(t,ar).dh(t)}fi(t){this.v?.Jn("clipMode",t),this.yr=mr}o$(t){this.v?.Jn("clipMode",t),this.yr=he}c$(t){this.T.Bc=null,this.T.iw=1,this.T.A=this.T.hw=0,this.T.f=this.T.nw=0,this.v?.w2(t).Ic("sameLineText").Ic("moveText",t)}a$(t){let s=this.eb,i=this.u;if(this.v){let{v:h}=this;s!==void 0&&h.Jn("textClip",h.BA()).Jn("textClip",t),h.p2(t)}if(s!==void 0){let h=new Path2D,n=i.oh().Vu();for(let{I:e,A:r,f:o,os:a,ts:l}of s)l&&h.Rl(l,new DOMMatrix(e).PT(n).Js(r,o).J(a,-a));i.fi(h)}delete this.eb}l$(t,s){this.v?._t("charSpacing",t),this.T.ew=s}u$(t,s){this.v?._t("wordSpacing",t),this.T.rw=s}f$(t,s){this.v?._t("hScale",t),this.T.ow=s/100}fg(t,s){this.v?._t("leading",t),this.T.k2=-s}dg(t,s,i){this.v?._t("font",t).SA("fontObj",s,t);let h=this.Ls.m(s),n=this.T;if(!h)throw new Error(`Can't find font for ${s}`);if(n.Sh=h.Sh||Wi,n.Sh[0]!==0&&n.Sh[3]!==0||I("Invalid font matrix for font "+s),i<0?(i=-i,n.pw=-1):n.pw=1,this.T.Cn=h,this.T.os=i,h.t0)return;let e=h.zn||"sans-serif",r=h.cr?.cv||`"${e}", ${h.xA}`,o="normal";h.bA?o="900":h.yA&&(o="bold");let a=h.$A?"italic":"normal",l=i;i<16?l=16:i>100&&(l=100),this.T.sw=i/l,this.u.Cn=`${a} ${o} ${l}px ${r}`}d$(t,s){this.v?._t("textRenderingMode",t),this.T.Fc=s}A$(t,s){this.v?._t("textRise",t),this.T.cw=s}hc(t,s,i){this.v?.Ic("sameLineText").Ar("moveText",t),this.T.A=this.T.hw+=s,this.T.f=this.T.nw+=i}w$(t,s,i){this.fg(t,-i),this.hc(t,s,i)}p$(t,s){this.v?.Ic("sameLineText")._t("textMatrix",t);let{T:i}=this;i.Bc=s,i.iw=Math.ei(s[0],s[1]),i.A=i.hw=0,i.f=i.nw=0}g$(t){this.hc(t,0,this.T.k2),this.v?.Ar("moveText",this.v.zA("leading")??t)}#h(t,s,i){let h=new Path2D;return h.Rl(t,new DOMMatrix(i).Vu().hb(s)),h}rb(t,s,i,h,n,e){let r=this.u,o=this.T,a=o.Cn,l=o.Fc,u=o.os/o.sw,f=l&Rn,d=!!(l&Bn),w=o.Ne&&!a.ko,A=o.Ol&&!a.ko,g;if((a.jh||d||w||A)&&!a.ko&&(g=a.ev(this.Ls,s)),g&&(a.jh||w||A)){r.q(),r.Js(i,h),r.J(u,-u),this.v?.Co(t,r,a);let p;if(f===Ps||f===Kt)if(n){p=r.oh(),r.fs(...n);let m=this.#h(g,p,n);r.as(m)}else r.as(g);if(f===Di||f===Kt)if(e){p||=r.oh(),r.fs(...e);let{Vr:m,nc:b,ec:y,zt:M}=p,$=E.ik(e),k=E.I([m,b,y,M,0,0],$);E.In(k,at),r.si*=Math.B(at[0],at[1])/u,r.$i(this.#h(g,p,e))}else r.si/=u,r.$i(g);r.V()}else(f===Ps||f===Kt)&&(r.Ko(s,i,h),this.v?.Co(t,r,a,u,i,h,()=>r.Uo(s))),(f===Di||f===Kt)&&(this.v&&this.v?.Co(t,r,a,u,i,h,()=>r.Uo(s)).wi(t,_n),r.GT(s,i,h));d&&((this.eb||=[]).r({I:z(r),A:i,f:h,os:u,ts:g}),this.v?.Co(t,r,a,u,i,h))}get tN(){let{Ps:t}=this._s.gi("isFontSubpixelAAEnabled",10,10);t.J(1.5,1),t.Ko("I",0,10);let s=t.Fa(0,0,10,10).s,i=!1;for(let h=3;h<s.t;h+=4)if(s[h]>0&&s[h]<255){i=!0;break}return D(this,"isFontSubpixelAAEnabled",i)}m$(t,s){this.v&&(this.v.wi(t,lr).mn(t),this.T.Fc&Bn&&this.v.Jn("textClip",t).GA());let i=this.T,h=i.Cn;if(h.t0){this.sN(t,s),this.v?.Tl(t);return}let n=i.os;if(n===0){this.v?.dh(t);return}let e=this.u,r=i.sw,o=i.ew,a=i.rw,l=i.pw,u=i.ow*l,f=s.t,d=h.Nc,w=d?1:-1,A=h.xl,g=n*i.Sh[0],p=i.Fc===Ps&&!h.jh&&!i.Ne;e.q(),i.Bc&&e.I(...i.Bc),e.Js(i.A,i.f+i.cw),l>0?e.J(u,-1):e.J(u,1);let m,b;if(i.Ne){e.q();let x=i.qn.Wh(e,this,mt(e),It,t);m=z(e),e.V(),e.Vt=x}if(i.Ol){e.q();let x=i.mr.Wh(e,this,mt(e),ns,t);b=z(e),e.V(),e.le=x}let y=i.si,M=i.iw;if(M===0||y===0){let x=i.Fc&Rn;x!==Di&&x!==Kt||(y=this.iN())}else y/=M;if(r!==1&&(e.J(r,r),y/=r),e.si=y,h.MA){let x=[],v=0;for(let C of s)x.r(C.HT),v+=C.i;let T=x.et("");if(e.Ko(T,0,0),this.v!==null){let C=e.Uo(T);this.v.th(t,this.u,-C.HA,C.WA,-C.QA,C.VA).Tl(t)}i.A+=v*g*u,e.V(),this.yn();return}let $,k=0;for($=0;$<f;++$){let x=s[$];if(typeof x=="number"){k+=w*x*n/1e3;continue}let v=!1,T=(x.hN?a:0)+o,C=x.nN,F=x.WT,j,P,_,S=x.i;if(d){let O=x.eN||A,L=-(x.eN?O[1]:.5*S)*g,ft=O[2]*g;S=O?-O[0]:S,j=L/r,P=(k+ft)/r}else j=k/r,P=0;if(h.kA&&S>0){_=e.Uo(C);let O=1e3*_.i/n*r;if(S<O&&this.tN){let L=S/O;v=!0,e.q(),e.J(L,1),j/=L}else S!==O&&(j+=(S-O)/2e3*n/r)}if(this.Zs&&(x.QT||h.ko)){if(p&&!F)e.Ko(C,j,P),this.v?.Co(t,e,_?{Dt:null}:h,n/r,j,P,()=>_??e.Uo(C));else if(this.rb(t,C,j,P,m,b),F){let O=j+n*F.rN.A/r,L=P-n*F.rN.f/r;this.rb(t,F.nN,O,L,m,b)}}k+=d?S*g-T*l:S*g+T*l,v&&e.V()}d?i.f-=k:i.A+=k*u,e.V(),this.yn(),this.v?.Tl(t)}sN(t,s){let i=this.u,h=this.T,n=h.Cn,e=h.os,r=h.pw,o=n.Nc?1:-1,a=h.ew,l=h.rw,u=h.ow*r,f=h.Sh||Wi,d=s.t,w,A,g,p;if(h.Fc===He||e===0)return;this.$r[0]=-1,this.Io=null,i.q(),h.Bc&&i.I(...h.Bc),i.Js(h.A,h.f+h.cw),i.J(u,r);let m=this.v;for(this.v=m?new ri(m,t):null,w=0;w<d;++w){if(A=s[w],typeof A=="number"){p=o*A*e/1e3,this.u.Js(p,0),h.A+=p*u;continue}let b=(A.hN?l:0)+a,y=n.e2[A.oN];y?this.Zs&&(this.q(),i.J(e,e),i.I(...f),this.XA(y),this.V()):I(`Type3 character "${A.oN}" is not available.`);let M=[A.i,0];E.ju(M,f),g=M[0]*e+b,i.Js(g,0),h.A+=g*u}i.V(),m&&(this.v=m)}b$(t,s,i){}y$(t,s,i,h,n,e,r){let o=new Path2D;o.E(h,n,e-h,r-n),this.u.fi(o),this.v?.th(t,this.u,h,e,n,r).A0(t,this.u,h,e,n,r),this.ka(t)}ob(t,s){let i;if(s[0]==="TilingPattern"){let h=this.mi||z(this.u),n={Dv:(e,r)=>new c(e,this.Ls,this.sh,this.ci,this.Bs,{Lo:this.Lo,Ee:this.Ee},void 0,void 0,this.v?new ri(this.v,r,!0):null)};i=new kh(s,this.u,n,h)}else i=this.cb(t,s[1],s[2]);return i}M$(t,...s){this.v?._t("strokeColor",t),this.T.mr=this.ob(t,s),this.T.Ol=!0}$$(t,...s){this.v?._t("fillColor",t),this.T.qn=this.ob(t,s),this.T.Ne=!0}k$(t,s){this.v?._t("strokeColor",t),this.u.le=this.T.mr=s,this.T.Ol=!1}z$(t){this.v?._t("strokeColor",t),this.u.le=this.T.mr="transparent",this.T.Ol=!1}x$(t,s){this.v?._t("fillColor",t),this.u.Vt=this.T.qn=s,this.T.Ne=!1}J$(t){this.v?._t("fillColor",t),this.u.Vt=this.T.qn="transparent",this.T.Ne=!1}cb(t,s,i=null){let h;return this.v0.ht(s)?h=this.v0.m(s):(h=(function(e){switch(e[0]){case"RadialAxial":return new yh(e);case"Mesh":return new Mh(e);case"Dummy":return new $h}throw new Error(`Unknown IR type: ${e[0]}`)})(this.Gc(t,s)),this.v0.y(s,h)),i&&(h.pi=i),h}v$(t,s){if(!this.Zs)return;let i=this.u;this.q(t);let h=this.cb(t,s);i.Vt=h.Wh(i,this,mt(i),es,t);let n=mt(i);if(n){let{i:e,n:r}=i.O,o=Vt.z();E.nn([0,0,e,r],n,o);let[a,l,u,f]=o;this.u.ui(a,l,u-a,f-l)}else this.u.ui(-1e10,-1e10,2e10,2e10);this.v?.mn(t).w0(t).wi(t,ur).wi(t,Si).dh(t),this.yn(this.T.y0()),this.V(t)}N$(){G("Should not call beginInlineImage")}E$(){G("Should not call beginImageData")}U$(t,s,i){if(this.Zs&&(this.q(t),this.E2.r(this.mi),s&&this.I(t,...s),this.mi=z(this.u),i)){E.nn(i,this.mi,this.T.gr);let[h,n,e,r]=i,o=new Path2D;o.E(h,n,e-h,r-n),this.u.fi(o),this.v?.A0(t,this.u,h,e,n,r),this.ka(t)}}D$(t){this.Zs&&(this.V(t),this.mi=this.E2.kh())}R$(t,s){if(!this.Zs)return;this.q(t),this.kr&&(this.dw(),this.T.Oo=null);let i=this.u;s.VT||Ni("TODO: Support non-isolated groups."),s.zT&&I("Knockout groups not supported.");let h=z(i);if(s.pi&&i.I(...s.pi),!s.Dt)throw new Error("Bounding box is required.");let n=Vt.z();E.nn(s.Dt,z(i),n);let e=[0,0,i.O.i,i.O.n];n=E.Ca(n,e)||[0,0,0,0];let r=Math.It(n[0]),o=Math.It(n[1]),a=Math.B(Math.dt(n[2])-r,1),l=Math.B(Math.dt(n[3])-o,1);this.T.aw([0,0,a,l]);let u="groupAt"+this.Dc;s.Hc&&(u+="_smask_"+this.Vv++%2);let f=this._s.gi(u,a,l),d=f.Ps;d.Js(-r,-o),d.I(...h);let w=new Path2D,[A,g,p,m]=s.Dt;if(w.E(A,g,p-A,m-g),s.pi){let b=new Path2D;b.Rl(w,new DOMMatrix(s.pi)),w=b}d.fi(w),s.Hc&&this.C2.r({O:f.O,Ps:d,Ct:r,Tt:o,tb:s.Hc.tb,sb:s.Hc.sb,ib:s.Hc.ib||null,JT:null}),(!s.Hc||this.v)&&(i.fs(1,0,0,1,0,0),i.Js(r,o),i.q()),_t(i,d),this.u=d,this.v?.PA(["fillAlpha","strokeAlpha","globalCompositeOperation"]).FA(i),this.F1(t,[["BM","source-over"],["ca",1],["CA",1]]),this.N2.r(i),this.Dc++}B$(t,s){if(!this.Zs)return;this.Dc--;let i=this.u,h=this.N2.kh();if(this.u=h,this.u.F2=!1,this.v?.jA(),s.Hc)this.uw=this.C2.kh(),this.V(t),this.v&&this.u.V();else{this.u.V();let n=z(this.u);this.V(t),this.u.q(),this.u.fs(...n);let e=Vt.z();E.nn([0,0,i.O.i,i.O.n],n,e),this.u.hs(i.O,0,0),this.u.V(),this.yn(e)}}F$(t,s,i,h,n,e){if(this.#t(),js(this.u),this.u.q(),this.q(t),this.mi&&this.u.fs(...this.mi),i){let r=i[2]-i[0],o=i[3]-i[1];if(e&&this.Ce){(h=h.z())[4]-=i[0],h[5]-=i[1],(i=i.z())[0]=i[1]=0,i[2]=r,i[3]=o,E.In(z(this.u),at);let{T2:a}=this,l=Math.dt(r*this.O2*a),u=Math.dt(o*this.L2*a);this.Wc=this.ci.X(l,u);let{O:f,Ps:d}=this.Wc;this.Ce.y(s,f),this.Wc.ab=this.u,this.u=d,this.u.q(),this.u.fs(at[0],0,0,-at[1],0,o*at[1]),js(this.u)}else{js(this.u),this.ka(t);let a=new Path2D;a.E(i[0],i[1],r,o),this.u.fi(a)}}this.T=new oi(this.u.O.i,this.u.O.n),this.I(t,...h),this.I(t,...n)}j$(t){this.Wc&&(this.u.V(),this.#s(),this.u=this.Wc.ab,delete this.Wc.ab,delete this.Wc)}S$(t,s){if(!this.Zs)return;let i=s.B2;(s=this.Gc(t,s.s,s)).B2=i;let h=this.u,n=this.R2(t,s),e=n.O;h.q(),h.fs(1,0,0,1,0,0),h.hs(e,n.Ct,n.Tt),this.v?.mn(t).th(t,this.u,n.Ct,n.Ct+e.i,n.Tt,n.Tt+e.n).dh(t),h.V(),this.yn()}W$(t,s,i,h=0,n=0,e,r){if(!this.Zs)return;s=this.Gc(t,s.s,s);let o=this.u;o.q();let a=z(o);o.I(i,h,n,e,0,0);let l=this.R2(t,s);o.fs(1,0,0,1,l.Ct-a[4],l.Tt-a[5]),this.v?.mn(t);for(let u=0,f=r.t;u<f;u+=2){let d=E.I(a,[i,h,n,e,r[u],r[u+1]]);o.hs(l.O,d[4],d[5]),this.v?.th(t,this.u,d[4],d[4]+l.O.i,d[5],d[5]+l.O.n)}o.V(),this.yn(),this.v?.dh(t)}P$(t,s){if(!this.Zs)return;let i=this.u,h=this.T.qn,n=this.T.Ne;this.v?.mn(t).wi(t,Pi);for(let e of s){let{s:r,i:o,n:a,I:l}=e,u=this._s.gi("maskCanvas",o,a),f=u.Ps;f.q(),se(f,this.Gc(t,r,e)),f.br="source-in",f.Vt=n?h.Wh(f,this,mt(i),It,t):h,f.ui(0,0,o,a),f.V(),i.q(),i.I(...l),i.J(1,-1),Fs(i,u.O,0,0,o,a,0,-1,1,1),this.v?.th(t,i,0,o,0,a),i.V()}this.yn(),this.v?.dh(t)}G$(t,s){if(!this.Zs)return;let i=this.Gc(t,s);i?this.Ag(t,i):I("Dependent image isn't ready yet")}H$(t,s,i,h,n){if(!this.Zs)return;let e=this.Gc(t,s);if(!e){I("Dependent image isn't ready yet");return}let r=e.i,o=e.n,a=[];for(let l=0,u=n.t;l<u;l+=2)a.r({I:[i,0,0,h,n[l],n[l+1]],A:0,f:0,cN:r,aN:o});this.wg(t,e,a)}lb(t){return this.T.Ll!=="none"&&(t.Kt=this.T.Ll,t.hs(t.O,0,0),t.Kt="none"),t.O}lN(t){if(this.T.Ll==="none")return t.Ot;let{Ot:s,i,n:h}=t,n=this._s.gi("inlineImage",i,h),e=n.Ps;return e.Kt=this.T.Ll,e.hs(s,0,0),e.Kt="none",n.O}Ag(t,s){if(!this.Zs)return;let i=s.i,h=s.n,n=this.u;this.q(t);let{Kt:e}=n;e!=="none"&&e!==""&&(n.Kt="none"),n.J(1/i,-1/h);let r;if(s.Ot)r=this.lN(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.s)r=s;else{let a=this._s.gi("inlineImage",i,h).Ps;te(a,s),r=this.lb(a)}let o=this.U2(r,mt(n));n.F2=ie(z(n),s.Yv),this.v?.mn(t).th(t,n,0,i,-h,0).wi(t,cr).dh(t),Fs(n,o.D2,0,0,o.qv,o.Zv,0,-h,i,h),this.yn(),this.V(t)}wg(t,s,i){if(!this.Zs)return;let h=this.u,n;if(s.Ot)n=s.Ot;else{let e=s.i,r=s.n,o=this._s.gi("inlineImage",e,r).Ps;te(o,s),n=this.lb(o)}this.v?.mn(t);for(let e of i)h.q(),h.I(...e.I),h.J(1,-1),Fs(h,n,e.A,e.f,e.cN,e.aN,0,-1,1,1),this.v?.th(t,h,0,1,-1,0),h.V();this.v?.dh(t),this.yn()}Q$(t){this.Zs&&(this.v?.mn(t).th(t,this.u,0,1,0,1).wi(t,Si).dh(t),this.u.ui(0,0,1,1),this.yn())}C$(t,s){}T$(t,s,i){}xa(t,s){this.v?.xa(t),this.Ee.r({Qh:!0})}O$(t,s,i){this.v?.xa(t),s==="OC"?this.Ee.r({Qh:this.Lo.Bl(i)}):this.Ee.r({Qh:!0}),this.Zs=this.ub()}Du(t){this.v?.Du(t),this.Ee.kh(),this.Zs=this.ub()}L$(t){}I$(t){}C0(t,s,i){let h=this.T.Sv();this.yr&&this.T.jv(),this.yr||this.yn(i);let n=this.u;this.yr?(h||(this.yr===he?n.fi(s,"evenodd"):n.fi(s)),this.yr=null,this.v?.ZA(t).Jn("clipPath",t)):this.v?.dh(t),this.T.aw(this.T.Sc)}iN(){if(!this.Io){let t=z(this.u);if(t[1]===0&&t[2]===0)this.Io=1/Math.D(Math.H(t[0]),Math.H(t[3]));else{let s=Math.H(t[0]*t[3]-t[2]*t[1]),i=Math.ei(t[0],t[2]),h=Math.ei(t[1],t[3]);this.Io=Math.B(i,h)/s}}return this.Io}uN(){if(this.$r[0]===-1){let{si:t}=this.T,{Vr:s,nc:i,ec:h,zt:n}=this.u.oh(),e,r;if(i===0&&h===0){let o=Math.H(s),a=Math.H(n);if(o===a)if(t===0)e=r=1/o;else{let l=o*t;e=r=l<1?1/l:1}else if(t===0)e=1/o,r=1/a;else{let l=o*t,u=a*t;e=l<1?1/l:1,r=u<1?1/u:1}}else{let o=Math.H(s*n-i*h),a=Math.ei(s,i),l=Math.ei(h,n);if(t===0)e=l/o,r=a/o;else{let u=t*o;e=l>u?l/u:1,r=a>u?a/u:1}}this.$r[0]=e,this.$r[1]=r}return this.$r}nb(t,s){let{u:i,T:{si:h}}=this,[n,e]=this.uN();if(n===e){i.si=(h||1)*n,i.$i(t);return}let r=i.Pv();s&&i.q(),i.J(n,e),Hi.Vr=1/n,Hi.zt=1/e;let o=new Path2D;if(o.Rl(t,Hi),r.t>0){let a=Math.B(n,e);i.Pc(r.bt(l=>l/a)),i.k0/=a}i.si=h||1,i.$i(o),s&&i.V()}ub(){for(let t=this.Ee.t-1;t>=0;t--)if(!this.Ee[t].Qh)return!1;return!0}};for(let c in cs)zt.prototype[c]!==void 0&&(zt.prototype[cs[c]]=zt.prototype[c]);var $t=class{static#t=null;static#s="";static get fb(){return this.#t}static set fb(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get xr(){return this.#s}static set xr(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#s=t}},vh=class{#t;#s;constructor({qT:t,ZT:s}){this.#t=t,this.#s=s}YT(){return this.#s}m(t){return this.#t.m(t)??null}[Symbol.lA](){return this.#t.en()}},Ht=Symbol("INTERNAL"),Nh=class{#t=!1;#s=!1;#h=!1;#i=!0;constructor(t,{R:s,Mh:i,db:h,gw:n}){this.#t=!!(t&xn),this.#s=!!(t&Hs),this.R=s,this.Mh=i,this.db=h,this.gw=n}get Qh(){if(this.#h)return this.#i;if(!this.#i)return!1;let{Zf:t,pn:s}=this.db;return this.#t?s?.XT!=="OFF":!this.#s||t?.KT!=="OFF"}Fl(t,s,i=!1){t!==Ht&&G("Internal method `_setVisible` called."),this.#h=i,this.#i=s}},Eh=class{#t=null;#s=new Map;#h=null;#i=null;constructor(t,s=xn){if(this.Qc=s,this.R=null,this.Ab=null,t!==null){this.R=t.R,this.Ab=t.Ab,this.#i=t._T;for(let i of t.t8)this.#s.y(i.l,new Nh(s,i));if(t.s8==="OFF")for(let i of this.#s.W())i.Fl(Ht,!1);for(let i of t.us)this.#s.m(i).Fl(Ht,!0);for(let i of t.i8)this.#s.m(i).Fl(Ht,!1);this.#h=this.wb()}}#r(t){let s=t.t;if(s<2)return!0;let i=t[0];for(let h=1;h<s;h++){let n=t[h],e;if(Array.uf(n))e=this.#r(n);else{if(!this.#s.ht(n))return I(`Optional content group not found: ${n}`),!0;e=this.#s.m(n).Qh}switch(i){case"And":if(!e)return!1;break;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return i==="And"}Bl(t){if(this.#s.rt===0)return!0;if(!t)return Ni("Optional content group not defined."),!0;if(t.j==="OCG")return this.#s.ht(t.l)?this.#s.m(t.l).Qh:(I(`Optional content group not found: ${t.l}`),!0);if(t.j==="OCMD"){if(t.fN)return this.#r(t.fN);if(!t.jl||t.jl==="AnyOn"){for(let s of t.$o){if(!this.#s.ht(s))return I(`Optional content group not found: ${s}`),!0;if(this.#s.m(s).Qh)return!0}return!1}if(t.jl==="AllOn"){for(let s of t.$o){if(!this.#s.ht(s))return I(`Optional content group not found: ${s}`),!0;if(!this.#s.m(s).Qh)return!1}return!0}if(t.jl==="AnyOff"){for(let s of t.$o){if(!this.#s.ht(s))return I(`Optional content group not found: ${s}`),!0;if(!this.#s.m(s).Qh)return!0}return!1}if(t.jl==="AllOff"){for(let s of t.$o){if(!this.#s.ht(s))return I(`Optional content group not found: ${s}`),!0;if(this.#s.m(s).Qh)return!1}return!0}return I(`Unknown optional content policy ${t.jl}.`),!0}return I(`Unknown group type ${t.j}.`),!0}mw(t,s=!0,i=!0){let h=this.#s.m(t);if(h){if(i&&s&&h.gw.t)for(let n of h.gw)for(let e of n)e!==t&&this.#s.m(e)?.Fl(Ht,!1,!0);h.Fl(Ht,!!s,!0),this.#t=null}else I(`Optional content group not found: ${t}`)}pb({h8:t,n8:s}){let i;for(let h of t){switch(h){case"ON":case"OFF":case"Toggle":i=h;continue}let n=this.#s.m(h);if(n)switch(i){case"ON":this.mw(h,!0,s);break;case"OFF":this.mw(h,!1,s);break;case"Toggle":this.mw(h,!n.Qh,s)}}this.#t=null}get e8(){return this.#h===null||this.wb()===this.#h}r8(){return this.#s.rt?this.#i?this.#i.z():[...this.#s.Qr()]:null}o8(t){return this.#s.m(t)||null}wb(){if(this.#t!==null)return this.#t;let t=new qs;for(let[s,i]of this.#s)t.Ae(`${s}:${i.Qh}`);return this.#t=t.t2()}[Symbol.lA](){return this.#s.en()}},Ch=class{constructor(t,{Mn:s=!1,Do:i=!1}){B(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{t:h,dN:n,bw:e,gb:r}=t;if(this.Te=[],this.mb=e,this.AN=r,n?.t>0){let o=n instanceof Uint8Array&&n.Ts===n._.Ts?n._:new Uint8Array(n)._;this.Te.r(o)}this.bb=t,this.Ah=!i,this.Vh=!s,this.Ii=h,this.ss=null,this.Vc=[],t.wN((o,a)=>{this.yb({zc:o,ve:a})}),t.pN((o,a)=>{this.Sl({Ss:o,ih:a})}),t.gN(o=>{this.yb({ve:o})}),t.mN(()=>{this.bN()}),t.yN()}yb({zc:t,ve:s}){let i=s instanceof Uint8Array&&s.Ts===s._.Ts?s._:new Uint8Array(s)._;t===void 0?this.ss?this.ss.yw(i):this.Te.r(i):B(this.Vc.ff(function(h){return h.MN!==t?!1:(h.yw(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get Pl(){return this.ss?.ai??0}Sl(t){t.ih===void 0?this.Vc[0]?.Ft?.({Ss:t.Ss}):this.ss?.Ft?.({Ss:t.Ss,ih:t.ih})}bN(){this.ss?.bw(),this.mb=!0}Mb(t){let s=this.Vc.Mw(t);s>=0&&this.Vc.cn(s,1)}T0(){B(!this.ss,"PDFDataTransportStream.getFullReader can only be called once.");let t=this.Te;return this.Te=null,new Th(this,t,this.mb,this.AN)}O0(t,s){if(s<=this.Pl)return null;let i=new Oh(this,t,s);return this.bb.$N(t,s),this.Vc.r(i),i}L0(t){this.ss?.kt(t);for(let s of this.Vc.z(0))s.kt(t);this.bb.Ut()}},Th=class{constructor(t,s,i=!1,h=null){this.vr=t,this.As=i||!1,this.Oe=vn(h)?h:null,this.Te=s||[],this.ai=0;for(let n of this.Te)this.ai+=n.Ts;this.yt=[],this.kN=Promise.G(),t.ss=this,this.Ft=null}yw(t){this.As||(this.yt.t>0?this.yt.xo().G({c:t,ut:!1}):this.Te.r(t),this.ai+=t.Ts)}get I0(){return this.kN}get Hh(){return this.Oe}get Gl(){return this.vr.Vh}get Zn(){return this.vr.Ah}get Ro(){return this.vr.Ii}async ti(){if(this.Te.t>0)return{c:this.Te.xo(),ut:!1};if(this.As)return{c:void 0,ut:!0};let t=Promise.Lt();return this.yt.r(t),t.Z}kt(t){this.As=!0;for(let s of this.yt)s.G({c:void 0,ut:!0});this.yt.t=0}bw(){this.As||(this.As=!0)}},Oh=class{constructor(t,s,i){this.vr=t,this.MN=s,this.c8=i,this.Yn=null,this.yt=[],this.As=!1,this.Ft=null}yw(t){if(!this.As){if(this.yt.t===0)this.Yn=t;else{this.yt.xo().G({c:t,ut:!1});for(let s of this.yt)s.G({c:void 0,ut:!0});this.yt.t=0}this.As=!0,this.vr.Mb(this)}}get Zn(){return!1}async ti(){if(this.Yn){let s=this.Yn;return this.Yn=null,{c:s,ut:!1}}if(this.As)return{c:void 0,ut:!0};let t=Promise.Lt();return this.yt.r(t),t.Z}kt(t){this.As=!0;for(let s of this.yt)s.G({c:void 0,ut:!0});this.yt.t=0,this.vr.Mb(this)}};function we(c,t){let s=new Headers;if(!c||!t||typeof t!="object")return s;for(let i in t){let h=t[i];h!==void 0&&s.g(i,h)}return s}function Ci(c){return URL.We(c)?.U0??null}function pe({$b:c,Xn:t,$n:s,Mn:i}){let h={$w:!1,kw:void 0},n=parseInt(c.m("Content-Length"),10);return!Number.He(n)||(h.kw=n,n<=2*s)||i||!t||c.m("Accept-Ranges")!=="bytes"||(c.m("Content-Encoding")||"identity")!=="identity"||(h.$w=!0),h}function ge(c){let t=c.m("Content-Disposition");if(t){let s=(function(h){let n=!0,e=r("filename\\*","i").rn(h);if(e){e=e[1];let d=l(e);return d=unescape(d),d=u(d),d=f(d),a(d)}if(e=(function(w){let A=[],g,p=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=p.rn(w))!==null;){let[,b,y,M]=g;if(b=parseInt(b,10),b in A){if(b===0)break}else A[b]=[y,M]}let m=[];for(let b=0;b<A.t&&b in A;++b){let[y,M]=A[b];M=l(M),y&&(M=unescape(M),b===0&&(M=u(M))),m.r(M)}return m.et("")})(h),e)return a(f(e));if(e=r("filename","i").rn(h),e){e=e[1];let d=l(e);return d=f(d),a(d)}function r(d,w){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',w)}function o(d,w){if(d){if(!/^[\x00-\xFF]+$/.xh(w))return w;try{let A=new TextDecoder(d,{a8:!0}),g=vs(w);w=A.dc(g),n=!1}catch{}}return w}function a(d){return n&&/[\x80-\xff]/.xh(d)&&(d=o("utf-8",d),n&&(d=o("iso-8859-1",d))),d}function l(d){if(d.sn('"')){let w=d.z(1).Ys('\\"');for(let A=0;A<w.t;++A){let g=w[A].Mw('"');g!==-1&&(w[A]=w[A].z(0,g),w.t=A+1),w[A]=w[A].bh(/\\(.)/g,"$1")}d=w.et('"')}return d}function u(d){let w=d.Mw("'");return w===-1?d:o(d.z(0,w),d.z(w+1).qg(/^[^']*'/,""))}function f(d){return!d.sn("=?")||/[\x00-\x19\x80-\xff]/.xh(d)?d:d.bh(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(w,A,g,p){if(g==="q"||g==="Q")return o(A,p=(p=p.bh("_"," ")).bh(/=([0-9a-fA-F]{2})/g,function(m,b){return String.G1(parseInt(b,16))}));try{p=atob(p)}catch{}return o(A,p)})}return""})(t);if(s.Wi("%"))try{s=decodeURIComponent(s)}catch{}if(vn(s))return s}return null}function Es(c,t){return new Jt(`Unexpected server response (${c}) while retrieving PDF "${t}".`,c,c===404||c===0&&t.sn("file:"))}function me(c){return c===200||c===206}function be(c,t,s){return{l8:"GET",Jc:c,w:s.w,jn:"cors",u8:t?"include":"same-origin",f8:"follow"}}function ye(c){return c instanceof Uint8Array?c._:c instanceof ArrayBuffer?c:(I(`getArrayBuffer - unexpected data format: ${c}`),new Uint8Array(c)._)}var Lh=class{Bo=null;constructor(t){this.ns=t,this.Xn=/^https?:/i.xh(t.at),this.Jc=we(this.Xn,t.xw),this.ss=null,this.Kn=[]}get Pl(){return this.ss?.ai??0}T0(){return B(!this.ss,"PDFFetchStream.getFullReader can only be called once."),this.ss=new Ih(this),this.ss}O0(t,s){if(s<=this.Pl)return null;let i=new Uh(this,t,s);return this.Kn.r(i),i}L0(t){this.ss?.kt(t);for(let s of this.Kn.z(0))s.kt(t)}},Ih=class{constructor(t){this.vr=t,this.Fo=null,this.ai=0,this.Oe=null;let s=t.ns;this.vw=s.jo||!1,this.Ii=s.t,this.hh=Promise.Lt(),this._n=s.Mn||!1,this.Nr=s.$n,this.Nr||this._n||(this._n=!0),this.Hl=new AbortController,this.Ah=!s.Do,this.Vh=!s.Mn;let i=new Headers(t.Jc),h=s.at;fetch(h,be(i,this.vw,this.Hl)).wt(n=>{if(t.Bo=Ci(n.at),!me(n.eh))throw Es(n.eh,h);this.Fo=n.ce.D0(),this.hh.G();let e=n.Jc,{$w:r,kw:o}=pe({$b:e,Xn:t.Xn,$n:this.Nr,Mn:this._n});this.Vh=r,this.Ii=o||this.Ii,this.Oe=ge(e),!this.Ah&&this.Vh&&this.kt(new bt("Streaming is disabled."))}).qs(this.hh.Bt),this.Ft=null}get I0(){return this.hh.Z}get Hh(){return this.Oe}get Ro(){return this.Ii}get Gl(){return this.Vh}get Zn(){return this.Ah}async ti(){await this.hh.Z;let{c:t,ut:s}=await this.Fo.ti();return s?{c:t,ut:s}:(this.ai+=t.Ts,this.Ft?.({Ss:this.ai,ih:this.Ii}),{c:ye(t),ut:!1})}kt(t){this.Fo?.kt(t),this.Hl.Ut()}},Uh=class{constructor(t,s,i){this.vr=t,this.Fo=null,this.ai=0;let h=t.ns;this.vw=h.jo||!1,this.Ui=Promise.Lt(),this.Ah=!h.Do,this.Hl=new AbortController;let n=new Headers(t.Jc);n.g("Range",`bytes=${s}-${i-1}`);let e=h.at;fetch(e,be(n,this.vw,this.Hl)).wt(r=>{let o=Ci(r.at);if(o!==t.Bo)throw new Error(`Expected range response-origin "${o}" to match "${t.Bo}".`);if(!me(r.eh))throw Es(r.eh,e);this.Ui.G(),this.Fo=r.ce.D0()}).qs(this.Ui.Bt),this.Ft=null}get Zn(){return this.Ah}async ti(){await this.Ui.Z;let{c:t,ut:s}=await this.Fo.ti();return s?{c:t,ut:s}:(this.ai+=t.Ts,this.Ft?.({Ss:this.ai}),{c:ye(t),ut:!1})}kt(t){this.Fo?.kt(t),this.Hl.Ut()}},Dh=class{Bo=null;constructor({at:t,xw:s,jo:i}){this.at=t,this.Xn=/^https?:/i.xh(t),this.Jc=we(this.Xn,s),this.jo=i||!1,this.xN=0,this.Le=Object.X(null)}Nw(t){let s=new XMLHttpRequest,i=this.xN++,h=this.Le[i]={Ew:s};s.Gu("GET",this.at),s.jo=this.jo;for(let[n,e]of this.Jc)s.vN(n,e);return this.Xn&&"begin"in t&&"end"in t?(s.vN("Range",`bytes=${t.zc}-${t.Xr-1}`),h.Cw=206):h.Cw=200,s.wk="arraybuffer",B(t.kn,"Expected `onError` callback to be provided."),s.Hg=()=>{t.kn(s.eh)},s.pk=this.NN.N(this,i),s.d8=this.Ft.N(this,i),h.qc=t.qc,h.Wl=t.Wl,h.kn=t.kn,h.Ft=t.Ft,s.La(null),i}Ft(t,s){let i=this.Le[t];i&&i.Ft?.(s)}NN(t,s){let i=this.Le[t];if(!i)return;let h=i.Ew;if(h.Og>=2&&i.qc&&(i.qc(),delete i.qc),h.Og!==4||!(t in this.Le))return;if(delete this.Le[t],h.eh===0&&this.Xn){i.kn(h.eh);return}let n=h.eh||200;if(!(n===200&&i.Cw===206)&&n!==i.Cw){i.kn(h.eh);return}let e=(function(o){let a=o.gk;return typeof a!="string"?a:vs(a)._})(h);if(n===206){let r=h.A8("Content-Range"),o=/bytes (\d+)-(\d+)\/(\d+)/.rn(r);o?i.Wl({zc:parseInt(o[1],10),ve:e}):(I('Missing or invalid "Content-Range" header.'),i.kn(0))}else e?i.Wl({zc:0,ve:e}):i.kn(h.eh)}kb(t){return this.Le[t].Ew}xb(t){return t in this.Le}Tw(t){let s=this.Le[t].Ew;delete this.Le[t],s.Ut()}},Rh=class{constructor(t){this.EN=t,this.Di=new Dh(t),this.Nr=t.$n,this.ss=null,this.Kn=[]}CN(t){let s=this.Kn.Mw(t);s>=0&&this.Kn.cn(s,1)}T0(){return B(!this.ss,"PDFNetworkStream.getFullReader can only be called once."),this.ss=new Bh(this.Di,this.EN),this.ss}O0(t,s){let i=new Fh(this.Di,t,s);return i.vb=this.CN.N(this),this.Kn.r(i),i}L0(t){this.ss?.kt(t);for(let s of this.Kn.z(0))s.kt(t)}},Bh=class{constructor(t,s){this.Di=t,this.Ie=s.at,this.Ow=t.Nw({qc:this.Lw.N(this),Wl:this.Iw.N(this),kn:this.R0.N(this),Ft:this.Sl.N(this)}),this.hh=Promise.Lt(),this._n=s.Mn||!1,this.Ii=s.t,this.Nr=s.$n,this.Nr||this._n||(this._n=!0),this.Ah=!1,this.Vh=!1,this.Ql=[],this.yt=[],this.As=!1,this.ws=void 0,this.Oe=null,this.Ft=null}Lw(){let t=this.Ow,s=this.Di.kb(t);this.Di.Bo=Ci(s.TN);let i=s.w8(),h=new Headers(i?i.p8().qg(/[^\S ]+$/,"").Ys(/[\r\n]+/).bt(r=>{let[o,...a]=r.Ys(": ");return[o,a.et(": ")]}):[]),{$w:n,kw:e}=pe({$b:h,Xn:this.Di.Xn,$n:this.Nr,Mn:this._n});n&&(this.Vh=!0),this.Ii=e||this.Ii,this.Oe=ge(h),this.Vh&&this.Di.Tw(t),this.hh.G()}Iw(t){if(t&&(this.yt.t>0?this.yt.xo().G({c:t.ve,ut:!1}):this.Ql.r(t.ve)),this.As=!0,!(this.Ql.t>0)){for(let s of this.yt)s.G({c:void 0,ut:!0});this.yt.t=0}}R0(t){this.ws=Es(t,this.Ie),this.hh.Bt(this.ws);for(let s of this.yt)s.Bt(this.ws);this.yt.t=0,this.Ql.t=0}Sl(t){this.Ft?.({Ss:t.Ss,ih:t.g8?t.ih:this.Ii})}get Hh(){return this.Oe}get Gl(){return this.Vh}get Zn(){return this.Ah}get Ro(){return this.Ii}get I0(){return this.hh.Z}async ti(){if(await this.hh.Z,this.ws)throw this.ws;if(this.Ql.t>0)return{c:this.Ql.xo(),ut:!1};if(this.As)return{c:void 0,ut:!0};let t=Promise.Lt();return this.yt.r(t),t.Z}kt(t){this.As=!0,this.hh.Bt(t);for(let s of this.yt)s.G({c:void 0,ut:!0});this.yt.t=0,this.Di.xb(this.Ow)&&this.Di.Tw(this.Ow),this.ss=null}},Fh=class{constructor(t,s,i){this.Di=t,this.Ie=t.at,this.Uw=t.Nw({zc:s,Xr:i,qc:this.Lw.N(this),Wl:this.Iw.N(this),kn:this.R0.N(this),Ft:this.Sl.N(this)}),this.yt=[],this.Yn=null,this.As=!1,this.ws=void 0,this.Ft=null,this.vb=null}Lw(){let t=Ci(this.Di.kb(this.Uw)?.TN);t!==this.Di.Bo&&(this.ws=new Error(`Expected range response-origin "${t}" to match "${this.Di.Bo}".`),this.R0(0))}Nb(){this.vb?.(this)}Iw(t){let s=t.ve;this.yt.t>0?this.yt.xo().G({c:s,ut:!1}):this.Yn=s,this.As=!0;for(let i of this.yt)i.G({c:void 0,ut:!0});this.yt.t=0,this.Nb()}R0(t){this.ws??=Es(t,this.Ie);for(let s of this.yt)s.Bt(this.ws);this.yt.t=0,this.Yn=null}Sl(t){this.Zn||this.Ft?.({Ss:t.Ss})}get Zn(){return!1}async ti(){if(this.ws)throw this.ws;if(this.Yn!==null){let s=this.Yn;return this.Yn=null,{c:s,ut:!1}}if(this.As)return{c:void 0,ut:!0};let t=Promise.Lt();return this.yt.r(t),t.Z}kt(t){this.As=!0;for(let s of this.yt)s.G({c:void 0,ut:!0});this.yt.t=0,this.Di.xb(this.Uw)&&this.Di.Tw(this.Uw),this.Nb()}},br=/^[a-z][a-z0-9\-+.]+:/i,jh=class{constructor(t){this.ns=t,this.at=(function(i){if(br.xh(i))return new URL(i);let h=process.f0("url");return new URL(h.m8(i))})(t.at),B(this.at.j1==="file:","PDFNodeStream only supports file:// URLs."),this.ss=null,this.Kn=[]}get Pl(){return this.ss?.ai??0}T0(){return B(!this.ss,"PDFNodeStream.getFullReader can only be called once."),this.ss=new Sh(this),this.ss}O0(t,s){if(s<=this.Pl)return null;let i=new Ph(this,t,s);return this.Kn.r(i),i}L0(t){this.ss?.kt(t);for(let s of this.Kn.z(0))s.kt(t)}},Sh=class{constructor(t){this.Ie=t.at,this.As=!1,this.ws=null,this.Ft=null;let s=t.ns;this.Ii=s.t,this.ai=0,this.Oe=null,this._n=s.Mn||!1,this.Nr=s.$n,this.Nr||this._n||(this._n=!0),this.Ah=!s.Do,this.Vh=!s.Mn,this.xn=null,this.Ui=Promise.Lt(),this.hh=Promise.Lt();let i=process.f0("fs");i.mv.b8(this.Ie).wt(h=>{this.Ii=h.rt,this.Dw(i.ON(this.Ie)),this.hh.G()},h=>{h.S1==="ENOENT"&&(h=Es(0,this.Ie.mh)),this.ws=h,this.hh.Bt(h)})}get I0(){return this.hh.Z}get Hh(){return this.Oe}get Ro(){return this.Ii}get Gl(){return this.Vh}get Zn(){return this.Ah}async ti(){if(await this.Ui.Z,this.As)return{c:void 0,ut:!0};if(this.ws)throw this.ws;let t=this.xn.ti();return t===null?(this.Ui=Promise.Lt(),this.ti()):(this.ai+=t.t,this.Ft?.({Ss:this.ai,ih:this.Ii}),{c:new Uint8Array(t)._,ut:!1})}kt(t){this.xn?this.xn.K(t):this.Zc(t)}Zc(t){this.ws=t,this.Ui.G()}Dw(t){this.xn=t,t.us("readable",()=>{this.Ui.G()}),t.us("end",()=>{t.K(),this.As=!0,this.Ui.G()}),t.us("error",s=>{this.Zc(s)}),!this.Ah&&this.Vh&&this.Zc(new bt("streaming is disabled")),this.ws&&this.xn.K(this.ws)}},Ph=class{constructor(t,s,i){this.Ie=t.at,this.As=!1,this.ws=null,this.Ft=null,this.ai=0,this.xn=null,this.Ui=Promise.Lt();let h=t.ns;this.Ah=!h.Do;let n=process.f0("fs");this.Dw(n.ON(this.Ie,{Qu:s,Xr:i-1}))}get Zn(){return this.Ah}async ti(){if(await this.Ui.Z,this.As)return{c:void 0,ut:!0};if(this.ws)throw this.ws;let t=this.xn.ti();return t===null?(this.Ui=Promise.Lt(),this.ti()):(this.ai+=t.t,this.Ft?.({Ss:this.ai}),{c:new Uint8Array(t)._,ut:!1})}kt(t){this.xn?this.xn.K(t):this.Zc(t)}Zc(t){this.ws=t,this.Ui.G()}Dw(t){this.xn=t,t.us("readable",()=>{this.Ui.G()}),t.us("end",()=>{t.K(),this.As=!0,this.Ui.G()}),t.us("error",s=>{this.Zc(s)}),this.ws&&this.xn.K(this.ws)}},ts=Symbol("INITIAL_DATA"),ci=class{#t=Object.X(null);#s(t){return this.#t[t]||={...Promise.Lt(),s:ts}}m(t,s=null){if(s){let h=this.#s(t);return h.Z.wt(()=>s(h.s)),null}let i=this.#t[t];if(!i||i.s===ts)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.s}ht(t){let s=this.#t[t];return!!s&&s.s!==ts}it(t){let s=this.#t[t];return!s||s.s===ts?!1:(delete this.#t[t],!0)}G(t,s=null){let i=this.#s(t);i.s=s,i.G()}tt(){for(let t in this.#t){let{s}=this.#t[t];s?.Ot?.Eh()}this.#t=Object.X(null)}*[Symbol.lA](){for(let t in this.#t){let{s}=this.#t[t];s!==ts&&(yield[t,s])}}},gs=class c{#t=Promise.Lt();#s=null;#h=!1;#i=!!globalThis.Eb?.B0;#r=null;#e=null;#n=0;#o=0;#a=null;#c=null;#f=0;#l=0;#d=Object.X(null);#p=[];#A=null;#u=[];#w=new WeakMap;#g=null;static#b=new Map;static#m=new Map;static#v=new WeakMap;static#k=null;static#M=new Set;constructor({y8:t,k:s,ct:i}){if(t instanceof ReadableStream)this.#A=t;else{if(typeof t!="object")throw new Error('No "textContentSource" parameter specified.');this.#A=new ReadableStream({Qu(o){o.l0(t),o.Eh()}})}this.#s=this.#c=s,this.#l=i.J*kt.lc,this.#f=i.C,this.#e={h:null,F0:null,u:null};let{Ds:h,Rs:n,Zr:e,Yr:r}=i.Ji;this.#g=[1,0,0,-1,-e,r+n],this.#o=h,this.#n=n,c.#T(),Ut(s,i),this.#t.Z.Yc(()=>{c.#M.it(this),this.#e=null,this.#d=null}).qs(()=>{})}static get LN(){let{K$:t,Ru:s}=tt.Hi;return D(this,"fontFamilyMap",new Map([["sans-serif",(t&&s?"Calibri, ":"")+"sans-serif"],["monospace",(t&&s?"Lucida Console, ":"")+"monospace"]]))}P(){let t=()=>{this.#a.ti().wt(({c:s,ut:i})=>{i?this.#t.G():(this.#r??=s.j0,Object.$h(this.#d,s.Su),this.#E(s.vi),t())},this.#t.Bt)};return this.#a=this.#A.D0(),c.#M.d(this),t(),this.#t.Z}Ae({ct:t,M8:s=null}){let i=t.J*kt.lc,h=t.C;if(h!==this.#f&&(s?.(),this.#f=h,Ut(this.#c,{C:h})),i!==this.#l){s?.(),this.#l=i;let n={h:null,F0:null,u:c.#O(this.#r)};for(let e of this.#u)n.F0=this.#w.m(e),n.h=e,this.#x(n)}}kt(){let t=new bt("TextLayer task cancelled.");this.#a?.kt(t).qs(()=>{}),this.#a=null,this.#t.Bt(t)}get Cg(){return this.#u}get $8(){return this.#p}#E(t){if(this.#h)return;this.#e.u??=c.#O(this.#r);let s=this.#u,i=this.#p;for(let h of t){if(s.t>1e5){I("Ignoring additional textDivs for performance reasons."),this.#h=!0;return}if(h.Pt!==void 0)i.r(h.Pt),this.#y(h);else if(h.j==="beginMarkedContentProps"||h.j==="beginMarkedContent"){let n=this.#s;this.#s=document.$("span"),this.#s.p.d("markedContent"),h.l&&this.#s.e("id",`${h.l}`),n.g(this.#s)}else h.j==="endMarkedContent"&&(this.#s=this.#s.il)}}#y(t){let s=document.$("span"),i={Rw:0,Bw:0,Cb:t.Pt!=="",Tb:t.Tb,os:0};this.#u.r(s);let h=E.I(this.#g,t.I),n=Math.Ob(h[1],h[0]),e=this.#d[t.Lb];e.Nc&&(n+=Math.Fw/2);let r=this.#i&&e.k8||e.vo;r=c.LN.m(r)||r;let o=Math.ei(h[2],h[3]),a=o*c.#F(r,e,this.#r),l,u;n===0?(l=h[4],u=h[5]-a):(l=h[4]+a*Math.IN(n),u=h[5]-a*Math.UN(n));let f="calc(var(--total-scale-factor) *",d=s.M;this.#s===this.#c?(d.fn=`${(100*l/this.#o).uh(2)}%`,d.Ni=`${(100*u/this.#n).uh(2)}%`):(d.fn=`${f}${l.uh(2)}px)`,d.Ni=`${f}${u.uh(2)}px)`),d.os=`${f}${(c.#k*o).uh(2)}px)`,d.vo=r,i.os=o,s.e("role","presentation"),s.St=t.Pt,s.Ve=t.Ve,this.#i&&(s.x8.Lb=e.v8||t.Lb),n!==0&&(i.Rw=n*(180/Math.Fw));let w=!1;if(t.Pt.t>1)w=!0;else if(t.Pt!==" "&&t.I[0]!==t.I[3]){let A=Math.H(t.I[0]),g=Math.H(t.I[3]);A!==g&&Math.B(A,g)/Math.D(A,g)>1.5&&(w=!0)}if(w&&(i.Bw=e.Nc?t.n:t.i),this.#w.y(s,i),this.#e.h=s,this.#e.F0=i,this.#x(this.#e),i.Cb&&this.#s.g(s),i.Tb){let A=document.$("br");A.e("role","presentation"),this.#s.g(A)}}#x(t){let{h:s,F0:i,u:h}=t,{M:n}=s,e="";if(c.#k>1&&(e=`scale(${1/c.#k})`),i.Bw!==0&&i.Cb){let{vo:r}=n,{Bw:o,os:a}=i;c.#C(h,a*this.#l,r);let{i:l}=h.Uo(s.St);l>0&&(e=`scaleX(${o*this.#l/l}) ${e}`)}i.Rw!==0&&(e=`rotate(${i.Rw}deg) ${e}`),e.t>0&&(n.I=e)}static Xc(){if(!(this.#M.rt>0)){this.#b.tt();for(let{O:t}of this.#m.W())t.x();this.#m.tt()}}static#O(t=null){let s=this.#m.m(t||="");if(!s){let i=document.$("canvas");i.Gt="hiddenCanvasElement",i.j0=t,document.ce.g(i),s=i.Us("2d",{jw:!1,fc:!0}),this.#m.y(t,s),this.#v.y(s,{rt:0,wA:""})}return s}static#C(t,s,i){let h=this.#v.m(t);(s!==h.rt||i!==h.wA)&&(t.Cn=`${s}px ${i}`,h.rt=s,h.wA=i)}static#T(){if(this.#k!==null)return;let t=document.$("div");t.M.Jt=0,t.M.N8=1,t.M.os="1px",t.M.Kf="absolute",t.St="X",document.ce.g(t),this.#k=t.di().n,t.x()}static#F(t,s,i){let h=this.#b.m(t);if(h)return h;let n=this.#O(i);n.O.i=n.O.n=30,this.#C(n,30,t);let e=n.Uo(""),r=e.DN,o=Math.H(e.RN);n.O.i=n.O.n=0;let a=.8;return r?a=r/(r+o):(tt.Hi.Ru&&I("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),s.s0?a=s.s0:s.i0&&(a=1+s.i0)),this.#b.y(t,a),a}};function En(c={}){typeof c=="string"||c instanceof URL?c={at:c}:(c instanceof ArrayBuffer||ArrayBuffer._m(c))&&(c={s:c});let t=new Gh,{u0:s}=t,i=c.at?(function(q){if(q instanceof URL)return q.mh;if(typeof q=="string"){if(nt)return q;let Pt=URL.We(q,window.Ib);if(Pt)return Pt.mh}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")})(c.at):null,h=c.s?(function(q){if(nt&&typeof Buffer<"u"&&q instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(q instanceof Uint8Array&&q.Ts===q._.Ts)return q;if(typeof q=="string")return vs(q);if(q instanceof ArrayBuffer||ArrayBuffer._m(q)||typeof q=="object"&&!isNaN(q?.t))return new Uint8Array(q);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")})(c.s):null,n=c.xw||null,e=c.jo===!0,r=c.Sw??null,o=c.BN instanceof ai?c.BN:null,a=Number.He(c.$n)&&c.$n>0?c.$n:65536,l=c.FN instanceof ms?c.FN:null,u=c.Vl,f=typeof c.Pw!="string"||Ei(c.Pw)?null:c.Pw,d=Us(c.jN),w=c.E8!==!1,A=c.C8||(nt?dh:ti),g=Us(c.SN),p=Us(c.PN),m=c.T8||(nt?Ah:hi),b=Us(c.GN),y=c.O8||(nt?wh:ei),M=c.L8!==!0,$=Number.He(c.Gw)&&c.Gw>-1?c.Gw:-1,k=c.bg!==!1,x=typeof c.H1=="boolean"?c.H1:!nt,v=typeof c.W1=="boolean"?c.W1:!nt&&(tt.Hi.Ru||!globalThis.I8),T=Number.He(c.Ub)?c.Ub:-1,C=typeof c.jh=="boolean"?c.jh:nt,F=c.vc===!0,j=c.Db===!0,P=c.or||globalThis.uA,_=c.Mn===!0,S=c.Do===!0,O=c.Rb===!0,L=c.zl===!0,ft=c.U8||(nt?fh:ah),dt=c.D8||(nt?uh:lh),At=c.dr===!0,it=c.HN!==!1,st=o?o.t:c.t??NaN,St=typeof c.Bb=="boolean"?c.Bb:!nt&&!C,vt=typeof c.Fb=="boolean"?c.Fb:!!(A===ti&&m===hi&&y===ei&&d&&p&&b&&is(d,document.Pu)&&is(p,document.Pu)&&is(b,document.Pu));_e(u);let wt={ci:new ft({or:P,dr:At}),Bs:new dt({u0:s,or:P}),jb:vt?null:new A({_i:d,Eo:w}),Sb:vt?null:new m({_i:p}),Pb:vt?null:new y({_i:b})};l||(l=ms.X({Vl:u,So:$t.fb}),t.Po=l);let X={u0:s,R8:"5.4.394",s:h,Sw:r,Rb:O,$n:a,t:st,Pw:f,Db:j,B8:{Gw:$,jh:C,F8:M,bg:k,H1:x,W1:v,Ub:T,vc:F,Bb:St,HN:it,Fb:vt,jN:d,SN:g,PN:p,GN:b}},Ee={or:P,zl:L,An:null,S0:{Rb:O,Db:j}};return l.Z.wt(function(){if(t.jt)throw new Error("Loading aborted");if(l.jt)throw new Error("Worker was destroyed");let Li=l.vt.Xt("GetDocRequest",X,h?[h._]:null),q;if(o)q=new Ch(o,{Mn:_,Do:S});else if(!h){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Pt=is(i)?Lh:nt?jh:Rh;q=new Pt({at:i,t:st,xw:n,jo:e,$n:a,Mn:_,Do:S})}return Li.wt(Pt=>{if(t.jt)throw new Error("Loading aborted");if(l.jt)throw new Error("Worker was destroyed");let Cn=new Lt(s,Pt,l.So),Ce=new Qh(Cn,t,q,Ee,wt,At);t.S=Ce,Cn.La("Ready",null)})}).qs(t.P0.Bt),t}var Gh=class c{static#t=0;P0=Promise.Lt();S=null;Po=null;u0="d"+c.#t++;jt=!1;Gb=null;Ft=null;get Z(){return this.P0.Z}async K(){this.jt=!0;try{this.Po?.So&&(this.Po.Hb=!0),await this.S?.K()}catch(t){throw this.Po?.So&&delete this.Po.Hb,t}this.S=null,this.Po?.K(),this.Po=null}async Th(){return this.S.Th()}},ai=class{#t=Promise.Lt();#s=[];#h=[];#i=[];#r=[];constructor(t,s,i=!1,h=null){this.t=t,this.dN=s,this.bw=i,this.gb=h}wN(t){this.#r.r(t)}pN(t){this.#i.r(t)}gN(t){this.#h.r(t)}mN(t){this.#s.r(t)}j8(t,s){for(let i of this.#r)i(t,s)}S8(t,s){this.#t.Z.wt(()=>{for(let i of this.#i)i(t,s)})}P8(t){this.#t.Z.wt(()=>{for(let s of this.#h)s(t)})}G8(){this.#t.Z.wt(()=>{for(let t of this.#s)t()})}yN(){this.#t.G()}$N(t,s){G("Abstract method PDFDataRangeTransport.requestDataRange")}Ut(){}},Hh=class{constructor(t,s){this.Wb=t,this.S=s}get mt(){return this.S.mt}get ci(){return this.S.ci}get Bs(){return this.S.Bs}get Jl(){return this.Wb.Jl}get WN(){return this.Wb.WN}get Hw(){return D(this,"isPureXfa",!!this.S.Kc)}get H8(){return this.S.Kc}Ww(t){return this.S.Ww(t)}Qb(t){return this.S.Qb(t)}Vb(){return this.S.Vb()}zb(t){return this.S.zb(t)}Jb(){return this.S.Jb()}qb(){return this.S.qb()}Zb(){return this.S.Zb()}Yb(){return this.S.Yb()}Xb(){return this.S.Xb()}Kb(){return this.S.Kb()}Nd(t,s){return this.S.Nd(t,s)}QN(){return this.S.VN()}_b(){return this.S._b()}Qw({Mh:t="display"}={}){let{Qc:s}=this.S.G0(t);return this.S.Qw(s)}ty(){return this.S.ty()}sy(){return this.S.sy()}iy(){return this.S.iy()}Th(){return this.S.Th()}hy(){return this.S.hy()}W8(){return this.S.ny.Z}Xc(t=!1){return this.S.zN(t||this.Hw)}K(){return this.H0.K()}ey(t){return this.S.ey(t)}get S0(){return this.S.S0}get H0(){return this.S.H0}ry(){return this.S.ry()}zh(){return this.S.zh()}oy(){return this.S.oy()}},Wh=class{#t=!1;constructor(t,s,i,h=!1){this.Jh=t,this.W0=s,this.S=i,this.vn=h?new Vs:null,this.Q0=h,this.Ls=i.Ls,this.sh=new ci,this.qh=new Map,this.jt=!1,this.cy=null}get Fn(){return this.Jh+1}get Oi(){return this.W0.Oi}get ay(){return this.W0.ay}get Qe(){return this.W0.Qe}get pn(){return this.W0.pn}JN({J:t,C:s=this.Oi,Ct:i=0,Tt:h=0,Hu:n=!1}={}){return new us({ks:this.pn,Qe:this.Qe,J:t,C:s,Ct:i,Tt:h,Hu:n})}ly({Mh:t="display"}={}){let{Qc:s}=this.S.G0(t);return this.S.ly(this.Jh,s)}QN(){return this.S.qN(this.Jh)}get Bs(){return this.S.Bs}get Hw(){return D(this,"isPureXfa",!!this.S.Kc)}async ZN(){return this.S.Kc?.yh[this.Jh]||null}P({Vw:t,O:s=t.O,ct:i,Mh:h="display",YN:n=Et.Lu,I:e=null,pc:r=null,Q8:o=null,Ce:a=null,Mr:l=null,XN:u=null,Rn:f=!1,V8:d=!1,uy:w=null}){this.vn?.Wu("Overall");let A=this.S.G0(h,n,u,f),{Qc:g,_c:p}=A;this.#t=!1,o||=this.S.Qw(g);let m=this.qh.m(p);m||(m=Object.X(null),this.qh.y(p,m)),m.Go&&(clearTimeout(m.Go),m.Go=null);let b=!!(g&Hs);m.ql||(m.ql=Promise.Lt(),m.ds={Dl:[],Ul:[],Er:!1,Zl:null},this.vn?.Wu("Page Request"),this.fy(A));let y=!!(this.Q0&&globalThis.dy?.B0),M=!this.cy&&(d||y),$=v=>{if(m.Cr.it(k),M){let T=k.Ho?.v.m2();T&&(k.Wo&&k.Wo.z8(T,k.Ho.v.b2()),d&&(this.cy=T))}b&&(this.#t=!0),this.#s(),v?(k.V0.Bt(v),this.zw({Jw:m,Li:v instanceof Error?v:new Error(v)})):k.V0.G(),this.vn&&(this.vn.Y1("Rendering"),this.vn.Y1("Overall"),globalThis.KN?.B0&&globalThis.KN.d(this.Fn,this.vn))},k=new zh({qi:$,qw:{O:s,Vw:t,v:M?new mh(s,m.ds.t,y):null,ct:i,I:e,pc:r},sh:this.sh,Ls:this.Ls,Ce:a,ds:m.ds,Q:this.Jh,ci:this.S.ci,Bs:this.S.Bs,_N:!b,zl:this.Q0,Mr:l,dr:this.S.dr,uy:w});(m.Cr||=new Set).d(k);let x=k.z0;return Promise.mf([m.ql.Z,o]).wt(([v,T])=>{if(this.jt)$();else{if(this.vn?.Wu("Rendering"),!(T.Qc&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.t4({E0:v,Lo:T}),k.J0()}}).qs($),x}J8({Mh:t="display",YN:s=Et.Lu,XN:i=null,Rn:h=!1}={}){let n=this.S.G0(t,s,i,h,!0),e,r=this.qh.m(n._c);return r||(r=Object.X(null),this.qh.y(n._c,r)),r.ta||(e=Object.X(null),e.J0=function(){r.ds.Er&&(r.ta.G(r.ds),r.Cr.it(e))},r.ta=Promise.Lt(),(r.Cr||=new Set).d(e),r.ds={Dl:[],Ul:[],Er:!1,Zl:null},this.vn?.Wu("Page Request"),this.fy(n)),r.ta.Z}s4({i4:t=!1,h4:s=!1}={}){return this.S.vt.a2("GetTextContent",{Q:this.Jh,i4:t===!0,h4:s===!0},{q8:100,rt:i=>i.vi.t})}n4(t={}){if(this.S.Kc)return this.ZN().wt(i=>ls.St(i));let s=this.s4(t);return new Promise(function(i,h){let n=s.D0(),e={vi:[],Su:Object.X(null),j0:null};(function r(){n.ti().wt(function({c:o,ut:a}){a?i(e):(e.j0??=o.j0,Object.$h(e.Su,o.Su),e.vi.r(...o.vi),r())},h)})()})}Ay(){return this.S.Ay(this.Jh)}e4(){this.jt=!0;let t=[];for(let s of this.qh.W())if(this.zw({Jw:s,Li:new Error("Page was destroyed."),wy:!0}),!s.ta)for(let i of s.Cr)t.r(i.r4),i.kt();return this.sh.tt(),this.#t=!1,Promise.mf(t)}Xc(t=!1){this.#t=!0;let s=this.#s();return t&&s&&(this.vn&&=new Vs),s}#s(){if(!this.#t||this.jt)return!1;for(let{Cr:t,ds:s}of this.qh.W())if(t.rt>0||!s.Er)return!1;return this.qh.tt(),this.sh.tt(),this.#t=!1,!0}o4(t,s){let i=this.qh.m(s);i&&(this.vn?.Y1("Page Request"),i.ql?.G(t))}c4(t,s){for(let i=0,h=t.t;i<h;i++)s.ds.Dl.r(t.Dl[i]),s.ds.Ul.r(t.Ul[i]);s.ds.Er=t.Er,s.ds.Zl=t.Zl;for(let i of s.Cr)i.J0();t.Er&&this.#s()}fy({Qc:t,_c:s,a4:i,kl:h}){let{bt:n,Mo:e}=i,r=this.S.vt.a2("GetOperatorList",{Q:this.Jh,Mh:t,_c:s,mt:n,kl:h},e).D0(),o=this.qh.m(s);o.Yl=r;let a=()=>{r.ti().wt(({c:l,ut:u})=>{u?o.Yl=null:this.S.jt||(this.c4(l,o),a())},l=>{if(o.Yl=null,!this.S.jt){if(o.ds){o.ds.Er=!0;for(let u of o.Cr)u.J0();this.#s()}if(o.ql)o.ql.Bt(l);else{if(!o.ta)throw l;o.ta.Bt(l)}}})};a()}zw({Jw:t,Li:s,wy:i=!1}){if(t.Yl){if(t.Go&&(clearTimeout(t.Go),t.Go=null),!i){if(t.Cr.rt>0)return;if(s instanceof fs){let h=100;s.q1>0&&s.q1<1e3&&(h+=s.q1),t.Go=setTimeout(()=>{t.Go=null,this.zw({Jw:t,Li:s,wy:!0})},h);return}}if(t.Yl.kt(new bt(s.Ln)).qs(()=>{}),t.Yl=null,!this.S.jt){for(let[h,n]of this.qh)if(n===t){this.qh.it(h);break}this.Xc()}}}get Z8(){return this.vn}},ms=class c{#t=Promise.Lt();#s=null;#h=null;#i=null;static#r=0;static#e=!1;static#n=new WeakMap;static{nt&&(this.#e=!0,$t.xr||="./pdf.worker.mjs"),this.l4=(t,s)=>{let i=URL.We(t);if(!i?.U0||i.U0==="null")return!1;let h=new URL(s,i);return i.U0===h.U0},this.u4=t=>{let s=`await import("${t}");`;return URL.NM(new Blob([s],{j:"text/javascript"}))},this.Y8=t=>{if((function(i){console.py("Deprecated API usage: "+i)})("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.So)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.X(t)}}constructor({R:t=null,So:s=null,Vl:i=tr()}={}){if(this.R=t,this.jt=!1,this.Vl=i,s){if(c.#n.ht(s))throw new Error("Cannot use more than one PDFWorker per port.");c.#n.y(s,this),this.#a(s)}else this.#c()}get Z(){return this.#t.Z}#o(){this.#t.G(),this.#s.La("configure",{Vl:this.Vl})}get So(){return this.#h}get vt(){return this.#s}#a(t){this.#h=t,this.#s=new Lt("main","worker",t),this.#s.us("ready",()=>{}),this.#o()}#c(){if(c.#e||c.#l){this.#f();return}let{xr:t}=c;try{c.l4(window.Ib,t)||(t=c.u4(new URL(t,window.Ib).mh));let s=new Worker(t,{j:"module"}),i=new Lt("main","worker",s),h=()=>{n.Ut(),i.K(),s.c2(),this.jt?this.#t.Bt(new Error("Worker was destroyed")):this.#f()},n=new AbortController;s.o("error",()=>{this.#i||h()},{w:n.w}),i.us("test",r=>{n.Ut(),!this.jt&&r?(this.#s=i,this.#h=s,this.#i=s,this.#o()):h()}),i.us("ready",r=>{if(n.Ut(),this.jt)h();else try{e()}catch{this.#f()}});let e=()=>{let r=new Uint8Array;i.La("test",r,[r._])};e();return}catch{Ni("The worker has been disabled.")}this.#f()}#f(){c.#e||(I("Setting up fake worker."),c.#e=!0),c.f4.wt(t=>{if(this.jt){this.#t.Bt(new Error("Worker was destroyed"));return}let s=new ch;this.#h=s;let i="fake"+c.#r++,h=new Lt(i+"_worker",i,s);t.X8(h,s),this.#s=new Lt(i,i+"_worker",s),this.#o()}).qs(t=>{this.#t.Bt(new Error(`Setting up fake worker failed: "${t.Ln}".`))})}K(){this.jt=!0,this.#i?.c2(),this.#i=null,c.#n.it(this.#h),this.#h=null,this.#s?.K(),this.#s=null}static X(t){let s=this.#n.m(t?.So);if(s){if(s.Hb)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return s}return new c(t)}static get xr(){if($t.xr)return $t.xr;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#l(){try{return globalThis.K8?.d4||null}catch{return null}}static get f4(){return D(this,"_setupFakeWorkerGlobal",(async()=>this.#l?this.#l:(await import(this.xr)).d4)())}},Qh=class{#t=new Map;#s=new Map;#h=new Map;#i=new Map;#r=null;constructor(t,s,i,h,n,e){this.vt=t,this.H0=s,this.Ls=new ci,this.Zw=new hh({or:h.or,An:h.An}),this.S0=h.S0,this.gy=h,this.ci=n.ci,this.Bs=n.Bs,this.jb=n.jb,this.Sb=n.Sb,this.Pb=n.Pb,this.jt=!1,this.sa=null,this.Xl=i,this.te=null,this.Yw=null,this.ny=Promise.Lt(),this.dr=e,this.A4()}#e(t,s=null){let i=this.#t.m(t);if(i)return i;let h=this.vt.Xt(t,s);return this.#t.y(t,h),h}get mt(){return D(this,"annotationStorage",new ws)}G0(t,s=Et.Lu,i=null,h=!1,n=!1){let e=xn,r=ih;switch(t){case"any":e=De;break;case"display":break;case"print":e=Hs;break;default:I(`getRenderingIntent - invalid intent: ${t}`)}let o=e&Hs&&i instanceof Zs?i:this.mt;switch(s){case Et._p:e+=Fe;break;case Et.Lu:break;case Et.DM:e+=Re;break;case Et.RM:e+=Be,r=o.Yf;break;default:I(`getRenderingIntent - invalid annotationMode: ${s}`)}h&&(e+=je),n&&(e+=Se);let{$o:a,On:l}=o.kl;return{Qc:e,_c:[e,r.On,l].et("_"),a4:r,kl:a}}K(){if(this.sa)return this.sa.Z;this.jt=!0,this.sa=Promise.Lt(),this.#r?.Bt(new Error("Worker was destroyed during onPassword callback"));let t=[];for(let i of this.#s.W())t.r(i.e4());this.#s.tt(),this.#h.tt(),this.#i.tt(),this.rk("annotationStorage")&&this.mt.cA();let s=this.vt.Xt("Terminate",null);return t.r(s),Promise.mf(t).wt(()=>{this.Ls.tt(),this.Zw.tt(),this.#t.tt(),this.Bs.K(),gs.Xc(),this.Xl?.L0(new bt("Worker was terminated.")),this.vt?.K(),this.vt=null,this.sa.G()},this.sa.Bt),this.sa.Z}A4(){let{vt:t,H0:s}=this;t.us("GetReader",(i,h)=>{B(this.Xl,"GetReader - no `IPDFStream` instance available."),this.te=this.Xl.T0(),this.te.Ft=n=>{this.Yw={Ss:n.Ss,ih:n.ih}},h.IA=()=>{this.te.ti().wt(function({c:n,ut:e}){e?h.Eh():(B(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),h.l0(new Uint8Array(n),1,[n]))}).qs(n=>{h.Cl(n)})},h.UA=n=>{this.te.kt(n),h.No.qs(e=>{if(!this.jt)throw e})}}),t.us("ReaderHeadersReady",async i=>{await this.te.I0;let{Zn:h,Gl:n,Ro:e}=this.te;return(!h||!n)&&(this.Yw&&s.Ft?.(this.Yw),this.te.Ft=r=>{s.Ft?.({Ss:r.Ss,ih:r.ih})}),{Zn:h,Gl:n,Ro:e}}),t.us("GetRangeReader",(i,h)=>{B(this.Xl,"GetRangeReader - no `IPDFStream` instance available.");let n=this.Xl.O0(i.zc,i.Xr);n?(h.IA=()=>{n.ti().wt(function({c:e,ut:r}){r?h.Eh():(B(e instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),h.l0(new Uint8Array(e),1,[e]))}).qs(e=>{h.Cl(e)})},h.UA=e=>{n.kt(e),h.No.qs(r=>{if(!this.jt)throw r})}):h.Eh()}),t.us("GetDoc",({_8:i})=>{this.my=i.Jl,this.Kc=i.w4,delete i.w4,s.P0.G(new Hh(i,this))}),t.us("DocException",i=>{s.P0.Bt(rt(i))}),t.us("PasswordRequest",i=>{this.#r=Promise.Lt();try{if(!s.Gb)throw rt(i);let h=n=>{n instanceof Error?this.#r.Bt(n):this.#r.G({Sw:n})};s.Gb(h,i.S1)}catch(h){this.#r.Bt(h)}return this.#r.Z}),t.us("DataLoaded",i=>{s.Ft?.({Ss:i.t,ih:i.t}),this.ny.G(i)}),t.us("StartRenderPage",i=>{this.jt||this.#s.m(i.Q).o4(i.E0,i._c)}),t.us("commonobj",([i,h,n])=>{if(this.jt||this.Ls.ht(i))return null;switch(h){case"Font":if("error"in n){let u=n.Cl;I(`Error during font loading: ${u}`),this.Ls.G(i,u);break}let e=new eh(n),r=this.gy.zl&&globalThis.Eb?.B0?(u,f)=>globalThis.Eb.tO(u,f):null,o=new nh(e,r,n.av,n.e2);this.Zw.N(o).qs(()=>t.Xt("FontFallback",{l:i})).Yc(()=>{!o.vc&&o.s&&o.vA(),this.Ls.G(i,o)});break;case"CopyLocalImage":let{sO:a}=n;B(a,"The imageRef must be defined.");for(let u of this.#s.W())for(let[,f]of u.sh)if(f?.ay===a)return f.p4?(this.Ls.G(i,structuredClone(f)),f.p4):null;break;case"FontPath":case"Image":this.Ls.G(i,n);break;case"Pattern":let l=new rh(n);this.Ls.G(i,l.wv());break;default:throw new Error(`Got unknown common object type ${h}`)}return null}),t.us("obj",([i,h,n,e])=>{if(this.jt)return;let r=this.#s.m(h);if(!r.sh.ht(i))if(r.qh.rt!==0)switch(n){case"Image":case"Pattern":r.sh.G(i,e);break;default:throw new Error(`Got unknown object type ${n}`)}else e?.Ot?.Eh()}),t.us("DocProgress",i=>{this.jt||s.Ft?.({Ss:i.Ss,ih:i.ih})}),t.us("FetchBinaryData",async i=>{if(this.jt)throw new Error("Worker was destroyed.");let h=this[i.j];if(!h)throw new Error(`${i.j} not initialized, see the \`useWorkerFetch\` parameter.`);return h.RA(i)})}Th(){return this.vt.Xt("GetData",null)}hy(){this.mt.rt<=0&&I("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{bt:t,Mo:s}=this.mt.Yf;return this.vt.Xt("SaveDocument",{Hw:!!this.Kc,Jl:this.my,mt:t,Hh:this.te?.Hh??null},s).Yc(()=>{this.mt.cA()})}Ww(t){if(!Number.He(t)||t<=0||t>this.my)return Promise.Bt(new Error("Invalid page request."));let s=t-1,i=this.#h.m(s);if(i)return i;let h=this.vt.Xt("GetPage",{Q:s}).wt(n=>{if(this.jt)throw new Error("Transport destroyed");n.g4&&this.#i.y(n.g4,t);let e=new Wh(s,n,this,this.gy.zl);return this.#s.y(s,e),e});return this.#h.y(s,h),h}Qb(t){return oh(t)?this.vt.Xt("GetPageIndex",{Nl:t.Nl,El:t.El}):Promise.Bt(new Error("Invalid pageIndex request."))}ly(t,s){return this.vt.Xt("GetAnnotations",{Q:t,Mh:s})}ry(){return this.#e("GetFieldObjects")}zh(){return this.#e("HasJSActions")}oy(){return this.vt.Xt("GetCalculationOrderIds",null)}Vb(){return this.vt.Xt("GetDestinations",null)}zb(t){return typeof t!="string"?Promise.Bt(new Error("Invalid destination request.")):this.vt.Xt("GetDestination",{l:t})}Jb(){return this.vt.Xt("GetPageLabels",null)}qb(){return this.vt.Xt("GetPageLayout",null)}Zb(){return this.vt.Xt("GetPageMode",null)}Yb(){return this.vt.Xt("GetViewerPreferences",null)}Xb(){return this.vt.Xt("GetOpenAction",null)}Kb(){return this.vt.Xt("GetAttachments",null)}Nd(t,s){return this.vt.Xt("GetAnnotationsByType",{m4:t,iO:s})}VN(){return this.#e("GetDocJSActions")}qN(t){return this.vt.Xt("GetPageJSActions",{Q:t})}Ay(t){return this.vt.Xt("GetStructTree",{Q:t})}_b(){return this.vt.Xt("GetOutline",null)}Qw(t){return this.#e("GetOptionalContentConfig").wt(s=>new Eh(s,t))}ty(){return this.vt.Xt("GetPermissions",null)}sy(){let t="GetMetadata",s=this.#t.m(t);if(s)return s;let i=this.vt.Xt(t,null).wt(h=>({Z$:h[0],hO:h[1]?new vh(h[1]):null,gb:this.te?.Hh??null,Ro:this.te?.Ro??null}));return this.#t.y(t,i),i}iy(){return this.vt.Xt("GetMarkInfo",null)}async zN(t=!1){if(!this.jt){await this.vt.Xt("Cleanup",null);for(let s of this.#s.W())if(!s.Xc())throw new Error(`startCleanup: Page ${s.Fn} is currently rendering.`);this.Ls.tt(),t||this.Zw.tt(),this.#t.tt(),this.Bs.K(!0),gs.Xc()}}ey(t){if(!oh(t))return null;let s=t.El===0?`${t.Nl}R`:`${t.Nl}R${t.El}`;return this.#i.m(s)??null}},Vh=class{#t=null;by=null;kn=null;constructor(t){this.#t=t}get Z(){return this.#t.V0.Z}kt(t=0){this.#t.kt(null,t)}get Zl(){let{Zl:t}=this.#t.ds;if(!t)return!1;let{Ce:s}=this.#t;return t.nO||t.O&&s?.rt>0}},zh=class c{#t=null;static#s=new WeakSet;constructor({qi:t,qw:s,sh:i,Ls:h,Ce:n,ds:e,Q:r,ci:o,Bs:a,_N:l=!1,zl:u=!1,Mr:f=null,dr:d=!1,uy:w=null}){this.qi=t,this.qw=s,this.sh=i,this.Ls=h,this.Ce=n,this.q0=null,this.ds=e,this.Jh=r,this.ci=o,this.Bs=a,this.Q0=u,this.Mr=f,this.Z0=!1,this.yy=null,this.My=!1,this.b4=l===!0&&typeof window<"u",this.Y0=!1,this.V0=Promise.Lt(),this.z0=new Vh(this),this.$y=this.kt.N(this),this.ky=this.xy.N(this),this.y4=this.vy.N(this),this.Ny=this.M4.N(this),this.ia=s.O,this.$4=s.O?null:s.Vw,this.k4=d,this.eO=s.v,this.x4=w}get r4(){return this.V0.Z.qs(function(){})}t4({E0:t=!1,Lo:s}){if(this.Y0)return;if(this.ia){if(c.#s.ht(this.ia))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c.#s.d(this.ia)}this.Q0&&globalThis.dy?.B0&&(this.Wo=globalThis.dy.X(this.Jh),this.Wo.rO(this.ds),this.Wo.Jv=this.Wo.oO());let{ct:i,I:h,pc:n,v:e}=this.qw,r=this.$4||this.ia.Us("2d",{jw:!1,fc:!this.k4});this.Ho=new zt(r,this.Ls,this.sh,this.ci,this.Bs,{Lo:s},this.Ce,this.Mr,e),this.Ho.zv({I:h,ct:i,E0:t,pc:n}),this.q0=0,this.My=!0,this.yy?.()}kt(t=null,s=0){this.Z0=!1,this.Y0=!0,this.Ho?.Rc(),this.#t&&(window.cO(this.#t),this.#t=null),c.#s.it(this.ia),t||=new fs(`Rendering cancelled, page ${this.Jh+1}`,s),this.qi(t),this.z0.kn?.(t)}J0(){this.My?(this.Ho.v?.A2(this.ds.Dl.t),this.Wo?.aO(this.ds),this.Z0||this.xy()):this.yy||=this.ky}xy(){this.Z0=!0,this.Y0||(this.z0.by?this.z0.by(this.y4):this.vy())}vy(){this.b4?this.#t=window.lO(()=>{this.#t=null,this.Ny().qs(this.$y)}):Promise.G().wt(this.Ny).qs(this.$y)}async M4(){this.Y0||(this.q0=this.Ho.XA(this.ds,this.q0,this.ky,this.Wo,this.x4),this.q0===this.ds.Ul.t&&(this.Z0=!1,this.ds.Er&&(this.Ho.Rc(),c.#s.it(this.ia),this.qi())))}},yr="5.4.394",Mr="2cc809ade",li=class c{#t=null;#s=null;#h;#i=null;#r=!1;#e=!1;#n=null;#o;#a=null;#c=null;static#f=null;static get co(){return D(this,"_keyboardManager",new Dt([[["Escape","mac+Escape"],c.prototype.Ey],[[" ","mac+ "],c.prototype.v4],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],c.prototype.N4],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],c.prototype.E4],[["Home","mac+Home"],c.prototype.C4],[["End","mac+End"],c.prototype.T4]]))}constructor({Oh:t=null,Ao:s=null}){t?(this.#e=!1,this.#n=t):this.#e=!0,this.#c=t?.b||s,this.#o=this.#c.Ch,this.#h=t?.L?.zg()||this.#c?.fo.W().yf().c||"#FFFF98",c.#f||=Object.to({uO:"pdfjs-editor-colorpicker-blue",fO:"pdfjs-editor-colorpicker-green",dO:"pdfjs-editor-colorpicker-pink",AO:"pdfjs-editor-colorpicker-red",wO:"pdfjs-editor-colorpicker-yellow"})}Fg(){let t=this.#t=document.$("button");t.Gt="colorPicker",t.xs="0",t.e("data-l10n-id","pdfjs-editor-colorpicker-button"),t.Cf="true",this.#n&&(t.Hd=`${this.#n.l}_colorpicker_dropdown`);let s=this.#c.ls;t.o("click",this.#A.N(this),{w:s}),t.o("keydown",this.#p.N(this),{w:s});let i=this.#s=document.$("span");return i.Gt="swatch",i.pO="true",i.M.hr=this.#h,t.g(i),t}gO(){let t=this.#i=this.#l();return t.O4="horizontal",t.mO="highlightColorPickerLabel",t}#l(){let t=document.$("div"),s=this.#c.ls;t.o("contextmenu",ut,{w:s}),t.Gt="dropdown",t.Xw="listbox",t.bO="false",t.O4="vertical",t.e("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#n&&(t.l=`${this.#n.l}_colorpicker_dropdown`);for(let[i,h]of this.#c.fo){let n=document.$("button");n.xs="0",n.Xw="option",n.e("data-color",h),n.Nh=i,n.e("data-l10n-id",c.#f[i]);let e=document.$("span");n.g(e),e.Gt="swatch",e.M.hr=h,n.L4=h===this.#h,n.o("click",this.#d.N(this,h),{w:s}),t.g(n)}return t.o("keydown",this.#p.N(this),{w:s}),t}#d(t,s){s.Da(),this.#o.Vs("switchannotationeditorparams",{ns:this,j:R.ic,c:t}),this.Cy(t)}v4(t){if(t.U===this.#t){this.#A(t);return}let s=t.U.qr("data-color");s&&this.#d(s,t)}N4(t){this.#w?t.U!==this.#t?t.U.yO?.gt():this.#i.on?.gt():this.#A(t)}E4(t){t.U!==this.#i?.on&&t.U!==this.#t?(this.#w||this.#A(t),t.U.Ty?.gt()):this.#w&&this.Ey()}C4(t){this.#w?this.#i.on?.gt():this.#A(t)}T4(t){this.#w?this.#i.Ym?.gt():this.#A(t)}#p(t){c.co.rn(this,t)}#A(t){if(this.#w){this.Ba();return}if(this.#r=t.Nt===0,this.#a||(this.#a=new AbortController,window.o("pointerdown",this.#u.N(this),{w:this.#c.hi(this.#a)})),this.#t.Gd="true",this.#i){this.#i.p.x("hidden");return}let s=this.#i=this.#l();this.#t.g(s)}#u(t){this.#i?.$s(t.U)||this.Ba()}Ba(){this.#i?.p.d("hidden"),this.#t.Gd="false",this.#a?.Ut(),this.#a=null}get#w(){return this.#i&&!this.#i.p.$s("hidden")}Ey(){this.#e||(this.#w?(this.Ba(),this.#t.gt({Ml:!0,Bd:this.#r})):this.#n?.Zi())}Cy(t){if(this.#s&&(this.#s.M.hr=t),!this.#i)return;let s=this.#c.fo.W();for(let i of this.#i.yh)i.L4=s.yf().c===t.zg()}K(){this.#t?.x(),this.#t=null,this.#s=null,this.#i?.x(),this.#i=null}},ui=class c{#t=null;#s=null;#h=null;static#i=null;constructor(t){this.#s=t,this.#h=t.b,c.#i||=Object.to({Ek:"pdfjs-editor-color-picker-free-text-input",Ck:"pdfjs-editor-color-picker-ink-input"})}Fg(){if(this.#t)return this.#t;let{ze:t,Kw:s,L:i}=this.#s,h=this.#t=document.$("input");return h.j="color",h.c=i||"#000000",h.Gt="basicColorPicker",h.xs=0,h.e("data-l10n-id",c.#i[t]),h.o("input",()=>{this.#h.lo(s,h.c)},{w:this.#h.ls}),h}Ae(t){this.#t&&(this.#t.c=t)}K(){this.#t?.x(),this.#t=null}Ba(){}};function ne(c){return Math.It(255*Math.B(0,Math.D(1,c))).fe(16).Ea(2,"0")}function ss(c){return Math.B(0,Math.D(255,255*c))}var fi=class{static MO([t,s,i,h]){return["G",1-Math.D(1,.3*t+.59*i+.11*s+h)]}static $O([t]){return["CMYK",0,0,0,1-t]}static kO([t]){return["RGB",t,t,t]}static xO([t]){return[t=ss(t),t,t]}static vO([t]){let s=ne(t);return`#${s}${s}${s}`}static NO([t,s,i]){return["G",.3*t+.59*s+.11*i]}static EO(t){return t.bt(ss)}static I4(t){return`#${t.bt(ne).et("")}`}static CO(){return"#00000000"}static TO(){return[null]}static U4([t,s,i,h]){return["RGB",1-Math.D(1,t+h),1-Math.D(1,i+h),1-Math.D(1,s+h)]}static OO([t,s,i,h]){return[ss(1-Math.D(1,t+h)),ss(1-Math.D(1,i+h)),ss(1-Math.D(1,s+h))]}static LO(t){let s=this.U4(t).z(1);return this.I4(s)}static IO([t,s,i]){let h=1-t,n=1-s,e=1-i;return["CMYK",h,n,e,Math.D(h,n,e)]}},Jh=class{X(t,s,i=!1){if(t<=0||s<=0)throw new Error("Invalid SVG dimensions");let h=this._w("svg:svg");return h.e("version","1.1"),i||(h.e("width",`${t}px`),h.e("height",`${s}px`)),h.e("preserveAspectRatio","none"),h.e("viewBox",`0 0 ${t} ${s}`),h}$(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._w(t)}_w(t){G("Abstract method `_createSVG` called.")}},qt=class extends Jh{_w(t){return document.de(Mt,t)}},Bt=new WeakSet,$r=60*new Date().UO()*1e3,rs=class{static X(t){switch(t.s.Qn){case K.HM:return new bs(t);case K.GM:return new Zh(t);case K._M:switch(t.s.DO){case"Tx":return new Yh(t);case"Btn":return t.s.RO?new di(t):t.s.BO?new Kh(t):new _h(t);case"Ch":return new tn(t);case"Sig":return new Xh(t)}return new xt(t);case K.tc:return new ys(t);case K.Ma:return new Ai(t);case K.WM:return new hn(t);case K.QM:return new nn(t);case K.VM:return new en(t);case K.JM:return new wi(t);case K.XM:return new on(t);case K._o:return new Ms(t);case K.zM:return new rn(t);case K.ki:return new pi(t);case K.qM:return new cn(t);case K.ZM:return new an(t);case K.YM:return new ln(t);case K.Hr:return new gi(t);case K.KM:return new un(t);default:return new J(t)}}},J=class c{#t=null;#s=!1;#h=null;constructor(t,{is:s=!1,bi:i=!1,Kl:h=!1}={}){this.is=s,this.s=t.s,this.ha=t.ha,this.Mt=t.Mt,this._l=t._l,this.tu=t.tu,this.Tr=t.Tr,this.Ri=t.Ri,this.mt=t.mt,this.Qo=t.Qo,this.Zh=t.Zh,this.zh=t.zh,this.na=t.Oy,this.a=t.a,this.Bi=!1,s&&(this.Ue=this.k=this.D4(i)),h&&this.R4()}static tp({Ai:t,rs:s}){return!(!t?.Pt&&!s?.Pt)}get Ly(){return this.s.FO}get nh(){return c.tp(this.s)||this.Qo&&!!this.ea}get sp(){let{s:t}=this,s=this.mt?.Td(t.l);return s?s.Th():t}get Iy(){return this.Qo&&this.B4}get Me(){let t=this.mt?.Td(this.s.l);if(t)return t.Zm;let{su:s,iu:i,E:h}=this.s,n=-1/0,e=-1/0;if(s?.t>=8){for(let r=0;r<s.t;r+=8)s[r+1]>e?(e=s[r+1],n=s[r+2]):s[r+1]===e&&(n=Math.B(n,s[r+2]));return[n,e]}if(i?.t>=1){for(let r of i)for(let o=0,a=r.t;o<a;o+=2)r[o+1]>e?(e=r[o+1],n=r[o]):r[o+1]===e&&(n=Math.B(n,r[o]));if(n!==1/0)return[n,e]}return h?[h[2],h[3]]:null}ip(t){let{Nn:{pn:s},ct:{Ji:{Ds:i,Rs:h,Zr:n,Yr:e}}}=this.a;return t[1]=s[3]-t[1]+s[1],t[0]=100*(t[0]-n)/i,t[1]=100*(t[1]-e)/h,t}get ea(){let{s:t}=this;return this.mt.cf(`${os}${t.l}`)?.xt?.iA||t.Ai?.Pt||""}set ea(t){let{s}=this,i={lt:!t,iA:t||""};this.mt.Vx(s.l,{xt:i})||this.mt.ft(`${os}${s.l}`,{l:s.l,Qn:s.Qn,Q:this.a.Nn.Jh,xt:i,pt:s.pt,ms:new Date}),t||this.hp()}hp(){(this.#h?.xt||this.xt)?.x(),this.#h=this.xt=null}dn(t){if(!this.k)return;t.E&&(this.#t||={E:this.s.E.z(0)});let{E:s,xt:i}=t;s&&this.#i(s);let h=this.#h?.xt||this.xt;!h&&i?.zi&&(this.yi(i),h=this.#h.xt),h&&(h.dn(t),i?.lt&&(h.x(),this.#h=null,this.xt=null))}np(){this.#t&&(this.#i(this.#t.E),this.#h?.xt.np(),this.#t=null)}#i(t){let{k:{M:s},s:{E:i,C:h},a:{ct:{Ji:{Ds:n,Rs:e,Zr:r,Yr:o}}}}=this;i?.cn(0,4,...t),s.fn=100*(t[0]-r)/n+"%",s.Ni=100*(e-t[3]+o)/e+"%",h===0?(s.i=100*(t[2]-t[0])/n+"%",s.n=100*(t[3]-t[1])/e+"%"):this.X0(h)}D4(t){let{s,a:{Nn:i,ct:h}}=this,n=document.$("section");n.e("data-annotation-id",s.l),this instanceof xt||this instanceof bs||(n.xs=0);let{M:e}=n;if(e.Rh=this.a.Rh,this.a.Rh+=2,s.F4&&(n.Nh=s.F4),s.j4&&n.p.d("norotate"),!s.E||this instanceof ys){let{C:A}=s;return s.ra||A===0||this.X0(A,n),n}let{i:r,n:o}=this;if(!t&&s.Fi.i>0){e.ep=`${s.Fi.i}px`;let A=s.Fi.S4,g=s.Fi.P4;if(A>0||g>0){let m=`calc(${A}px * var(--total-scale-factor)) / calc(${g}px * var(--total-scale-factor))`;e.G4=m}else if(this instanceof di){let m=`calc(${r}px * var(--total-scale-factor)) / calc(${o}px * var(--total-scale-factor))`;e.G4=m}switch(s.Fi.M){case re:e.Fi="solid";break;case We:e.Fi="dashed";break;case Qe:I("Unimplemented border style: beveled");break;case Ve:I("Unimplemented border style: inset");break;case ze:e.jO="solid"}let p=s.rp||null;p?(this.#s=!0,e.rp=E.hn(0|p[0],0|p[1],0|p[2])):e.ep=0}let a=E.Mg([s.E[0],i.pn[3]-s.E[1]+i.pn[1],s.E[2],i.pn[3]-s.E[3]+i.pn[1]]),{Ds:l,Rs:u,Zr:f,Yr:d}=h.Ji;e.fn=100*(a[0]-f)/l+"%",e.Ni=100*(a[1]-d)/u+"%";let{C:w}=s;return s.ra||w===0?(e.i=100*r/l+"%",e.n=100*o/u+"%"):this.X0(w,n),n}X0(t,s=this.k){if(!this.s.E)return;let{Ds:i,Rs:h}=this.a.ct.Ji,{i:n,n:e}=this;t%180!=0&&([n,e]=[e,n]),s.M.i=100*n/i+"%",s.M.n=100*e/h+"%",s.e("data-main-rotation",(360-t)%360)}get Uy(){let t=(s,i,h)=>{let n=h.Nt[s],e=n[0],r=n.z(1);h.U.M[i]=fi[`${e}_HTML`](r),this.mt.ft(this.s.l,{[i]:fi[`${e}_rgb`](r)})};return D(this,"_commonActions",{uc:s=>{let{uc:i}=s.Nt,h=i%2==1;this.k.M.tn=h?"hidden":"visible",this.mt.ft(this.s.l,{H4:h,Dy:i===1||i===2})},Zf:s=>{this.mt.ft(this.s.l,{Dy:!s.Nt.Zf})},Zt:s=>{let{Zt:i}=s.Nt;this.k.M.tn=i?"hidden":"visible",this.mt.ft(this.s.l,{Dy:i,H4:i})},gt:s=>{setTimeout(()=>s.U.gt({Ml:!1}),0)},W4:s=>{s.U.Nh=s.Nt.W4},Q4:s=>{s.U.$c=s.Nt.Q4},hu:s=>{this.nu(s.U,s.Nt.hu)},SO:s=>{t("bgColor","backgroundColor",s)},qn:s=>{t("fillColor","backgroundColor",s)},PO:s=>{t("fgColor","color",s)},GO:s=>{t("textColor","color",s)},rp:s=>{t("borderColor","borderColor",s)},mr:s=>{t("strokeColor","borderColor",s)},C:s=>{let i=s.Nt.C;this.X0(i),this.mt.ft(this.s.l,{C:i})}})}eu(t,s){let i=this.Uy;for(let h of Object.Qr(s.Nt))(t[h]||i[h])?.(s)}ru(t){if(!this.Zh)return;let s=this.mt.cf(this.s.l);if(!s)return;let i=this.Uy;for(let[h,n]of Object.en(s)){let e=i[h];e&&(e({Nt:{[h]:n},U:t}),delete s[h])}}R4(){if(!this.k)return;let{su:t}=this.s;if(!t)return;let[s,i,h,n]=this.s.E.bt(A=>Math.Qv(A));if(t.t===8){let[A,g,p,m]=t.gs(2,6);if(h===A&&n===g&&s===p&&i===m)return}let{M:e}=this.k,r;if(this.#s){let{rp:A,ep:g}=e;e.ep=0,r=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${g}">`],this.k.p.d("hasBorder")}let o=h-s,a=n-i,{Ri:l}=this,u=l.$("svg");u.p.d("quadrilateralsContainer"),u.e("width",0),u.e("height",0),u.Xw="none";let f=l.$("defs");u.g(f);let d=l.$("clipPath"),w=`clippath_${this.s.l}`;d.e("id",w),d.e("clipPathUnits","objectBoundingBox"),f.g(d);for(let A=2,g=t.t;A<g;A+=8){let p=t[A],m=t[A+1],b=t[A+2],y=t[A+3],M=l.$("rect"),$=(b-s)/o,k=(n-m)/a,x=(p-b)/o,v=(m-y)/a;M.e("x",$),M.e("y",k),M.e("width",x),M.e("height",v),d.g(M),r?.r(`<rect vector-effect="non-scaling-stroke" x="${$}" y="${k}" width="${x}" height="${v}"/>`)}this.#s&&(r.r("</g></svg>')"),e.HO=r.et("")),this.k.g(u),this.k.M.Ry=`url(#${w})`}yi(t=null){let{s}=this,i,h;t?(i={Pt:t.zi},h=t.hl):(i=s.Ai,h=s.ms),this.#h=new ys({s:{L:s.L,K0:s.K0,ms:h,Ai:i,rs:s.rs,op:s.E,Fi:0,l:`popup_${s.l}`,C:s.C,j4:!0},Mt:this.Mt,a:this.a,De:[this]})}get B4(){return!!(this.#h||this.xt||this.s.pt)}get ou(){return this.#h}P(){G("Abstract method `AnnotationElement.render` called")}cu(t,s=null){let i=[];if(this.na){let h=this.na[t];if(h)for(let{Nn:n,l:e,V4:r}of h){if(n===-1||e===s)continue;let o=typeof r=="string"?r:null,a=document.Ju(`[data-element-id="${e}"]`);!a||Bt.ht(a)?i.r({l:e,Yh:o,Vo:a}):I(`_getElementsByName - element not allowed: ${e}`)}return i}for(let h of document.WO(t)){let{Yh:n}=h,e=h.qr("data-element-id");e!==s&&Bt.ht(h)&&i.r({l:e,Yh:n,Vo:h})}return i}Ws(){this.k&&(this.k.Zt=!1),this.xt?.z4()}ii(){this.k&&(this.k.Zt=!0),this.xt?.J4()}Or(){return this.k}zo(){let t=this.Or();if(Array.uf(t))for(let s of t)s.p.d("highlightArea");else t.p.d("highlightArea")}_0(){if(!this.Ly)return;let{au:t,s:{l:s}}=this;this.k.o("dblclick",()=>{this.Mt.se?.Vs("switchannotationeditormode",{ns:this,jn:t,pm:s,QO:!0})})}get i(){return this.s.E[2]-this.s.E[0]}get n(){return this.s.E[3]-this.s.E[1]}},qh=class extends J{constructor(t){super(t,{is:!0,bi:!0}),this.Oh=t.Oh}P(){return this.k.Gt="editorAnnotation",this.k}q4(){let{Oh:t}=this;t.tr&&this.yi(t.Yt)}get Iy(){return this.Qo&&this.Oh.tr}get Me(){return this.Oh.Zm}get ea(){return this.Oh.Yt.zi}set ea(t){this.Oh.Yt=t,t||this.hp()}get sp(){return this.Oh.Th()}x(){this.a.Z4(this.s.l),this.k.x(),this.k=null,this.hp()}},bs=class extends J{constructor(t,s=null){super(t,{is:!0,bi:!!s?.bi,Kl:!0}),this.By=t.s.By}P(){let{s:t,Mt:s}=this,i=document.$("a");i.e("data-element-id",t.l);let h=!1;return t.at?(s.ck(i,t.at,t.ak),h=!0):t.Ns?(this.Y4(i,t.Ns,t.Re),h=!0):t.X4?(this.#s(i,t.X4,t.Re,t.VO),h=!0):t.pb?(this.#h(i,t.pb,t.Re),h=!0):t._A?(this.Fy(i,t._A,t.Re),h=!0):(t.ie&&(t.ie.zO||t.ie["Mouse Up"]||t.ie["Mouse Down"])&&this.Zh&&this.zh&&(this.K4(i,t),h=!0),t._4?(this.t5(i,t._4),h=!0):this.By&&!h&&(this.Fy(i,""),h=!0)),this.k.p.d("linkAnnotation"),h&&(this.Ue=i,this.k.g(i)),this.k}#t(){this.k.e("data-internal-link","")}Fy(t,s,i=""){t.mh=this.Mt.JO(s),t.Lr=()=>(s&&this.Mt.qO(s),!1),(s||s==="")&&this.#t(),i&&(t.Nh=i)}Y4(t,s,i=""){t.mh=this.Mt.t1(""),t.Lr=()=>(this.Mt.ZO(s),!1),i&&(t.Nh=i),this.#t()}#s(t,s,i="",h=null){t.mh=this.Mt.t1(""),s.Be?t.Nh=s.Be:i&&(t.Nh=i),t.Lr=()=>(this._l?.s5(s.lu,s.Hh,h),!1),this.#t()}#h(t,s,i=""){t.mh=this.Mt.t1(""),t.Lr=()=>(this.Mt.YO(s),!1),i&&(t.Nh=i),this.#t()}K4(t,s){t.mh=this.Mt.t1("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let h of Object.Qr(s.ie)){let n=i.m(h);n&&(t[n]=()=>(this.Mt.se?.Vs("dispatcheventinsandbox",{ns:this,Nt:{l:s.l,R:h}}),!1))}s.Re&&(t.Nh=s.Re),t.Lr||(t.Lr=()=>!1),this.#t()}t5(t,s){let i=t.Lr;i||(t.mh=this.Mt.t1("")),this.#t(),this.na?t.Lr=()=>{i?.();let{XO:h,KO:n,_O:e}=s,r=[];if(h.t!==0||n.t!==0){let l=new Set(n);for(let u of h){let f=this.na[u]||[];for(let{l:d}of f)l.d(d)}for(let u of Object.W(this.na))for(let f of u)l.ht(f.l)===e&&r.r(f)}else for(let l of Object.W(this.na))r.r(...l);let o=this.mt,a=[];for(let l of r){let{l:u}=l;switch(a.r(u),l.j){case"text":{let d=l.jy||"";o.ft(u,{c:d});break}case"checkbox":case"radiobutton":{let d=l.jy===l.V4;o.ft(u,{c:d});break}case"combobox":case"listbox":{let d=l.jy||"";o.ft(u,{c:d});break}default:continue}let f=document.Ju(`[data-element-id="${u}"]`);f&&(Bt.ht(f)?f.tL(new Event("resetform")):I(`_bindResetFormAction - element not allowed: ${u}`))}return this.Zh&&this.Mt.se?.Vs("dispatcheventinsandbox",{ns:this,Nt:{l:"app",$o:a,R:"ResetForm"}}),!1}:(I('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.Lr=()=>!1))}},Zh=class extends J{constructor(t){super(t,{is:!0})}P(){this.k.p.d("textAnnotation");let t=document.$("img");return t.io=this.tu+"annotation-"+this.s.R.mk()+".svg",t.e("data-l10n-id","pdfjs-text-annotation-type"),t.e("data-l10n-args",JSON.Ke({j:this.s.R})),!this.s.pt&&this.nh&&(this.Bi=!0,this.yi()),this.k.g(t),this.k}},xt=class extends J{P(){return this.k}i5(t){this.s.ra&&(t.Ty?.$l==="CANVAS"&&(t.Ty.Zt=!0),t.Zt=!1)}h5(t){return tt.Hi.ue?t.Yu:t.we}cp(t,s,i,h,n){i.Wi("mouse")?t.o(i,e=>{this.Mt.se?.Vs("dispatcheventinsandbox",{ns:this,Nt:{l:this.s.l,R:h,c:n(e),xo:e.rd,sL:this.h5(e)}})}):t.o(i,e=>{if(i==="blur"){if(!s.Fe||!e.If)return;s.Fe=!1}else if(i==="focus"){if(s.Fe)return;s.Fe=!0}n&&this.Mt.se?.Vs("dispatcheventinsandbox",{ns:this,Nt:{l:this.s.l,R:h,c:n(e)}})})}s1(t,s,i,h){for(let[n,e]of i)(e==="Action"||this.s.ie?.[e])&&(e!=="Focus"&&e!=="Blur"||(s||={Fe:!1}),this.cp(t,s,n,e,h),e!=="Focus"||this.s.ie?.n5?e!=="Blur"||this.s.ie?.e5||this.cp(t,s,"focus","Focus",null):this.cp(t,s,"blur","Blur",null))}i1(t){let s=this.s.hr||null;t.M.hr=s===null?"transparent":E.hn(s[0],s[1],s[2])}Sy(t){let s=["left","center","right"],{r5:i}=this.s.Py,h=this.s.Py.os||9,n=t.M,e,r=o=>Math.At(10*o)/10;if(this.s.Gy){let o=Math.H(this.s.E[3]-this.s.E[1]-2),a=o/(Math.At(o/(Ui*h))||1);e=Math.D(h,r(a/Ui))}else{let o=Math.H(this.s.E[3]-this.s.E[1]-2);e=Math.D(h,r(o/Ui))}n.os=`calc(${e}px * var(--total-scale-factor))`,n.L=E.hn(i[0],i[1],i[2]),this.s.o5!==null&&(n.iL=s[this.s.o5])}nu(t,s){s?t.e("required",!0):t.Jr("required"),t.e("aria-required",s)}},Yh=class extends xt{constructor(t){super(t,{is:t.Tr||t.s.ra||!t.s.Hy&&!!t.s.uu})}c5(t,s,i,h){let n=this.mt;for(let e of this.cu(t.R,t.l))e.Vo&&(e.Vo[s]=i),n.ft(e.l,{[h]:i})}P(){let t=this.mt,s=this.s.l;this.k.p.d("textWidgetAnnotation");let i=null;if(this.Tr){let h=t.rc(s,{c:this.s.uu}),n=h.c||"",e=t.rc(s,{ap:this.s.hL}).ap;e&&n.t>e&&(n=n.z(0,e));let r=h.Ir||this.s.St?.et(`
`)||null;r&&this.s.a5&&(r=r.bh(/\s+/g,""));let o={he:n,Ir:r,fu:null,Ur:1,Fe:!1};this.s.Gy?(i=document.$("textarea"),i.St=r??n,this.s.l5&&(i.M.nL="hidden")):(i=document.$("input"),i.j=this.s.Sw?"password":"text",i.e("value",r??n),this.s.l5&&(i.M.eL="hidden")),this.s.ra&&(i.Zt=!0),Bt.d(i),this.Ue=i,i.e("data-element-id",s),i.$c=this.s.lp,i.R=this.s.h1,i.xs=0;let{rL:a,oL:l,cL:u}=this.s,f=!!l&&this.Zh;a&&(i.Nh=a),this.nu(i,this.s.hu),e&&(i.aL=e),i.o("input",w=>{t.ft(s,{c:w.U.c}),this.c5(i,"value",w.U.c,"value"),o.Ir=null}),i.o("resetform",w=>{let A=this.s.up??"";i.c=o.he=A,o.Ir=null});let d=w=>{let{Ir:A}=o;A!=null&&(w.U.c=A),w.U.lL=0};if(this.Zh&&this.zh){i.o("focus",A=>{if(o.Fe)return;let{U:g}=A;if(f&&(g.j=l,u&&(g.u5=u)),o.he){let p=o.he;if(f)if(l==="time"){let m=new Date(p),b=[m.uL(),m.fL(),m.dL()];g.c=b.bt(y=>y.fe().Ea(2,"0")).et(":")}else g.c=new Date(p-$r).f5().Ys(l==="date"?"T":".",1)[0];else g.c=p}o.fu=g.c,o.Ur=1,this.s.ie?.e5||(o.Fe=!0)}),i.o("updatefromsandbox",A=>{this.i5(A.U);let g={c(p){o.he=p.Nt.c??"",f||t.ft(s,{c:o.he.fe()}),p.U.c=o.he},Ir(p){let{Ir:m}=p.Nt;o.Ir=m,m!=null&&p.U!==document.Bn&&(p.U.c=m);let b={Ir:m};f&&(b.c=m),t.ft(s,b)},d5(p){p.U.AL(...p.Nt.d5)},ap:p=>{let{ap:m}=p.Nt,{U:b}=p;if(m===0){b.Jr("maxLength");return}b.e("maxLength",m);let y=o.he;y&&!(y.t<=m)&&(y=y.z(0,m),b.c=o.he=y,t.ft(s,{c:y}),this.Mt.se?.Vs("dispatcheventinsandbox",{ns:this,Nt:{l:s,R:"Keystroke",c:y,n1:!0,Ur:1,fp:b.dp,Ap:b.wp}}))}};this.eu(g,A)}),i.o("keydown",A=>{o.Ur=1;let g=-1;if(A.Qs==="Escape"?g=0:A.Qs!=="Enter"||this.s.Gy?A.Qs==="Tab"&&(o.Ur=3):g=2,g===-1)return;let{c:p}=A.U;o.fu!==p&&(o.fu=p,o.he=p,this.Mt.se?.Vs("dispatcheventinsandbox",{ns:this,Nt:{l:s,R:"Keystroke",c:p,n1:!0,Ur:g,fp:A.U.dp,Ap:A.U.wp}}))});let w=d;d=null,i.o("blur",A=>{if(!o.Fe||!A.If)return;this.s.ie?.n5||(o.Fe=!1);let{U:g}=A,{c:p}=g;if(f){if(p&&l==="time"){let m=p.Ys(":").bt(b=>parseInt(b,10));p=new Date(2e3,0,1,m[0],m[1],m[2]||0).Wy(),g.u5=""}else p.Wi("T")||(p=`${p}T00:00`),p=new Date(p).Wy();g.j="text"}o.he=p,o.fu!==p&&this.Mt.se?.Vs("dispatcheventinsandbox",{ns:this,Nt:{l:s,R:"Keystroke",c:p,n1:!0,Ur:o.Ur,fp:A.U.dp,Ap:A.U.wp}}),w(A)}),this.s.ie?.wL&&i.o("beforeinput",A=>{o.fu=null;let{s:g,U:p}=A,{c:m,dp:b,wp:y}=p,M=b,$=y;switch(A.pL){case"deleteWordBackward":{let k=m.Ia(0,b).pg(/\w*[^\w]*$/);k&&(M-=k[0].t);break}case"deleteWordForward":{let k=m.Ia(b).pg(/^[^\w]*\w*/);k&&($+=k[0].t);break}case"deleteContentBackward":b===y&&(M-=1);break;case"deleteContentForward":b===y&&($+=1)}A.Xs(),this.Mt.se?.Vs("dispatcheventinsandbox",{ns:this,Nt:{l:s,R:"Keystroke",c:m,A5:g||"",n1:!1,fp:M,Ap:$}})}),this.s1(i,o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.U.c)}if(d&&i.o("blur",d),this.s.a5){let w=(this.s.E[2]-this.s.E[0])/e;i.p.d("comb"),i.M.gL=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else i=document.$("div"),i.St=this.s.uu,i.M.mL="middle",i.M.uc="table-cell",this.s.ra&&(i.Zt=!0);return this.Sy(i),this.i1(i),this.ru(i),this.k.g(i),this.k}},Xh=class extends xt{constructor(t){super(t,{is:!!t.s.ra})}},Kh=class extends xt{constructor(t){super(t,{is:t.Tr})}P(){let t=this.mt,s=this.s,i=s.l,h=t.rc(i,{c:s.Yh===s.uu}).c;typeof h=="string"&&(h=h!=="Off",t.ft(i,{c:h})),this.k.p.d("buttonWidgetAnnotation","checkBox");let n=document.$("input");return Bt.d(n),n.e("data-element-id",i),n.$c=s.lp,this.nu(n,this.s.hu),n.j="checkbox",n.R=s.h1,h&&n.e("checked",!0),n.e("exportValue",s.Yh),n.xs=0,n.o("change",e=>{let{R:r,Un:o}=e.U;for(let a of this.cu(r,i)){let l=o&&a.Yh===s.Yh;a.Vo&&(a.Vo.Un=l),t.ft(a.l,{c:l})}t.ft(i,{c:o})}),n.o("resetform",e=>{let r=s.up||"Off";e.U.Un=r===s.Yh}),this.Zh&&this.zh&&(n.o("updatefromsandbox",e=>{let r={c(o){o.U.Un=o.Nt.c!=="Off",t.ft(i,{c:o.U.Un})}};this.eu(r,e)}),this.s1(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.U.Un)),this.i1(n),this.ru(n),this.k.g(n),this.k}},di=class extends xt{constructor(t){super(t,{is:t.Tr})}P(){this.k.p.d("buttonWidgetAnnotation","radioButton");let t=this.mt,s=this.s,i=s.l,h=t.rc(i,{c:s.uu===s.pp}).c;if(typeof h=="string"&&(h=h!==s.pp,t.ft(i,{c:h})),h)for(let e of this.cu(s.h1,i))t.ft(e.l,{c:!1});let n=document.$("input");if(Bt.d(n),n.e("data-element-id",i),n.$c=s.lp,this.nu(n,this.s.hu),n.j="radio",n.R=s.h1,h&&n.e("checked",!0),n.xs=0,n.o("change",e=>{let{R:r,Un:o}=e.U;for(let a of this.cu(r,i))t.ft(a.l,{c:!1});t.ft(i,{c:o})}),n.o("resetform",e=>{let r=s.up;e.U.Un=r!=null&&r===s.pp}),this.Zh&&this.zh){let e=s.pp;n.o("updatefromsandbox",r=>{let o={c:a=>{let l=e===a.Nt.c;for(let u of this.cu(a.U.R)){let f=l&&u.l===i;u.Vo&&(u.Vo.Un=f),t.ft(u.l,{c:f})}}};this.eu(o,r)}),this.s1(n,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],r=>r.U.Un)}return this.i1(n),this.ru(n),this.k.g(n),this.k}},_h=class extends bs{constructor(t){super(t,{bi:t.s.Hy})}P(){let t=super.P();t.p.d("buttonWidgetAnnotation","pushButton");let s=t.Ym;return this.Zh&&this.zh&&s&&(this.ru(s),s.o("updatefromsandbox",i=>{this.eu({},i)})),t}},tn=class extends xt{constructor(t){super(t,{is:t.Tr})}P(){this.k.p.d("choiceWidgetAnnotation");let t=this.mt,s=this.s.l,i=t.rc(s,{c:this.s.uu}),h=document.$("select");Bt.d(h),h.e("data-element-id",s),h.$c=this.s.lp,this.nu(h,this.s.hu),h.R=this.s.h1,h.xs=0;let n=this.s.Qy&&this.s.Qi.t>0;this.s.Qy||(h.rt=this.s.Qi.t,this.s.bL&&(h.Vy=!0)),h.o("resetform",l=>{let u=this.s.up;for(let f of h.Qi)f.rh=f.c===u});for(let l of this.s.Qi){let u=document.$("option");u.St=l.gp,u.c=l.Yh,i.c.Wi(l.Yh)&&(u.e("selected",!0),n=!1),h.g(u)}let e=null;if(n){let l=document.$("option");l.c=" ",l.e("hidden",!0),l.e("selected",!0),h.Fm(l),e=()=>{l.x(),h.je("input",e),e=null},h.o("input",e)}let r=l=>{let u=l?"value":"textContent",{Qi:f,Vy:d}=h;return d?Array.prototype.Kt.EA(f,w=>w.rh).bt(w=>w[u]):f.J1===-1?null:f[f.J1][u]},o=r(!1),a=l=>{let u=l.U.Qi;return Array.prototype.bt.EA(u,f=>({gp:f.St,Yh:f.c}))};return this.Zh&&this.zh?(h.o("updatefromsandbox",l=>{let u={c(f){e?.();let d=f.Nt.c,w=new Set(Array.uf(d)?d:[d]);for(let A of h.Qi)A.rh=w.ht(A.c);t.ft(s,{c:r(!0)}),o=r(!1)},yL(f){h.Vy=!0},x(f){let d=h.Qi,w=f.Nt.x;d[w].rh=!1,h.x(w),d.t>0&&Array.prototype.zy.EA(d,A=>A.rh)===-1&&(d[0].rh=!0),t.ft(s,{c:r(!0),vi:a(f)}),o=r(!1)},tt(f){for(;h.t!==0;)h.x(0);t.ft(s,{c:null,vi:[]}),o=r(!1)},w5(f){let{mp:d,gp:w,Yh:A}=f.Nt.w5,g=h.yh[d],p=document.$("option");p.St=w,p.c=A,g?g.Pf(p):h.g(p),t.ft(s,{c:r(!0),vi:a(f)}),o=r(!1)},vi(f){let{vi:d}=f.Nt;for(;h.t!==0;)h.x(0);for(let w of d){let{gp:A,Yh:g}=w,p=document.$("option");p.St=A,p.c=g,h.g(p)}h.Qi.t>0&&(h.Qi[0].rh=!0),t.ft(s,{c:r(!0),vi:a(f)}),o=r(!1)},p5(f){let d=new Set(f.Nt.p5);for(let w of f.U.Qi)w.rh=d.ht(w.mp);t.ft(s,{c:r(!0)}),o=r(!1)},g5(f){f.U.$c=!f.Nt.g5}};this.eu(u,l)}),h.o("input",l=>{let u=r(!0),f=r(!1);t.ft(s,{c:u}),l.Xs(),this.Mt.se?.Vs("dispatcheventinsandbox",{ns:this,Nt:{l:s,R:"Keystroke",c:o,A5:f,ML:u,n1:!1,Ur:1,$L:!1}})}),this.s1(h,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],l=>l.U.c)):h.o("input",function(l){t.ft(s,{c:r(!0)})}),this.s.Qy&&this.Sy(h),this.i1(h),this.ru(h),this.k.g(h),this.k}},ys=class extends J{constructor(t){let{s,De:i,a:h}=t,n=!!h.oa;if(super(t,{is:!n&&J.tp(s)}),this.De=i,n&&J.tp(s)){let e=this.xt=this.#t();for(let r of i)r.xt=e}else this.xt=null}#t(){return new sn({k:this.k,L:this.s.L,K0:this.s.K0,ms:this.s.ms||this.s.Ks,Ai:this.s.Ai,rs:this.s.rs,E:this.s.E,op:this.s.op||null,a:this.a,De:this.De,Gu:this.s.Gu,Jy:this.a.oa})}P(){let{k:t}=this;t.p.d("popupAnnotation"),t.Xw="comment";let s=this.xt=this.#t(),i=[];for(let h of this.De)h.xt=s,h.k.Cf="dialog",i.r(h.s.l),h.zo();return this.k.e("aria-controls",i.bt(h=>`${Wt}${h}`).et(",")),this.k}},sn=class{#t=null;#s=this.#Q.N(this);#h=this.#S.N(this);#i=this.#U.N(this);#r=this.#$.N(this);#e=null;#n=null;#o=null;#a=null;#c=null;#f=null;#l=null;#d=!1;#p=null;#A=null;#u=null;#w=null;#g=null;#b=null;#m=null;#v=null;#k=null;#M=null;#E=!1;#y=null;#x=null;constructor({k:t,L:s,De:i,K0:h,ms:n,Ai:e,rs:r,a:o,E:a,op:l,Gu:u,Jy:f=null}){this.#n=t,this.#k=h,this.#o=e,this.#v=r,this.#f=o,this.#e=s,this.#m=a,this.#l=l,this.#c=i,this.#t=f,this.#y=i[0],this.#a=ds.Ug(n),this.e1=i.kL(d=>d.Or()),f||(this.#O(),this.#n.Zt=!0,u&&this.#$())}#O(){if(this.#A)return;this.#A=new AbortController;let{w:t}=this.#A;for(let s of this.e1)s.o("click",this.#r,{w:t}),s.o("pointerenter",this.#i,{w:t}),s.o("pointerleave",this.#h,{w:t}),s.p.d("popupTriggerArea");for(let s of this.#c)s.k?.o("keydown",this.#s,{w:t})}#C(){let t=this.#c.xL(s=>s.Iy);t&&(this.#g=t.ip(t.Me))}bp(){if(this.#w){this.#w.il||this.#y.k.yp(this.#w);return}if(this.#g||this.#C(),!this.#g)return;let{w:t}=this.#A=new AbortController,s=this.#y.Bi,i=()=>{this.#t.tf(this,!0,void 0,!s)},h=()=>{this.#t.tf(this,!1,!0,!s)},n=()=>{this.#t.tf(this,!1,!1)};if(s){this.#w=this.#y.k;for(let e of this.e1)e.Cf="dialog",e.Hd="commentPopup",e.o("keydown",this.#s,{w:t}),e.o("click",i,{w:t}),e.o("pointerenter",h,{w:t}),e.o("pointerleave",n,{w:t}),e.p.d("popupTriggerArea")}else{let e=this.#w=document.$("button");e.Gt="annotationCommentButton";let r=this.#y.k;e.M.Rh=r.M.Rh+1,e.xs=0,e.Cf="dialog",e.Hd="commentPopup",e.e("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#T(),e.o("keydown",this.#s,{w:t}),e.o("click",i,{w:t}),e.o("pointerenter",h,{w:t}),e.o("pointerleave",n,{w:t}),r.yp(e)}}#T(){if(this.#y.ou&&!this.#y.Oh)return;this.#w||this.bp();let[t,s]=this.#g,{M:i}=this.#w;i.fn=`calc(${t}%)`,i.Ni=`calc(${s}% - var(--comment-button-dim))`}#F(){this.#y.ou||(this.#w||this.bp(),this.#w.M.hr=this.Nf||"")}get Nf(){let{L:t,Jt:s}=this.#y.sp;return t?this.#f.oa.bd(t,s):null}Ix(){setTimeout(()=>{this.#w?.gt()},0)}Th(){let{rs:t,L:s,Jt:i,Ks:h,ms:n}=this.#y.sp;return{Ai:{Pt:this.Yt},rs:t,L:s,Jt:i,Ks:h,ms:n}}get Gx(){return this.#w}get Yt(){return this.#x||=this.#y.ea,this.#x}set Yt(t){t!==this.Yt&&(this.#y.ea=this.#x=t)}gt(){this.#y.k?.gt()}get hA(){return this.#y.ha.di()}Pd({rh:t,sx:s}){this.#w&&(this.#w.p.$t("selected",t),this.#w.Gd=s)}Ux(t){this.#w.p.$t("selected",t)}get nA(){if(this.#b)return this.#b;let{A:t,f:s,n:i}=this.#w.di(),{A:h,f:n,i:e,n:r}=this.#y.ha.di();return[(t-h)/e,(s+i-n)/r]}set nA(t){this.#b=t}jd(){return this.#b===null}get Me(){return this.#g}get Fd(){return this.#w.di().i/this.hA.i}Wa(t){let[s,i]=this.#b||this.Me.bt(a=>a/100),h=this.hA,{A:n,f:e,i:r,n:o}=h;this.#t.w3(null,this,n+s*r,e+i*o,{...t,Es:h})}P(){if(this.#p)return;let t=this.#p=document.$("div");if(t.Gt="popup",this.#e){let i=t.M.vL=E.hn(...this.#e);t.M.hr=`color-mix(in srgb, ${i} 30%, white)`}let s=document.$("span");if(s.Gt="header",this.#k?.Pt){let i=document.$("span");i.Gt="title",s.g(i),{Ve:i.Ve,Pt:i.St}=this.#k}if(t.g(s),this.#a){let i=document.$("time");i.Gt="popupDate",i.e("data-l10n-id","pdfjs-annotation-date-time-string"),i.e("data-l10n-args",JSON.Ke({NL:this.#a.Wy()})),i.EL=this.#a.f5(),s.g(i)}fe({oc:this.#I||this.#o.Pt,Ve:this.#o?.Ve,Gt:"popupContent"},t),this.#n.g(t)}get#I(){let t=this.#v,s=this.#o;return!t?.Pt||s?.Pt&&s.Pt!==t.Pt?null:this.#v.oc||null}get#D(){return this.#I?.Hs?.M?.os||0}get#j(){return this.#I?.Hs?.M?.L||null}#R(t){let s=[],i={Pt:t,oc:{R:"div",Hs:{Ve:"auto"},yh:[{R:"p",yh:s}]}},h={M:{L:this.#j,os:this.#D?`calc(${this.#D}px * var(--total-scale-factor))`:""}};for(let n of t.Ys(`
`))s.r({R:"span",c:n,Hs:h});return i}#Q(t){t.i3||t.rd||t.we||t.Yu||(t.Qs==="Enter"||t.Qs==="Escape"&&this.#d)&&this.#$()}dn({E:t,xt:s,lt:i}){this.#t?(i?(this.x(),this.#x=null):s&&(s.lt?this.x():(this.#F(),this.#x=s.zi)),t&&(this.#g=null,this.#C(),this.#T())):i||s?.lt?this.x():(this.#O(),this.#M||={Ai:this.#o,rs:this.#v},t&&(this.#u=null),s&&s.zi&&(this.#v=this.#R(s.zi),this.#a=ds.Ug(s.hl),this.#o=null),this.#p?.x(),this.#p=null)}np(){this.#M&&({Ai:this.#o,rs:this.#v}=this.#M,this.#M=null,this.#p?.x(),this.#p=null,this.#u=null)}x(){if(this.#A?.Ut(),this.#A=null,this.#p?.x(),this.#p=null,this.#E=!1,this.#d=!1,this.#w?.x(),this.#w=null,this.e1)for(let t of this.e1)t.p.x("popupTriggerArea")}#N(){if(this.#u!==null)return;let{Nn:{pn:t},ct:{Ji:{Ds:s,Rs:i,Zr:h,Yr:n}}}=this.#f,e=!!this.#l,r=e?this.#l:this.#m;for(let d of this.#c)if(!r||E.Ca(d.s.E,r)!==null){r=d.s.E,e=!0;break}let o=E.Mg([r[0],t[3]-r[1]+t[1],r[2],t[3]-r[3]+t[1]]),a=e?r[2]-r[0]+5:0,l=o[0]+a,u=o[1];this.#u=[100*(l-h)/s,100*(u-n)/i];let{M:f}=this.#n;f.fn=`${this.#u[0]}%`,f.Ni=`${this.#u[1]}%`}#$(){this.#t?this.#t.tf(this,!1):(this.#d=!this.#d,this.#d?(this.#U(),this.#n.o("click",this.#r),this.#n.o("keydown",this.#s)):(this.#S(),this.#n.je("click",this.#r),this.#n.je("keydown",this.#s)))}#U(){this.#p||this.P(),this.Bl?this.#d&&this.#n.p.d("focused"):(this.#N(),this.#n.Zt=!1,this.#n.M.Rh=parseInt(this.#n.M.Rh)+1e3)}#S(){this.#n.p.x("focused"),!this.#d&&this.Bl&&(this.#n.Zt=!0,this.#n.M.Rh=parseInt(this.#n.M.Rh)-1e3)}J4(){this.#E=this.Bl,this.#E&&(this.#n.Zt=!0)}z4(){this.#t||(this.#O(),this.#E&&(this.#p||this.#U(),this.#E=!1,this.#n.Zt=!1))}get Bl(){return!this.#t&&this.#n.Zt===!1}},Ai=class extends J{constructor(t){super(t,{is:!0,bi:!0}),this.St=t.s.St,this.qy=t.s.qy,this.au=U.Ma}P(){if(this.k.p.d("freeTextAnnotation"),this.St){let t=this.Ue=document.$("div");t.p.d("annotationTextContent"),t.e("role","comment");for(let s of this.St){let i=document.$("span");i.St=s,t.g(i)}this.k.g(t)}return!this.s.pt&&this.nh&&(this.Bi=!0,this.yi()),this._0(),this.k}},hn=class extends J{#t=null;constructor(t){super(t,{is:!0,bi:!0})}P(){this.k.p.d("lineAnnotation");let{s:t,i:s,n:i}=this,h=this.Ri.X(s,i,!0),n=this.#t=this.Ri.$("svg:line");return n.e("x1",t.E[2]-t.Mp[0]),n.e("y1",t.E[3]-t.Mp[1]),n.e("x2",t.E[2]-t.Mp[2]),n.e("y2",t.E[3]-t.Mp[3]),n.e("stroke-width",t.Fi.i||1),n.e("stroke","transparent"),n.e("fill","transparent"),h.g(n),this.k.g(h),!t.pt&&this.nh&&(this.Bi=!0,this.yi()),this.k}Or(){return this.#t}zo(){this.k.p.d("highlightArea")}},nn=class extends J{#t=null;constructor(t){super(t,{is:!0,bi:!0})}P(){this.k.p.d("squareAnnotation");let{s:t,i:s,n:i}=this,h=this.Ri.X(s,i,!0),n=t.Fi.i,e=this.#t=this.Ri.$("svg:rect");return e.e("x",n/2),e.e("y",n/2),e.e("width",s-n),e.e("height",i-n),e.e("stroke-width",n||1),e.e("stroke","transparent"),e.e("fill","transparent"),h.g(e),this.k.g(h),!t.pt&&this.nh&&(this.Bi=!0,this.yi()),this.k}Or(){return this.#t}zo(){this.k.p.d("highlightArea")}},en=class extends J{#t=null;constructor(t){super(t,{is:!0,bi:!0})}P(){this.k.p.d("circleAnnotation");let{s:t,i:s,n:i}=this,h=this.Ri.X(s,i,!0),n=t.Fi.i,e=this.#t=this.Ri.$("svg:ellipse");return e.e("cx",s/2),e.e("cy",i/2),e.e("rx",s/2-n/2),e.e("ry",i/2-n/2),e.e("stroke-width",n||1),e.e("stroke","transparent"),e.e("fill","transparent"),h.g(e),this.k.g(h),!t.pt&&this.nh&&(this.Bi=!0,this.yi()),this.k}Or(){return this.#t}zo(){this.k.p.d("highlightArea")}},wi=class extends J{#t=null;constructor(t){super(t,{is:!0,bi:!0}),this.r1="polylineAnnotation",this.o1="svg:polyline"}P(){this.k.p.d(this.r1);let{s:{E:t,CL:s,Fi:i,pt:h},i:n,n:e}=this;if(!s)return this.k;let r=this.Ri.X(n,e,!0),o=[];for(let l=0,u=s.t;l<u;l+=2){let f=s[l]-t[0],d=t[3]-s[l+1];o.r(`${f},${d}`)}o=o.et(" ");let a=this.#t=this.Ri.$(this.o1);return a.e("points",o),a.e("stroke-width",i.i||1),a.e("stroke","transparent"),a.e("fill","transparent"),r.g(a),this.k.g(r),!h&&this.nh&&(this.Bi=!0,this.yi()),this.k}Or(){return this.#t}zo(){this.k.p.d("highlightArea")}},rn=class extends wi{constructor(t){super(t),this.r1="polygonAnnotation",this.o1="svg:polygon"}},on=class extends J{constructor(t){super(t,{is:!0,bi:!0})}P(){return this.k.p.d("caretAnnotation"),!this.s.pt&&this.nh&&(this.Bi=!0,this.yi()),this.k}},Ms=class extends J{#t=null;#s=[];constructor(t){super(t,{is:!0,bi:!0}),this.r1="inkAnnotation",this.o1="svg:polyline",this.au=this.s.TL==="InkHighlight"?U.ki:U._o}#h(t,s){switch(t){case 90:return{I:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,i:s[3]-s[1],n:s[2]-s[0]};case 180:return{I:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,i:s[2]-s[0],n:s[3]-s[1]};case 270:return{I:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,i:s[3]-s[1],n:s[2]-s[0]};default:return{I:`translate(${-s[0]},${s[3]}) scale(1,-1)`,i:s[2]-s[0],n:s[3]-s[1]}}}P(){this.k.p.d(this.r1);let{s:{E:t,C:s,iu:i,Fi:h,pt:n}}=this,{I:e,i:r,n:o}=this.#h(s,t),a=this.Ri.X(r,o,!0),l=this.#t=this.Ri.$("svg:g");a.g(l),l.e("stroke-width",h.i||1),l.e("stroke-linecap","round"),l.e("stroke-linejoin","round"),l.e("stroke-miterlimit",10),l.e("stroke","transparent"),l.e("fill","transparent"),l.e("transform",e);for(let u=0,f=i.t;u<f;u++){let d=this.Ri.$(this.o1);this.#s.r(d),d.e("points",i[u].et(",")),l.g(d)}return!n&&this.nh&&(this.Bi=!0,this.yi()),this.k.g(a),this._0(),this.k}dn(t){super.dn(t);let{ys:s,Wt:i,E:h}=t,n=this.#t;if(s>=0&&n.e("stroke-width",s||1),i)for(let e=0,r=this.#s.t;e<r;e++)this.#s[e].e("points",i[e].et(","));if(h){let{I:e,i:r,n:o}=this.#h(this.s.C,h);n.sm.e("viewBox",`0 0 ${r} ${o}`),n.e("transform",e)}}Or(){return this.#s}zo(){this.k.p.d("highlightArea")}},pi=class extends J{constructor(t){super(t,{is:!0,bi:!0,Kl:!0}),this.au=U.ki}P(){let{s:{Re:t,pt:s}}=this;if(!s&&this.nh&&(this.Bi=!0,this.yi()),this.k.p.d("highlightAnnotation"),this._0(),t){let i=document.$("mark");i.p.d("overlaidText"),i.St=t,this.k.g(i)}return this.k}},cn=class extends J{constructor(t){super(t,{is:!0,bi:!0,Kl:!0})}P(){let{s:{Re:t,pt:s}}=this;if(!s&&this.nh&&(this.Bi=!0,this.yi()),this.k.p.d("underlineAnnotation"),t){let i=document.$("u");i.p.d("overlaidText"),i.St=t,this.k.g(i)}return this.k}},an=class extends J{constructor(t){super(t,{is:!0,bi:!0,Kl:!0})}P(){let{s:{Re:t,pt:s}}=this;if(!s&&this.nh&&(this.Bi=!0,this.yi()),this.k.p.d("squigglyAnnotation"),t){let i=document.$("u");i.p.d("overlaidText"),i.St=t,this.k.g(i)}return this.k}},ln=class extends J{constructor(t){super(t,{is:!0,bi:!0,Kl:!0})}P(){let{s:{Re:t,pt:s}}=this;if(!s&&this.nh&&(this.Bi=!0,this.yi()),this.k.p.d("strikeoutAnnotation"),t){let i=document.$("s");i.p.d("overlaidText"),i.St=t,this.k.g(i)}return this.k}},gi=class extends J{constructor(t){super(t,{is:!0,bi:!0}),this.au=U.Hr}P(){return this.k.p.d("stampAnnotation"),this.k.e("role","img"),!this.s.pt&&this.nh&&(this.Bi=!0,this.yi()),this._0(),this.k}},un=class extends J{#t=null;constructor(t){super(t,{is:!0});let{Ac:s}=this.s;this.Hh=s.Hh,this.lu=s.lu,this.Mt.se?.Vs("fileattachmentannotation",{ns:this,...s})}P(){this.k.p.d("fileAttachmentAnnotation");let{k:t,s}=this,i;s.Hy||s.jc===0?i=document.$("div"):(i=document.$("img"),i.io=`${this.tu}annotation-${/paperclip/i.xh(s.R)?"paperclip":"pushpin"}.svg`,s.jc&&s.jc<1&&(i.M=`filter: opacity(${Math.At(100*s.jc)}%);`)),i.o("dblclick",this.#s.N(this)),this.#t=i;let{ue:h}=tt.Hi;return t.o("keydown",n=>{n.Qs==="Enter"&&(h?n.Yu:n.we)&&this.#s()}),!s.pt&&this.nh?(this.Bi=!0,this.yi()):i.p.d("popupTriggerArea"),t.g(i),t}Or(){return this.#t}zo(){this.k.p.d("highlightArea")}#s(){this._l?.s5(this.lu,this.Hh)}},fn=class c{#t=null;#s=null;#h=null;#i=new Map;#r=null;#e=null;#n=[];#o=!1;constructor({h:t,m5:s,Ce:i,OL:h,Nn:n,ct:e,b5:r,Jy:o,Mt:a,mt:l}){this.h=t,this.#t=s,this.#s=i,this.#r=r||null,this.#e=a||null,this.#h=l||new ws,this.Nn=n,this.ct=e,this.Rh=0,this.Zy=h,this.oa=o||null}LL(){return this.#i.rt>0}async P(t){let{IL:s}=t,i=this.h;Ut(i,this.ct);let h=new Map,n=[],e={s:null,ha:i,Mt:this.#e,_l:t._l,tu:t.tu||"",Tr:t.Tr!==!1,Ri:new qt,mt:this.#h,Qo:t.Qo===!0,Zh:t.Zh===!0,zh:t.zh,Oy:t.Oy,a:this,De:null};for(let r of s){if(r.UL)continue;let o=r.Qn===K.tc;if(o){let u=h.m(r.l);if(!u)continue;if(!this.oa){n.r(r);continue}e.De=u}else if(r.E[2]===r.E[0]||r.E[3]===r.E[1])continue;e.s=r;let a=rs.X(e);if(!a.is)continue;if(!o&&(this.#n.r(a),r.pt)){let u=h.m(r.pt);u?u.r(a):h.y(r.pt,[a])}let l=a.P();r.Zt&&(l.M.tn="hidden"),a.Ly&&(this.#i.y(a.s.l,a),this.Zy?.Pn(a))}await this.#a();for(let r of n){let o=e.De=h.m(r.l);e.s=r;let a=rs.X(e);if(!a.is)continue;let l=a.P();a.Ue.l=`${Wt}${r.l}`,r.Zt&&(l.M.tn="hidden"),o.Vi(-1).k.yp(l)}this.#c()}async#a(){if(this.#n.t===0)return;this.h.Yy();let t=[];if(!this.#o){this.#o=!0;for(let{Ue:i,s:{l:h}}of this.#n){let n=i.l=`${Wt}${h}`;t.r(this.#r?.y5(n).wt(e=>{if(e)for(let[r,o]of e)i.e(r,o)}))}}this.#n.du(({s:{E:[i,h,n,e]}},{s:{E:[r,o,a,l]}})=>{if(i===n&&h===e)return 1;if(r===a&&o===l)return-1;let u=(h+e)/2,f=(o+l)/2;return u>=l&&f<=h?-1:f>=e&&u<=o?1:(i+n)/2-(r+a)/2});let s=document.Nk();for(let i of this.#n)s.g(i.k),this.oa?(i.ou?.xt||i.xt)?.bp():i.ou&&s.g(i.ou.P());if(this.h.g(s),await Promise.mf(t),this.#t)for(let i of this.#n)this.#t.DL(i.Ue,!1)}async RL(t){let s={s:null,ha:this.h,Mt:this.#e,Ri:new qt,a:this};for(let i of t){i.Fi||=c.M5,s.s=i;let h=rs.X(s);h.is&&(h.P(),h.Ue.l=`${Wt}${i.l}`,this.#n.r(h))}await this.#a()}Ae({ct:t}){let s=this.h;this.ct=t,Ut(s,{C:t.C}),this.#c(),s.Zt=!1}#c(){if(!this.#s)return;let t=this.h;for(let[s,i]of this.#s){let h=t.Ju(`[data-annotation-id="${s}"]`);if(!h)continue;i.Gt="annotationContent";let{on:n}=h;n?n.$l==="CANVAS"?n.BL(i):n.p.$s("annotationContent")?n.yp(i):n.Pf(i):h.g(i);let e=this.#i.m(s);e&&(e.Xy?(this.Zy?.V3(s,h.l,i),e.Xy=!1):e.O=i)}this.#s.tt()}Ky(){return Array.xi(this.#i.W())}$p(t){return this.#i.m(t)}Qx(t){let{h:s}=this,{l:i,C:h}=t,n=new qh({s:{l:i,E:t.Wn(),C:h},Oh:t,ha:s,a:this,Qo:!!this.oa,Mt:this.#e,mt:this.#h});return n.P(),n.Ue.l=`${Wt}${i}`,n.q4(),this.#n.r(n),n}Z4(t){let s=this.#n.zy(h=>h.s.l===t);if(s<0)return;let[i]=this.#n.cn(s,1);this.#t?._y(i.Ue)}$5(t){if(t.t!==0){for(let s of t)s.Wx(this);this.#a()}}Bh(t=!1){this.h.p.$t("disabled",!t)}static get M5(){return D(this,"_defaultBorderStyle",Object.to({i:1,tM:1,M:re,FL:[3],S4:0,P4:0}))}},Ss=/\r\n?|\n/g,dn=class c extends W{#t="";#s=`${this.l}-editor`;#h=null;#i;Jo=null;static jL="";static c1=0;static ne=null;static kp=10;static get co(){let t=c.prototype,s=n=>n.ot(),i=Rt.cd,h=Rt.ad;return D(this,"_keyboardManager",new Dt([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.zs,{h3:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.zs],[["ArrowLeft","mac+ArrowLeft"],t.Dr,{Ht:[-i,0],Ms:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.Dr,{Ht:[-h,0],Ms:s}],[["ArrowRight","mac+ArrowRight"],t.Dr,{Ht:[i,0],Ms:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.Dr,{Ht:[h,0],Ms:s}],[["ArrowUp","mac+ArrowUp"],t.Dr,{Ht:[0,-i],Ms:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.Dr,{Ht:[0,-h],Ms:s}],[["ArrowDown","mac+ArrowDown"],t.Dr,{Ht:[0,i],Ms:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.Dr,{Ht:[0,h],Ms:s}]]))}static un="freetext";static be=U.Ma;constructor(t){super({...t,R:"freeTextEditor"}),this.L=t.L||c.ne||W.dl,this.#i=t.os||c.kp,this.F||this.b.af("pdfjs-editor-freetext-added-alert"),this.Im=!1}static lh(t,s){W.lh(t,s);let i=getComputedStyle(document.Um);this.c1=parseFloat(i.Dm("--freetext-padding"))}static gf(t,s){switch(t){case R.$a:c.kp=s;break;case R.sc:c.ne=s}}lo(t,s){switch(t){case R.$a:this.#r(s);break;case R.sc:this.#e(s)}}static get qa(){return[[R.$a,c.kp],[R.sc,c.ne||W.dl]]}get wo(){return[[R.$a,this.#i],[R.sc,this.L]]}get nr(){return this.Jo||=new ui(this),[["colorPicker",this.Jo]]}get Kw(){return R.sc}#r(t){let s=h=>{this.st.M.os=`calc(${h}px * var(--total-scale-factor))`,this.Js(0,-(h-this.#i)*this.wl),this.#i=h,this.#o()},i=this.#i;this.ni({Ci:s.N(this,t),vs:s.N(this,i),qe:this.b.Ka.N(this.b,this),ch:!0,j:R.$a,ja:!0,Sa:!0})}ln(){this.st.M.L=this.L,this.Jo?.Ae(this.L),super.ln()}#e(t){let s=h=>{this.L=h,this.ln()},i=this.L;this.ni({Ci:s.N(this,t),vs:s.N(this,i),qe:this.b.Ka.N(this.b,this),ch:!0,j:R.sc,ja:!0,Sa:!0})}Dr(t,s){this.b.pe(t,s,!0)}Xd(){let t=this.wl;return[-c.c1*t,-(c.c1+this.#i)*t]}Yi(){this.a&&(super.Yi(),this.h!==null&&(this.Ti||this.a.d(this)))}bl(){if(!super.bl())return!1;this.a1.p.x("enabled"),this.st.l1=!0,this.Dh=!1,this.h.Jr("aria-activedescendant"),this.#h=new AbortController;let t=this.b.hi(this.#h);return this.st.o("keydown",this.k5.N(this),{w:t}),this.st.o("focus",this.x5.N(this),{w:t}),this.st.o("blur",this.v5.N(this),{w:t}),this.st.o("input",this.N5.N(this),{w:t}),this.st.o("paste",this.E5.N(this),{w:t}),!0}Qf(){return super.Qf()?(this.a1.p.d("enabled"),this.st.l1=!1,this.h.e("aria-activedescendant",this.#s),this.Dh=!0,this.#h?.Ut(),this.#h=null,this.h.gt({Ml:!0}),this.Rn=!1,this.a.h.p.d("freetextEditing"),!0):!1}qd(t){this.vh&&(super.qd(t),t.U!==this.st&&this.st.gt())}ml(t){this.i||(this.bl(),t&&this.st.gt(),this.cl?.ul&&this.Jd(),this.cl=null)}ot(){return!this.st||this.st.Ge.C1()===""}x(){this.Rn=!1,this.a&&(this.a.me(!0),this.a.h.p.d("freetextEditing")),super.x()}#n(){let t=[];this.st.V1();let s=null;for(let i of this.st.xp)(s?.nf!==Node.ef||i.$l!=="BR")&&(t.r(c.#a(i)),s=i);return t.et(`
`)}#o(){let[t,s]=this.Es,i;if(this.Ti)i=this.h.di();else{let{Lh:h,h:n}=this,e=n.M.uc,r=n.p.$s("hidden");n.p.x("hidden"),n.M.uc="hidden",h.h.g(this.h),i=n.di(),n.x(),n.M.uc=e,n.p.$t("hidden",r)}this.C%180==this.$e%180?(this.i=i.i/t,this.n=i.n/s):(this.i=i.n/t,this.n=i.i/s),this.Xi()}ir(){if(!this.Al())return;super.ir(),this.Qf();let t=this.#t,s=this.#t=this.#n().SL();if(t===s)return;let i=h=>{this.#t=h,h?(this.#c(),this.b.Yi(this),this.#o()):this.x()};this.ni({Ci:()=>{i(s)},vs:()=>{i(t)},ch:!1}),this.#o()}Rd(){return this.Al()}pf(){this.bl(),this.st.gt()}kd(t){t.U===this.h&&t.Qs==="Enter"&&(this.pf(),t.Xs())}k5(t){c.co.rn(this,t)}x5(t){this.Rn=!0}v5(t){this.Rn=!1}N5(t){this.a.h.p.$t("freetextEditing",this.ot())}rr(){this.st.e("role","comment"),this.st.Jr("aria-multiline")}xe(){this.st.e("role","textbox"),this.st.e("aria-multiline",!0)}get Xm(){return!0}P(){if(this.h)return this.h;let t,s;(this.Gn||this.F)&&(t=this.A,s=this.f),super.P(),this.st=document.$("div"),this.st.Gt="internal",this.st.e("id",this.#s),this.st.e("data-l10n-id","pdfjs-free-text2"),this.st.e("data-l10n-attrs","default-content"),this.xe(),this.st.l1=!0;let{M:i}=this.st;if(i.os=`calc(${this.#i}px * var(--total-scale-factor))`,i.L=this.L,this.h.g(this.st),this.a1=document.$("div"),this.a1.p.d("overlay","enabled"),this.h.g(this.a1),this.Gn||this.F){let[h,n]=this.Es;if(this.F){let{Kf:e}=this.Uh,[r,o]=this.Xd();[r,o]=this.$x(r,o);let[a,l]=this.Cs,[u,f]=this.kc,d,w;switch(this.C){case 0:d=t+(e[0]-u)/a,w=s+this.n-(e[1]-f)/l;break;case 90:d=t+(e[0]-u)/a,w=s-(e[1]-f)/l,[r,o]=[o,-r];break;case 180:d=t-this.i+(e[0]-u)/a,w=s-(e[1]-f)/l,[r,o]=[-r,-o];break;case 270:d=t+(e[0]-u-this.n*l)/a,w=s+(e[1]-f-this.i*a)/l,[r,o]=[-o,r]}this.Rm(d*h,w*n,r,o)}else this.Df(t,s);this.#c(),this.Dh=!0,this.st.l1=!1}else this.Dh=!1,this.st.l1=!0;return this.h}static#a(t){return(t.nf===Node.ef?t.vp:t.Ge).bh(Ss,"")}E5(t){let s=t.xd||window.xd,{m4:i}=s;if(i.t===1&&i[0]==="text/plain")return;t.Xs();let h=c.#l(s.Th("text")||"").bh(Ss,`
`);if(!h)return;let n=window.Qa();if(!n.$m)return;this.st.V1(),n.PL();let e=n.km(0);if(!h.Wi(`
`)){e.GL(document.cc(h)),this.st.V1(),n.HL();return}let{WL:r,QL:o}=e,a=[],l=[];if(r.nf===Node.ef){let d=r.sm;if(l.r(r.vp.z(o).bh(Ss,"")),d!==this.st){let w=a;for(let A of this.st.xp)A!==d?w.r(c.#a(A)):w=l}a.r(r.vp.z(0,o).bh(Ss,""))}else if(r===this.st){let d=a,w=0;for(let A of this.st.xp)w++===o&&(d=l),d.r(c.#a(A))}this.#t=`${a.et(`
`)}${h}${l.et(`
`)}`,this.#c();let u=new Range,f=Math.vg(a.bt(d=>d.t));for(let{on:d}of this.st.xp)if(d.nf===Node.ef){let w=d.vp.t;if(f<=w){u.VL(d,f),u.zL(d,f);break}f-=w}n.JL(),n.qL(u)}#c(){if(this.st.Yy(),this.#t)for(let t of this.#t.Ys(`
`)){let s=document.$("div");s.g(t?document.cc(t):document.$("br")),this.st.g(s)}}#f(){return this.#t.bh("\xA0"," ")}static#l(t){return t.bh(" ","\xA0")}get zf(){return this.st}Wn(){let t=c.c1*this.wl;return this.Wf(t,t)}static async Fs(t,s,i){let h=null;if(t instanceof Ai){let{s:{Py:{os:e,r5:r},E:o,C:a,l,pt:u,rs:f,Ai:d,Ks:w,ms:A},St:g,qy:p,a:{Nn:{Fn:m}}}=t;if(!g||g.t===0)return null;h=t={Qn:U.Ma,L:Array.xi(r),os:e,c:g.et(`
`),Kf:p,Q:m-1,E:o.z(0),C:a,F:l,l,lt:!1,pt:u,Yt:d?.Pt||null,rs:f,Ks:w,ms:A}}let n=await super.Fs(t,s,i);return n.#i=t.os,n.L=E.hn(...t.L),n.#t=c.#l(t.c),n.Uh=h,t.Yt&&n.Hf(t),n}es(t=!1){if(this.ot())return null;if(this.lt)return this.yl();let s=W.ll.Ku(this.Ti?getComputedStyle(this.st).L:this.L),i=Object.$h(super.es(t),{L:s,os:this.#i,c:this.#f()});return this.Je(i),t?(i.Vf=!0,i):this.F&&!this.#d(i)?null:(i.l=this.F,i)}#d(t){let{c:s,os:i,L:h,Q:n}=this.Uh;return this.er||this.Ff||t.c!==s||t.os!==i||t.L.ff((e,r)=>e!==h[r])||t.Q!==n}Pn(t){let s=super.Pn(t);if(!s)return null;let{M:i}=s;i.os=`calc(${this.#i}px * var(--total-scale-factor))`,i.L=this.L,s.Yy();for(let h of this.#t.Ys(`
`)){let n=document.$("div");n.g(h?document.cc(h):document.$("br")),s.g(n)}return t.dn({E:this.Wn(),xt:this.b.qu()||this.er?this.Yt:{zi:this.#t}}),s}eA(t){super.eA(t),t.np()}},N=class{static u1=1e-4;Qt(){G("Abstract method `toSVGPath` must be implemented.")}get ji(){G("Abstract getter `box` must be implemented.")}es(t,s){G("Abstract method `serialize` must be implemented.")}static Xh(t,s,i,h,n,e){e||=new Float32Array(t.t);for(let r=0,o=t.t;r<o;r+=2)e[r]=s+t[r]*h,e[r+1]=i+t[r+1]*n;return e}static Rr(t,s,i,h,n,e){e||=new Float32Array(t.t);for(let r=0,o=t.t;r<o;r+=2)e[r]=s+t[r+1]*h,e[r+1]=i+t[r]*n;return e}static f1(t,s,i,h){h||=new Float32Array(t.t);for(let n=0,e=t.t;n<e;n+=2)h[n]=s+t[n],h[n+1]=i+t[n+1];return h}static Et(t){return Math.At(1e4*t)}static ip(t,s,i,h,n){switch(n){case 90:return[1-s/i,t/h];case 180:return[1-t/i,1-s/h];case 270:return[s/i,1-t/h];default:return[t/i,s/h]}}static ZL(t,s,i){switch(i){case 90:return[1-s,t];case 180:return[1-t,1-s];case 270:return[s,1-t];default:return[t,s]}}static Np(t,s,i,h,n,e){return[(t+5*i)/6,(s+5*h)/6,(5*i+n)/6,(5*h+e)/6,(i+n)/2,(h+e)/2]}},mi=class c{#t;#s=[];#h;#i;#r=[];#e=new Float32Array(18);#n;#o;#a;#c;#f;#l;#d=[];static#p=8;static#A=2;static#u=c.#p+c.#A;constructor({A:t,f:s},i,h,n,e,r=0){this.#t=i,this.#l=n*h,this.#i=e,this.#e.y([NaN,NaN,NaN,NaN,t,s],6),this.#h=r,this.#c=c.#p*h,this.#a=c.#u*h,this.#f=h,this.#d.r(t,s)}ot(){return isNaN(this.#e[8])}#w(){let t=this.#e.gs(4,6),s=this.#e.gs(16,18),[i,h,n,e]=this.#t;return[(this.#n+(t[0]-s[0])/2-i)/n,(this.#o+(t[1]-s[1])/2-h)/e,(this.#n+(s[0]-t[0])/2-i)/n,(this.#o+(s[1]-t[1])/2-h)/e]}d({A:t,f:s}){this.#n=t,this.#o=s;let[i,h,n,e]=this.#t,[r,o,a,l]=this.#e.gs(8,12),u=t-a,f=s-l,d=Math.ei(u,f);if(d<this.#a)return!1;let w=d-this.#c,A=w/d,g=A*u,p=A*f,m=r,b=o;r=a,o=l,a+=g,l+=p,this.#d?.r(t,s);let y=g/w,M=-p/w*this.#l,$=y*this.#l;return this.#e.y(this.#e.gs(2,8),0),this.#e.y([a+M,l+$],4),this.#e.y(this.#e.gs(14,18),12),this.#e.y([a-M,l-$],16),isNaN(this.#e[6])?(this.#r.t===0&&(this.#e.y([r+M,o+$],2),this.#r.r(NaN,NaN,NaN,NaN,(r+M-i)/n,(o+$-h)/e),this.#e.y([r-M,o-$],14),this.#s.r(NaN,NaN,NaN,NaN,(r-M-i)/n,(o-$-h)/e)),this.#e.y([m,b,r,o,a,l],6),!this.ot()):(this.#e.y([m,b,r,o,a,l],6),Math.H(Math.Ob(b-o,m-r)-Math.Ob(p,g))<Math.Fw/2?([r,o,a,l]=this.#e.gs(2,6),this.#r.r(NaN,NaN,NaN,NaN,((r+a)/2-i)/n,((o+l)/2-h)/e),[r,o,m,b]=this.#e.gs(14,18),this.#s.r(NaN,NaN,NaN,NaN,((m+r)/2-i)/n,((b+o)/2-h)/e),!0):([m,b,r,o,a,l]=this.#e.gs(0,6),this.#r.r(((m+5*r)/6-i)/n,((b+5*o)/6-h)/e,((5*r+a)/6-i)/n,((5*o+l)/6-h)/e,((r+a)/2-i)/n,((o+l)/2-h)/e),[a,l,r,o,m,b]=this.#e.gs(12,18),this.#s.r(((m+5*r)/6-i)/n,((b+5*o)/6-h)/e,((5*r+a)/6-i)/n,((5*o+l)/6-h)/e,((r+a)/2-i)/n,((o+l)/2-h)/e),!0))}Qt(){if(this.ot())return"";let t=this.#r,s=this.#s;if(isNaN(this.#e[6])&&!this.ot())return this.#g();let i=[];i.r(`M${t[4]} ${t[5]}`);for(let h=6;h<t.t;h+=6)isNaN(t[h])?i.r(`L${t[h+4]} ${t[h+5]}`):i.r(`C${t[h]} ${t[h+1]} ${t[h+2]} ${t[h+3]} ${t[h+4]} ${t[h+5]}`);this.#m(i);for(let h=s.t-6;h>=6;h-=6)isNaN(s[h])?i.r(`L${s[h+4]} ${s[h+5]}`):i.r(`C${s[h]} ${s[h+1]} ${s[h+2]} ${s[h+3]} ${s[h+4]} ${s[h+5]}`);return this.#b(i),i.et(" ")}#g(){let[t,s,i,h]=this.#t,[n,e,r,o]=this.#w();return`M${(this.#e[2]-t)/i} ${(this.#e[3]-s)/h} L${(this.#e[4]-t)/i} ${(this.#e[5]-s)/h} L${n} ${e} L${r} ${o} L${(this.#e[16]-t)/i} ${(this.#e[17]-s)/h} L${(this.#e[14]-t)/i} ${(this.#e[15]-s)/h} Z`}#b(t){let s=this.#s;t.r(`L${s[4]} ${s[5]} Z`)}#m(t){let[s,i,h,n]=this.#t,e=this.#e.gs(4,6),r=this.#e.gs(16,18),[o,a,l,u]=this.#w();t.r(`L${(e[0]-s)/h} ${(e[1]-i)/n} L${o} ${a} L${l} ${u} L${(r[0]-s)/h} ${(r[1]-i)/n}`)}Ep(t,s,i,h,n,e){return new bi(t,s,i,h,n,e)}Br(){let t=this.#r,s=this.#s,i=this.#e,[h,n,e,r]=this.#t,o=new Float32Array((this.#d?.t??0)+2);for(let u=0,f=o.t-2;u<f;u+=2)o[u]=(this.#d[u]-h)/e,o[u+1]=(this.#d[u+1]-n)/r;if(o[o.t-2]=(this.#n-h)/e,o[o.t-1]=(this.#o-n)/r,isNaN(i[6])&&!this.ot())return this.#v(o);let a=new Float32Array(this.#r.t+24+this.#s.t),l=t.t;for(let u=0;u<l;u+=2)isNaN(t[u])?a[u]=a[u+1]=NaN:(a[u]=t[u],a[u+1]=t[u+1]);l=this.#M(a,l);for(let u=s.t-6;u>=6;u-=6)for(let f=0;f<6;f+=2)isNaN(s[u+f])?(a[l]=a[l+1]=NaN,l+=2):(a[l]=s[u+f],a[l+1]=s[u+f+1],l+=2);return this.#k(a,l),this.Ep(a,o,this.#t,this.#f,this.#h,this.#i)}#v(t){let s=this.#e,[i,h,n,e]=this.#t,[r,o,a,l]=this.#w(),u=new Float32Array(36);return u.y([NaN,NaN,NaN,NaN,(s[2]-i)/n,(s[3]-h)/e,NaN,NaN,NaN,NaN,(s[4]-i)/n,(s[5]-h)/e,NaN,NaN,NaN,NaN,r,o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,(s[16]-i)/n,(s[17]-h)/e,NaN,NaN,NaN,NaN,(s[14]-i)/n,(s[15]-h)/e],0),this.Ep(u,t,this.#t,this.#f,this.#h,this.#i)}#k(t,s){let i=this.#s;return t.y([NaN,NaN,NaN,NaN,i[4],i[5]],s),s+6}#M(t,s){let i=this.#e.gs(4,6),h=this.#e.gs(16,18),[n,e,r,o]=this.#t,[a,l,u,f]=this.#w();return t.y([NaN,NaN,NaN,NaN,(i[0]-n)/r,(i[1]-e)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,(h[0]-n)/r,(h[1]-e)/o],s),s+24}},bi=class extends N{#t;#s=new Float32Array(4);#h;#i;#r;#e;#n;constructor(t,s,i,h,n,e){super(),this.#n=t,this.#r=s,this.#t=i,this.#e=h,this.#h=n,this.#i=e,this.d1=[NaN,NaN],this.A1=[NaN,NaN],this.#o(e);let[r,o,a,l]=this.#s;for(let u=0,f=t.t;u<f;u+=2)t[u]=(t[u]-r)/a,t[u+1]=(t[u+1]-o)/l;for(let u=0,f=s.t;u<f;u+=2)s[u]=(s[u]-r)/a,s[u+1]=(s[u+1]-o)/l}Qt(){let t=[`M${this.#n[4]} ${this.#n[5]}`];for(let s=6,i=this.#n.t;s<i;s+=6)isNaN(this.#n[s])?t.r(`L${this.#n[s+4]} ${this.#n[s+5]}`):t.r(`C${this.#n[s]} ${this.#n[s+1]} ${this.#n[s+2]} ${this.#n[s+3]} ${this.#n[s+4]} ${this.#n[s+5]}`);return t.r("Z"),t.et(" ")}es([t,s,i,h],n){let e=i-t,r=h-s,o,a;switch(n){case 0:o=N.Xh(this.#n,t,h,e,-r),a=N.Xh(this.#r,t,h,e,-r);break;case 90:o=N.Rr(this.#n,t,s,e,r),a=N.Rr(this.#r,t,s,e,r);break;case 180:o=N.Xh(this.#n,i,s,-e,r),a=N.Xh(this.#r,i,s,-e,r);break;case 270:o=N.Rr(this.#n,i,h,-e,-r),a=N.Rr(this.#r,i,h,-e,-r)}return{w1:Array.xi(o),Wt:[Array.xi(a)]}}#o(t){let s=this.#n,i=s[4],h=s[5],n=[i,h,i,h],e=i,r=h,o=i,a=h,l=t?Math.B:Math.D,u=new Float32Array(4);for(let d=6,w=s.t;d<w;d+=6){let A=s[d+4],g=s[d+5];isNaN(s[d])?(E.$g(A,g,n),r>g?(e=A,r=g):r===g&&(e=l(e,A)),a<g?(o=A,a=g):a===g&&(o=l(o,A))):(u[0]=u[1]=1/0,u[2]=u[3]=-1/0,E.xg(i,h,...s.z(d,d+6),u),E.kg(u[0],u[1],u[2],u[3],n),r>u[1]?(e=u[0],r=u[1]):r===u[1]&&(e=l(e,u[0])),a<u[3]?(o=u[2],a=u[3]):a===u[3]&&(o=l(o,u[2]))),i=A,h=g}let f=this.#s;f[0]=n[0]-this.#h,f[1]=n[1]-this.#h,f[2]=n[2]-n[0]+2*this.#h,f[3]=n[3]-n[1]+2*this.#h,this.d1=[e,r],this.A1=[o,a]}get ji(){return this.#s}sM(t,s,i,h,n,e=0){return new mi(t,s,i,h,n,e)}iM(t,s){let[i,h,n,e]=this.#s,[r,o,a,l]=this.#t,u=n*a,f=e*l,d=i*a+r,w=h*l+o,A=this.sM({A:this.#r[0]*u+d,f:this.#r[1]*f+w},this.#t,this.#e,t,this.#i,s??this.#h);for(let g=2;g<this.#r.t;g+=2)A.d({A:this.#r[g]*u+d,f:this.#r[g+1]*f+w});return A.Br()}},$s=class{#t;#s;#h;#i=[];#r=[];constructor(t,s=0,i=0,h=!0){let n=[1/0,1/0,-1/0,-1/0],e=1e-4;for(let{A,f:g,i:p,n:m}of t){let b=Math.It((A-s)/e)*e,y=Math.dt((A+p+s)/e)*e,M=Math.It((g-s)/e)*e,$=Math.dt((g+m+s)/e)*e,k=[b,M,$,!0],x=[y,M,$,!1];this.#i.r(k,x),E.kg(b,M,y,$,n)}let r=n[2]-n[0]+2*i,o=n[3]-n[1]+2*i,a=n[0]-i,l=n[1]-i,u=h?-1/0:1/0,f=1/0,d=this.#i.Vi(h?-1:-2),w=[d[0],d[2]];for(let A of this.#i){let[g,p,m,b]=A;!b&&h?p<f?(f=p,u=g):p===f&&(u=Math.B(u,g)):b&&!h&&(p<f?(f=p,u=g):p===f&&(u=Math.D(u,g))),A[0]=(g-a)/r,A[1]=(p-l)/o,A[2]=(m-l)/o}this.#t=new Float32Array([a,l,r,o]),this.#s=[u,f],this.#h=w}Br(){this.#i.du((s,i)=>s[0]-i[0]||s[1]-i[1]||s[2]-i[2]);let t=[];for(let s of this.#i)s[3]?(t.r(...this.#c(s)),this.#o(s)):(this.#a(s),t.r(...this.#c(s)));return this.#e(t)}#e(t){let s=[],i=new Set;for(let e of t){let[r,o,a]=e;s.r([r,o,e],[r,a,e])}s.du((e,r)=>e[1]-r[1]||e[0]-r[0]);for(let e=0,r=s.t;e<r;e+=2){let o=s[e][2],a=s[e+1][2];o.r(a),a.r(o),i.d(o),i.d(a)}let h=[],n;for(;i.rt>0;){let e=i.W().yf().c,[r,o,a,l,u]=e;i.it(e);let f=r,d=o;for(n=[r,a],h.r(n);;){let w;if(i.ht(l))w=l;else{if(!i.ht(u))break;w=u}i.it(w),[r,o,a,l,u]=w,f!==r&&(n.r(f,d,r,d===o?o:a),f=r),d=d===o?a:o}n.r(f,d)}return new An(h,this.#t,this.#s,this.#h)}#n(t){let s=this.#r,i=0,h=s.t-1;for(;i<=h;){let n=i+h>>1,e=s[n][0];if(e===t)return n;e<t?i=n+1:h=n-1}return h+1}#o([,t,s]){let i=this.#n(t);this.#r.cn(i,0,[t,s])}#a([,t,s]){let i=this.#n(t);for(let h=i;h<this.#r.t;h++){let[n,e]=this.#r[h];if(n!==t)break;if(n===t&&e===s){this.#r.cn(h,1);return}}for(let h=i-1;h>=0;h--){let[n,e]=this.#r[h];if(n!==t)break;if(n===t&&e===s){this.#r.cn(h,1);return}}}#c(t){let[s,i,h]=t,n=[[s,i,h]],e=this.#n(h);for(let r=0;r<e;r++){let[o,a]=this.#r[r];for(let l=0,u=n.t;l<u;l++){let[,f,d]=n[l];if(!(a<=f||d<=o))if(f>=o)if(d>a)n[l][1]=a;else{if(u===1)return[];n.cn(l,1),l--,u--}else n[l][2]=o,d>a&&n.r([s,a,d])}}return n}},An=class extends N{#t;#s;constructor(t,s,i,h){super(),this.#s=t,this.#t=s,this.d1=i,this.A1=h}Qt(){let t=[];for(let s of this.#s){let[i,h]=s;t.r(`M${i} ${h}`);for(let n=2;n<s.t;n+=2){let e=s[n],r=s[n+1];e===i?(t.r(`V${r}`),h=r):r===h&&(t.r(`H${e}`),i=e)}t.r("Z")}return t.et(" ")}es([t,s,i,h],n){let e=[],r=i-t,o=h-s;for(let a of this.#s){let l=new Array(a.t);for(let u=0;u<a.t;u+=2)l[u]=t+a[u]*r,l[u+1]=h-a[u+1]*o;e.r(l)}return e}get ji(){return this.#t}get YL(){return["highlightOutline"]}},ks=class extends mi{Ep(t,s,i,h,n,e){return new wn(t,s,i,h,n,e)}},wn=class extends bi{sM(t,s,i,h,n,e=0){return new ks(t,s,i,h,n,e)}},yi=class c extends W{#t=null;#s=0;#h;#i=null;#r=null;#e=null;#n=null;#o=0;#a=null;#c=null;#f=null;#l=!1;#d=null;#p=null;#A=null;#u="";#w;#g="";static ne=null;static p1=1;static Au=12;static un="highlight";static be=U.ki;static wu=-1;static qo=null;static Cp="";static get co(){let t=c.prototype;return D(this,"_keyboardManager",new Dt([[["ArrowLeft","mac+ArrowLeft"],t.g1,{Ht:[0]}],[["ArrowRight","mac+ArrowRight"],t.g1,{Ht:[1]}],[["ArrowUp","mac+ArrowUp"],t.g1,{Ht:[2]}],[["ArrowDown","mac+ArrowDown"],t.g1,{Ht:[3]}]]))}constructor(t){super({...t,R:"highlightEditor"}),this.L=t.L||c.ne,this.#w=t.ys||c.Au,this.Jt=t.Jt||c.p1,this.#h=t.rf||null,this.#g=t.$d||"",this.#u=t.zi||"",this.Dh=!1,this.gl="pdfjs-editor-highlight-editor",t.Tp>-1?(this.#l=!0,this.#m(t),this.#y()):this.#h&&(this.#t=t.hf,this.#s=t.nm,this.#n=t.em,this.#o=t.rm,this.#b(),this.#y(),this.Oi(this.C)),this.F||this.b.af("pdfjs-editor-highlight-added-alert")}get Km(){return{Ns:"added",j:this.#l?"free_highlight":"highlight",L:this.b.gd(this.L),ys:this.#w,$d:this.#g}}get Jf(){return{j:"highlight",L:this.b.gd(this.L)}}static aA(t){return{XL:t.m("color").rt}}#b(){let t=new $s(this.#h,.001);this.#c=t.Br(),[this.A,this.f,this.i,this.n]=this.#c.ji;let s=new $s(this.#h,.0025,.001,this.b.so==="ltr");this.#e=s.Br();let{d1:i}=this.#c;this.#d=[(i[0]-this.A)/this.i,(i[1]-this.f)/this.n];let{A1:h}=this.#e;this.#p=[(h[0]-this.A)/this.i,(h[1]-this.f)/this.n]}#m({Op:t,Tp:s,ca:i}){if(this.#c=t,this.#e=t.iM(this.#w/2+1.5,.0025),s>=0)this.#f=s,this.#i=i,this.a.Y.hM(s,{Dt:t.ji,ts:{zt:t.Qt()}}),this.#A=this.a.Y.nM({Si:{C5:!0,m1:!0},Dt:this.#e.ji,ts:{zt:this.#e.Qt()}},!0);else if(this.a){let l=this.a.ct.C;this.a.Y.nt(this.#f,{Dt:c.#x(this.#c.ji,(l-this.C+360)%360),ts:{zt:t.Qt()}}),this.a.Y.nt(this.#A,{Dt:c.#x(this.#e.ji,l),ts:{zt:this.#e.Qt()}})}let[h,n,e,r]=t.ji;switch(this.C){case 0:this.A=h,this.f=n,this.i=e,this.n=r;break;case 90:{let[l,u]=this.Es;this.A=n,this.f=1-h,this.i=e*u/l,this.n=r*l/u;break}case 180:this.A=1-h,this.f=1-n,this.i=e,this.n=r;break;case 270:{let[l,u]=this.Es;this.A=1-n,this.f=h,this.i=e*u/l,this.n=r*l/u;break}}let{d1:o}=t;this.#d=[(o[0]-h)/e,(o[1]-n)/r];let{A1:a}=this.#e;this.#p=[(a[0]-h)/e,(a[1]-n)/r]}static lh(t,s){W.lh(t,s),c.ne||=s.fo?.W().yf().c||"#fff066"}static gf(t,s){switch(t){case R.ic:c.ne=s;break;case R.Iu:c.Au=s}}$f(t,s){}get Rg(){return this.#p}get Me(){return this.#d}lo(t,s){switch(t){case R.ic:this.#v(s);break;case R.Iu:this.#k(s)}}static get qa(){return[[R.ic,c.ne],[R.Iu,c.Au]]}get wo(){return[[R.ic,this.L||c.ne],[R.Iu,this.#w||c.Au],[R.ig,this.#l]]}ln(){this.a?.Y.nt(this.#f,{wh:{as:this.L,"fill-opacity":this.Jt}}),this.#r?.Cy(this.L),super.ln()}#v(t){let s=(n,e)=>{this.L=n,this.Jt=e,this.ln()},i=this.L,h=this.Jt;this.ni({Ci:s.N(this,t,c.p1),vs:s.N(this,i,h),qe:this.b.Ka.N(this.b,this),ch:!0,j:R.ic,ja:!0,Sa:!0}),this.Ih({Ns:"color_changed",L:this.b.gd(t)},!0)}#k(t){let s=this.#w,i=h=>{this.#w=h,this.#M(h)};this.ni({Ci:i.N(this,t),vs:i.N(this,s),qe:this.b.Ka.N(this.b,this),ch:!0,j:R.sg,ja:!0,Sa:!0}),this.Ih({Ns:"thickness_changed",ys:t},!0)}get nr(){return this.b.fo?[["colorPicker",this.#r=new li({Oh:this})]]:super.nr}rr(){super.rr(),this.h.p.$t("disabled",!0)}xe(){super.xe(),this.h.p.$t("disabled",!1)}Xi(){return super.Xi(this.#T())}Bf(){return[0,0]}Wf(t,s){return super.Wf(t,s,this.#T())}ml(t){this.F||this.a.Lp(this),t&&this.h.gt()}x(){this.#E(),this.Ih({Ns:"deleted"}),super.x()}Yi(){this.a&&(super.Yi(),this.h!==null&&(this.#y(),this.Ti||this.a.d(this)))}mo(t){let s=!1;this.a&&!t?this.#E():t&&(this.#y(t),s=!this.a&&this.h?.p.$s("selectedEditor")),super.mo(t),this.Ws(this.al),s&&this.po()}#M(t){this.#l&&(this.#m({Op:this.#c.iM(t/2)}),this.Xi(),this.ke())}#E(){this.#f!==null&&this.a&&(this.a.Y.x(this.#f),this.#f=null,this.a.Y.x(this.#A),this.#A=null)}#y(t=this.a){this.#f===null&&({l:this.#f,ca:this.#i}=t.Y.Zo({Dt:this.#c.ji,wh:{ks:"0 0 1 1",as:this.L,"fill-opacity":this.Jt},Si:{X1:!0,m1:this.#l},ts:{zt:this.#c.Qt()}},!1,!0),this.#A=t.Y.nM({Si:{C5:!0,m1:this.#l},Dt:this.#e.ji,ts:{zt:this.#e.Qt()}},this.#l),this.#a&&(this.#a.M.Ry=this.#i))}static#x([t,s,i,h],n){switch(n){case 90:return[1-s-h,t,h,i];case 180:return[1-t-i,1-s-h,i,h];case 270:return[s,1-t-i,h,i]}return[t,s,i,h]}Oi(t){let{Y:s}=this.a,i;this.#l?(t=(t-this.C+360)%360,i=c.#x(this.#c.ji,t)):i=c.#x([this.A,this.f,this.i,this.n],t),s.nt(this.#f,{Dt:i,wh:{"data-main-rotation":t}}),s.nt(this.#A,{Dt:c.#x(this.#e.ji,t),wh:{"data-main-rotation":t}})}P(){if(this.h)return this.h;let t=super.P();this.#u&&(t.e("aria-label",this.#u),t.e("role","mark")),this.#l?t.p.d("free"):this.h.o("keydown",this.#O.N(this),{w:this.b.ls});let s=this.#a=document.$("div");return t.g(s),s.e("aria-hidden","true"),s.Gt="internal",s.M.Ry=this.#i,this.ke(),Ae(this,this.#a,["pointerover","pointerleave"]),this.xe(),t}KL(){this.ye||this.a?.Y.nt(this.#A,{Si:{eM:!0}})}_L(){this.ye||this.a?.Y.nt(this.#A,{Si:{eM:!1}})}#O(t){c.co.rn(this,t)}g1(t){switch(this.a.Zi(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1)}}#C(t){if(!this.#t)return;let s=window.Qa();t?s.jr(this.#t,this.#s):s.jr(this.#n,this.#o)}po(){super.po(),this.#A&&this.a?.Y.nt(this.#A,{Si:{eM:!1,rh:!0}})}Zi(){super.Zi(),this.#A&&(this.a?.Y.nt(this.#A,{Si:{rh:!1}}),this.#l||this.#C(!1))}get Bm(){return!this.#l}Ws(t=this.al){super.Ws(t),this.a&&(this.a.Y.nt(this.#f,{Si:{Zt:!t}}),this.a.Y.nt(this.#A,{Si:{Zt:!t}}))}#T(){return this.#l?this.C:0}#F(){if(this.#l)return null;let[t,s]=this.Cs,[i,h]=this.kc,n=this.#h,e=new Float32Array(8*n.t),r=0;for(let{A:o,f:a,i:l,n:u}of n){let f=o*t+i,d=(1-a)*s+h;e[r]=e[r+4]=f,e[r+1]=e[r+3]=d,e[r+2]=e[r+6]=f+l*t,e[r+5]=e[r+7]=d-u*s,r+=8}return e}#I(t){return this.#c.es(t,this.#T())}static T5(t,s,{U:i,A:h,f:n}){let{A:e,f:r,i:o,n:a}=i.di(),l=new AbortController,u=t.hi(l),f=d=>{l.Ut(),this.#j(t,d)};window.o("blur",f,{w:u}),window.o("pointerup",f,{w:u}),window.o("pointerdown",Y,{Ei:!0,go:!1,w:u}),window.o("contextmenu",ut,{w:u}),i.o("pointermove",this.#D.N(this,t),{w:u}),this.qo=new ks({A:h,f:n},[e,r,o,a],t.J,this.Au/2,s,.001),{l:this.wu,ca:this.Cp}=t.Y.Zo({Dt:[0,0,1,1],wh:{ks:"0 0 1 1",as:this.ne,"fill-opacity":this.p1},Si:{X1:!0,m1:!0},ts:{zt:this.qo.Qt()}},!0,!0)}static#D(t,s){this.qo.d(s)&&t.Y.nt(this.wu,{ts:{zt:this.qo.Qt()}})}static#j(t,s){this.qo.ot()?t.Y.x(this.wu):t.Va(s,!1,{Tp:this.wu,Op:this.qo.Br(),ca:this.Cp,$d:"main_toolbar"}),this.wu=-1,this.qo=null,this.Cp=""}static async Fs(t,s,i){let h=null;if(t instanceof pi){let{s:{su:w,E:A,C:g,l:p,L:m,Jt:b,pt:y,rs:M,Ai:$,Ks:k,ms:x},a:{Nn:{Fn:v}}}=t;h=t={Qn:U.ki,L:Array.xi(m),Jt:b,su:w,rf:null,Q:v-1,E:A.z(0),C:g,F:p,l:p,lt:!1,pt:y,rs:M,Yt:$?.Pt||null,Ks:k,ms:x}}else if(t instanceof Ms){let{s:{iu:w,E:A,C:g,l:p,L:m,Fi:{tM:b},pt:y,rs:M,Ai:$,Ks:k,ms:x},a:{Nn:{Fn:v}}}=t;h=t={Qn:U.ki,L:Array.xi(m),ys:b,iu:w,rf:null,Q:v-1,E:A.z(0),C:g,F:p,l:p,lt:!1,pt:y,rs:M,Yt:$?.Pt||null,Ks:k,ms:x}}let{L:n,su:e,iu:r,Jt:o}=t,a=await super.Fs(t,s,i);a.L=E.hn(...n),a.Jt=o||1,r&&(a.#w=t.ys),a.Uh=h,t.Yt&&a.Hf(t);let[l,u]=a.Cs,[f,d]=a.kc;if(e){let w=a.#h=[];for(let A=0;A<e.t;A+=8)w.r({A:(e[A]-f)/l,f:1-(e[A+1]-d)/u,i:(e[A+2]-e[A])/l,n:(e[A+1]-e[A+5])/u});a.#b(),a.#y(),a.Oi(a.C)}else if(r){a.#l=!0;let w=r[0],A={A:w[0]-f,f:u-(w[1]-d)},g=new ks(A,[0,0,l,u],1,a.#w/2,!0,.001);for(let b=0,y=w.t;b<y;b+=2)A.A=w[b]-f,A.f=u-(w[b+1]-d),g.d(A);let{l:p,ca:m}=s.Y.Zo({Dt:[0,0,1,1],wh:{ks:"0 0 1 1",as:a.L,"fill-opacity":a.p1},Si:{X1:!0,m1:!0},ts:{zt:g.Qt()}},!0,!0);a.#m({Op:g.Br(),Tp:p,ca:m}),a.#y(),a.Oi(a.$e)}return a}es(t=!1){if(this.ot()||t)return null;if(this.lt)return this.yl();let s=W.ll.Ku(this.b.Ga(this.L)),i=super.es(t);return Object.$h(i,{L:s,Jt:this.Jt,ys:this.#w,su:this.#F(),rM:this.#I(i.E)}),this.Je(i),this.F&&!this.#R(i)?null:(i.l=this.F,i)}#R(t){let{L:s}=this.Uh;return this.er||t.L.ff((i,h)=>i!==s[h])}Pn(t){return this.lt?(t.ii(),null):(t.dn({E:this.Wn(),xt:this.Yt}),null)}static Za(){return!1}},Mi=class{#t=Object.X(null);Yo(t,s){this[t]=s,this.pu(t,s)}nt(t){if(t)for(let[s,i]of Object.en(t))s.sn("_")||this.Yo(s,i)}pu(t,s){this.#t[t]=s}aa(){let t=this.#t;return this.#t=Object.X(null),{wh:t}}Ou(){this.#t=Object.X(null)}b1(t=this){this.nt(t)}Dn(){G("Not implemented")}},$i=class c extends W{#t=null;#s;Jo=null;Gs=null;static ee=-1;static re=null;static#h=null;static#i=null;static#r=null;static la=3;constructor(t){super(t),this.#s=t.oM||!1,this.cM(t)}ln(){this.Jo?.Ae(this.L),super.ln()}cM(t){t.y1&&(this.#e(t),this.#a())}#e({y1:t,O5:s,aM:i}){this.#t=t,this.Pi||=i,this.F||this.b.af(`pdfjs-editor-${this.ze}-added-alert`),s>=0?(this.Gs=s,this.a.Y.hM(s,t.L5)):this.Gs=this.#n(t,this.a),this.#l(t.ji)}#n(t,s){let{l:i}=s.Y.Zo(c.ua(this.Pi.aa(),t.Ip),!1,!1);return i}static ua(t,s){let i=new Set(Object.Qr(t));for(let[h,n]of Object.en(s))i.ht(h)?Object.$h(t[h],n):t[h]=n;return t}static fa(t){G("Not implemented")}static get da(){G("Not implemented")}static get Of(){return!0}static get M1(){return!1}static gf(t,s){let i=this.da.m(t);i&&this.En.Yo(i,s),this.re&&(c.#h.Yo(i,s),this.re.Y.nt(this.ee,this.En.aa()))}lo(t,s){let i=this.constructor.da.m(t);i&&this.I5(t,i,s)}static get qa(){let t=[],s=this.En;for(let[i,h]of this.da)t.r([i,s[h]]);return t}get wo(){let t=[],{Pi:s}=this;for(let[i,h]of this.constructor.da)t.r([i,s[h]]);return t}I5(t,s,i){let h=this.Pi,n=h[s],e=r=>{h.Yo(s,r);let o=this.#t.Yo(s,r);o&&this.#l(o),this.a?.Y.nt(this.Gs,h.aa()),t===this.Kw&&this.ln()};this.ni({Ci:e.N(this,i),vs:e.N(this,n),qe:this.b.Ka.N(this.b,this),ch:!0,j:t,ja:!0,Sa:!0})}tA(){this.a?.Y.nt(this.Gs,c.ua(this.#t.U5(this.#f()),{Dt:this.#d()}))}pl(){this.a?.Y.nt(this.Gs,c.ua(this.#t.D5(this.#f()),{Dt:this.#d()}))}Zd(t,s){this.a?.Y.nt(this.Gs,{Dt:this.#d()})}Rf(){this.a?.Y.nt(this.Gs,c.ua(this.#t.R5(this.#f(),this.Es),{Dt:this.#d()}))}zm(){this.a?.Y.nt(this.Gs,{Si:{B5:!0}})}Vm(){this.a?.Y.nt(this.Gs,{Si:{B5:!1}})}ir(){super.ir(),this.Qf(),this.rr()}rr(){super.rr(),this.h.p.$t("disabled",!0)}xe(){super.xe(),this.h.p.$t("disabled",!1)}Bf(){return[0,0]}get xc(){return!0}ml(t){this.F||this.a.Lp(this),this.Dh=!0,this.#s&&(this.#s=!1,this.ir(),this.a.sr(this),t&&this.Fx&&this.h.gt())}x(){this.#o(),super.x()}Yi(){this.a&&(super.Yi(),this.h!==null&&(this.#a(),this.#l(this.#t.ji),this.Ti||this.a.d(this)))}mo(t){let s=!1;this.a&&!t?(this.b.$3(this),this.#o()):t&&(this.b.yd(this),this.#a(t),s=!this.a&&this.h?.p.$s("selectedEditor")),super.mo(t),s&&this.po()}#o(){this.Gs!==null&&this.a&&(this.a.Y.x(this.Gs),this.Gs=null,this.Pi.Ou())}#a(t=this.a){(this.Gs===null||this.a!==t)&&(this.Gs===null?(this.Pi.b1(),this.Gs=this.#n(this.#t,t)):this.a.Y.F5(this.Gs,t.Y))}#c([t,s,i,h]){let{Es:[n,e],C:r}=this;switch(r){case 90:return[s,1-t,i*(e/n),h*(n/e)];case 180:return[1-t,1-s,i,h];case 270:return[1-s,t,i*(e/n),h*(n/e)];default:return[t,s,i,h]}}#f(){let{A:t,f:s,i,n:h,Es:[n,e],C:r}=this;switch(r){case 90:return[1-s,t,i*(n/e),h*(e/n)];case 180:return[1-t,1-s,i,h];case 270:return[s,1-t,i*(n/e),h*(e/n)];default:return[t,s,i,h]}}#l(t){[this.A,this.f,this.i,this.n]=this.#c(t),this.h&&(this.Xi(),this.ke()),this.pl()}#d(){let{A:t,f:s,i,n:h,C:n,$e:e,Es:[r,o]}=this;switch((4*n+e)/90){case 1:return[1-s-h,t,h,i];case 2:return[1-t-i,1-s-h,i,h];case 3:return[s,1-t-i,h,i];case 4:return[t,s-i*(r/o),h*(o/r),i*(r/o)];case 5:return[1-s,t,i*(r/o),h*(o/r)];case 6:return[1-t-h*(o/r),1-s,h*(o/r),i*(r/o)];case 7:return[s-i*(r/o),1-t-h*(o/r),i*(r/o),h*(o/r)];case 8:return[t-i,s-h,i,h];case 9:return[1-s,t-i,h,i];case 10:return[1-t,1-s,i,h];case 11:return[s-h,1-t,h,i];case 12:return[t-h*(o/r),s,h*(o/r),i*(r/o)];case 13:return[1-s-i*(r/o),t-h*(o/r),i*(r/o),h*(o/r)];case 14:return[1-t,1-s-i*(r/o),h*(o/r),i*(r/o)];case 15:return[s,1-t,i*(r/o),h*(o/r)];default:return[t,s,i,h]}}Oi(){this.a&&this.a.Y.nt(this.Gs,c.ua({Dt:this.#d()},this.#t.j5((this.$e-this.C+360)%360)))}ah(){this.a&&this.#l(this.#t.S5(this.Es,this.a.J))}static Up(){}P(){if(this.h)return this.h;let t,s;this.Gn&&(t=this.A,s=this.f);let i=super.P();i.p.d("draw");let h=document.$("div");return i.g(h),h.e("aria-hidden","true"),h.Gt="internal",this.ke(),this.b.yd(this),this.rr(),this.Gn&&this.Df(t,s),i}static lM(t,s,i,h,n){G("Not implemented")}static uM(t,s,i,h){let{U:n,Ct:e,Tt:r,yo:o,el:a}=h;if(ht.Wk(a))return;let{ct:{C:l}}=t,{i:u,n:f}=n.di(),d=c.#i=new AbortController,w=t.hi(d);ht.Pk(a,o),window.o("pointerup",A=>{ht.Sg(A.yo)&&this.Dp(A)},{w}),window.o("pointercancel",A=>{ht.Sg(A.yo)&&this.re.Mf()},{w}),window.o("pointerdown",A=>{ht.Pg(A.el)&&(ht.Sk(A.yo),c.#h.P5()&&(c.#h.$1(),c.#h.ot()?this.re.Mf(!0):this.Dp(null)))},{Ei:!0,go:!1,w}),window.o("contextmenu",ut,{w}),n.o("pointermove",this.G5.N(this),{w}),n.o("touchmove",A=>{ht.Gg(A.Rp)&&Y(A)},{w}),t._e(),s.oo?.ii(),c.#h?t.Y.nt(this.ee,c.#h.H5(e,r,u,f,l)):(s.F3(this),c.#h=this.lM(e,r,u,f,l),c.#r=this.fa(),this.re=t,{l:this.ee}=t.Y.Zo(this.ua(c.#r.aa(),c.#h.Ip),!0,!1))}static G5(t){if(ht.Gg(t.Rp),!c.#h)return;let{Ct:s,Tt:i,yo:h}=t;ht.Hk(h)&&(ht.Qk()?this.Dp(t):(this.re.Y.nt(this.ee,c.#h.d(s,i)),ht.Gk(t.Rp),Y(t)))}static Bp(t){t&&(this.ee=-1,this.re=null,c.#h=null,c.#r=null,ht.Vk(),ht.Jk()),c.#i&&(c.#i.Ut(),c.#i=null,ht.zk())}static Dp(t){let s=this.re;if(s){if(s._e(!0),this.Bp(!1),t?.U===s.h&&s.Y.nt(this.ee,c.#h.Xr(t.Ct,t.Tt)),this.M1){let i=c.#h,h=this.ee,n=i.W5();s.ni({Ci:()=>{s.Y.nt(h,i.Fp(n))},vs:()=>{s.Y.nt(h,i.$1())},ch:!1,j:R.hg});return}this.Rc(!1)}}static Rc(t){let s=this.re;if(!s)return null;if(s._e(!0),s.Ud(R.hg),!c.#h.ot()){let{Cs:[i,h],J:n}=s,e=s.Va({Ct:0,Tt:0},!1,{O5:this.ee,y1:c.#h.Br(i*n,h*n,n,this.la),aM:c.#r,oM:!t});return this.Bp(!0),e}return s.Y.x(this.ee),this.Bp(!0),null}jp(t){}static Sp(t,s,i,h,n,e){G("Not implemented")}static async Fs(t,s,i){let{Ji:{Ds:h,Rs:n,Zr:e,Yr:r}}=s.ct,o=this.Sp(e,r,h,n,this.la,t),a=await super.Fs(t,s,i);return a.jp(t),a.#e({y1:o}),a.#a(),a.ah(),a.Oi(),a}Pp(t){let[s,i]=this.kc,[h,n]=this.Cs;return this.#t.es([s,i,h,n],t)}Pn(t){return t.dn({E:this.Wn()}),null}static Za(){return!1}},pn=class{#t=new Float64Array(6);#s;#h;#i;#r;#e;#n="";#o=0;#a=new Ft;#c;#f;constructor(t,s,i,h,n,e){this.#c=i,this.#f=h,this.#i=n,this.#r=e,[t,s]=this.#l(t,s);let r=this.#s=[NaN,NaN,NaN,NaN,t,s];this.#e=[t,s],this.#h=[{Mi:r,Wt:this.#e}],this.#t.y(r,0)}Yo(t,s){t==="stroke-width"&&(this.#r=s)}#l(t,s){return N.ip(t,s,this.#c,this.#f,this.#i)}ot(){return!this.#h||this.#h.t===0}P5(){return this.#e.t<=10}d(t,s){[t,s]=this.#l(t,s);let[i,h,n,e]=this.#t.gs(2,6),r=t-n,o=s-e;return Math.ei(this.#c*r,this.#f*o)<=2?null:(this.#e.r(t,s),isNaN(i)?(this.#t.y([n,e,t,s],2),this.#s.r(NaN,NaN,NaN,NaN,t,s),{ts:{zt:this.Qt()}}):(isNaN(this.#t[0])&&this.#s.cn(6,6),this.#t.y([i,h,n,e,t,s],0),this.#s.r(...N.Np(i,h,n,e,t,s)),{ts:{zt:this.Qt()}}))}Xr(t,s){return this.d(t,s)||(this.#e.t===2?{ts:{zt:this.Qt()}}:null)}H5(t,s,i,h,n){this.#c=i,this.#f=h,this.#i=n,[t,s]=this.#l(t,s);let e=this.#s=[NaN,NaN,NaN,NaN,t,s];this.#e=[t,s];let r=this.#h.Vi(-1);return r&&(r.Mi=new Float32Array(r.Mi),r.Wt=new Float32Array(r.Wt)),this.#h.r({Mi:e,Wt:this.#e}),this.#t.y(e,0),this.#o=0,this.Qt(),null}W5(){return this.#h.Vi(-1)}Fp(t){return this.#h?(this.#h.r(t),this.#s=t.Mi,this.#e=t.Wt,this.#o=0,{ts:{zt:this.Qt()}}):this.#a.Fp(t)}$1(){if(!this.#h)return this.#a.$1();this.#h.kh(),this.#n="";for(let t=0,s=this.#h.t;t<s;t++){let{Mi:i,Wt:h}=this.#h[t];this.#s=i,this.#e=h,this.#o=0,this.Qt()}return{ts:{zt:this.#n}}}Qt(){let t=N.Et(this.#s[4]),s=N.Et(this.#s[5]);if(this.#e.t===2)return this.#n=`${this.#n} M ${t} ${s} Z`,this.#n;if(this.#e.t<=6){let h=this.#n.bk("M");this.#n=`${this.#n.z(0,h)} M ${t} ${s}`,this.#o=6}if(this.#e.t===4){let h=N.Et(this.#s[10]),n=N.Et(this.#s[11]);return this.#n=`${this.#n} L ${h} ${n}`,this.#o=12,this.#n}let i=[];this.#o===0&&(i.r(`M ${t} ${s}`),this.#o=6);for(let h=this.#o,n=this.#s.t;h<n;h+=6){let[e,r,o,a,l,u]=this.#s.z(h,h+6).bt(N.Et);i.r(`C${e} ${r} ${o} ${a} ${l} ${u}`)}return this.#n+=i.et(" "),this.#o=this.#s.t,this.#n}Br(t,s,i,h){let n=this.#h.Vi(-1);return n.Mi=new Float32Array(n.Mi),n.Wt=new Float32Array(n.Wt),this.#a.k1(this.#h,t,s,i,this.#i,this.#r,h),this.#t=null,this.#s=null,this.#h=null,this.#n=null,this.#a}get Ip(){return{wh:{ks:"0 0 10000 10000"},Si:{Zo:!0},Dt:[0,0,1,1]}}},Ft=class extends N{#t;#s=0;#h;#i;#r;#e;#n;#o;#a;k1(t,s,i,h,n,e,r){this.#r=s,this.#e=i,this.#n=h,this.#o=n,this.#a=e,this.#h=r??0,this.#i=t,this.#l()}get ys(){return this.#a}Fp(t){return this.#i.r(t),{ts:{zt:this.Qt()}}}$1(){return this.#i.kh(),{ts:{zt:this.Qt()}}}Qt(){let t=[];for(let{Mi:s}of this.#i)if(t.r(`M${N.Et(s[4])} ${N.Et(s[5])}`),s.t!==6)if(s.t===12&&isNaN(s[6]))t.r(`L${N.Et(s[10])} ${N.Et(s[11])}`);else for(let i=6,h=s.t;i<h;i+=6){let[n,e,r,o,a,l]=s.gs(i,i+6).bt(N.Et);t.r(`C${n} ${e} ${r} ${o} ${a} ${l}`)}else t.r("Z");return t.et("")}es([t,s,i,h],n){let e=[],r=[],[o,a,l,u]=this.#f(),f,d,w,A,g,p,m,b,y;switch(this.#o){case 0:y=N.Xh,f=t,d=s+h,w=i,A=-h,g=t+o*i,p=s+(1-a-u)*h,m=t+(o+l)*i,b=s+(1-a)*h;break;case 90:y=N.Rr,f=t,d=s,w=i,A=h,g=t+a*i,p=s+o*h,m=t+(a+u)*i,b=s+(o+l)*h;break;case 180:y=N.Xh,f=t+i,d=s,w=-i,A=h,g=t+(1-o-l)*i,p=s+a*h,m=t+(1-o)*i,b=s+(a+u)*h;break;case 270:y=N.Rr,f=t+i,d=s+h,w=-i,A=-h,g=t+(1-a-u)*i,p=s+(1-o-l)*h,m=t+(1-a)*i,b=s+(1-o)*h}for(let{Mi:M,Wt:$}of this.#i)e.r(y(M,f,d,w,A,n?new Array(M.t):null)),r.r(y($,f,d,w,A,n?new Array($.t):null));return{ph:e,Wt:r,E:[g,p,m,b]}}static Fs(t,s,i,h,n,{Gp:{ph:e,Wt:r},C:o,ys:a}){let l=[],u,f,d,w,A;switch(o){case 0:A=N.Xh,u=-t/i,f=s/h+1,d=1/i,w=-1/h;break;case 90:A=N.Rr,u=-s/h,f=-t/i,d=1/h,w=1/i;break;case 180:A=N.Xh,u=t/i+1,f=-s/h,d=-1/i,w=1/h;break;case 270:A=N.Rr,u=s/h+1,f=t/i+1,d=-1/h,w=-1/i}if(!e){e=[];for(let p of r){let m=p.t;if(m===2){e.r(new Float32Array([NaN,NaN,NaN,NaN,p[0],p[1]]));continue}if(m===4){e.r(new Float32Array([NaN,NaN,NaN,NaN,p[0],p[1],NaN,NaN,NaN,NaN,p[2],p[3]]));continue}let b=new Float32Array(3*(m-2));e.r(b);let[y,M,$,k]=p.gs(0,4);b.y([NaN,NaN,NaN,NaN,y,M],0);for(let x=4;x<m;x+=2){let v=p[x],T=p[x+1];b.y(N.Np(y,M,$,k,v,T),3*(x-2)),[y,M,$,k]=[$,k,v,T]}}}for(let p=0,m=e.t;p<m;p++)l.r({Mi:A(e[p].bt(b=>b??NaN),u,f,d,w),Wt:A(r[p].bt(b=>b??NaN),u,f,d,w)});let g=new this.prototype.constructor;return g.k1(l,i,h,1,o,a,n),g}#c(t=this.#a){let s=this.#h+t/2*this.#n;return this.#o%180==0?[s/this.#r,s/this.#e]:[s/this.#e,s/this.#r]}#f(){let[t,s,i,h]=this.#t,[n,e]=this.#c(0);return[t+n,s+e,i-2*n,h-2*e]}#l(){let t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(let{Mi:h}of this.#i){if(h.t<=12){for(let r=4,o=h.t;r<o;r+=6)E.$g(h[r],h[r+1],t);continue}let n=h[4],e=h[5];for(let r=6,o=h.t;r<o;r+=6){let[a,l,u,f,d,w]=h.gs(r,r+6);E.xg(n,e,a,l,u,f,d,w,t),n=d,e=w}}let[s,i]=this.#c();t[0]=et(t[0]-s,0,1),t[1]=et(t[1]-i,0,1),t[2]=et(t[2]+s,0,1),t[3]=et(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get ji(){return this.#t}Yo(t,s){return t==="stroke-width"?this.#d(s):null}#d(t){let[s,i]=this.#c();this.#a=t;let[h,n]=this.#c(),[e,r]=[h-s,n-i],o=this.#t;return o[0]-=e,o[1]-=r,o[2]+=2*e,o[3]+=2*r,o}S5([t,s],i){let[h,n]=this.#c();this.#r=t,this.#e=s,this.#n=i;let[e,r]=this.#c(),o=e-h,a=r-n,l=this.#t;return l[0]-=o,l[1]-=a,l[2]+=2*o,l[3]+=2*a,l}j5(t){return this.#s=t,{ts:{I:this.Aa}}}get ks(){return this.#t.bt(N.Et).et(" ")}get L5(){let[t,s]=this.#t;return{wh:{ks:this.ks},ts:{"transform-origin":`${N.Et(t)} ${N.Et(s)}`}}}get Aa(){let[,,t,s]=this.#t,i=0,h=0,n=0,e=0,r=0,o=0;switch(this.#s){case 90:h=s/t,n=-t/s,r=t;break;case 180:i=-1,e=-1,r=t,o=s;break;case 270:h=-s/t,n=t/s,o=s;break;default:return""}return`matrix(${i} ${h} ${n} ${e} ${N.Et(r)} ${N.Et(o)})`}U5([t,s,i,h]){let[n,e]=this.#c(),[r,o,a,l]=this.#t;if(Math.H(a-n)<=N.u1||Math.H(l-e)<=N.u1){let A=t+i/2-(r+a/2),g=s+h/2-(o+l/2);return{ts:{"transform-origin":`${N.Et(t)} ${N.Et(s)}`,I:`${this.Aa} translate(${A} ${g})`}}}let u=(i-2*n)/(a-2*n),f=(h-2*e)/(l-2*e),d=a/i,w=l/h;return{ts:{"transform-origin":`${N.Et(r)} ${N.Et(o)}`,I:`${this.Aa} scale(${d} ${w}) translate(${N.Et(n)} ${N.Et(e)}) scale(${u} ${f}) translate(${N.Et(-n)} ${N.Et(-e)})`}}}D5([t,s,i,h]){let[n,e]=this.#c(),r=this.#t,[o,a,l,u]=r;if(r[0]=t,r[1]=s,r[2]=i,r[3]=h,Math.H(l-n)<=N.u1||Math.H(u-e)<=N.u1){let g=t+i/2-(o+l/2),p=s+h/2-(a+u/2);for(let{Mi:m,Wt:b}of this.#i)N.f1(m,g,p,m),N.f1(b,g,p,b);return{wh:{ks:this.ks},ts:{"transform-origin":`${N.Et(t)} ${N.Et(s)}`,I:this.Aa||null,zt:this.Qt()}}}let f=(i-2*n)/(l-2*n),d=(h-2*e)/(u-2*e),w=-f*(o+n)+t+n,A=-d*(a+e)+s+e;if(f!==1||d!==1||w!==0||A!==0)for(let{Mi:g,Wt:p}of this.#i)N.Xh(g,w,A,f,d,g),N.Xh(p,w,A,f,d,p);return{wh:{ks:this.ks},ts:{"transform-origin":`${N.Et(t)} ${N.Et(s)}`,I:this.Aa||null,zt:this.Qt()}}}R5([t,s],i){let[h,n]=i,e=this.#t,r=t-e[0],o=s-e[1];if(this.#r===h&&this.#e===n)for(let{Mi:a,Wt:l}of this.#i)N.f1(a,r,o,a),N.f1(l,r,o,l);else{let a=this.#r/h,l=this.#e/n;this.#r=h,this.#e=n;for(let{Mi:u,Wt:f}of this.#i)N.Xh(u,r,o,a,l,u),N.Xh(f,r,o,a,l,f);e[2]*=a,e[3]*=l}return e[0]=t,e[1]=s,{wh:{ks:this.ks},ts:{zt:this.Qt(),"transform-origin":`${N.Et(t)} ${N.Et(s)}`}}}get Ip(){let t=this.#t;return{wh:{ks:this.ks},Si:{Zo:!0},ts:{zt:this.Qt(),"transform-origin":`${N.Et(t[0])} ${N.Et(t[1])}`,I:this.Aa||null},Dt:t}}},ki=class c extends Mi{constructor(t){super(),this.Hp=t,super.nt({as:"none",$i:W.dl,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}pu(t,s){t==="stroke-width"&&(s??=this["stroke-width"],s*=this.Hp._u),super.pu(t,s)}Dn(){let t=new c(this.Hp);return t.b1(this),t}},gn=class c extends $i{static un="ink";static be=U._o;static En=null;constructor(t){super({...t,R:"inkEditor"}),this.zd=!0,this.gl="pdfjs-editor-ink-editor"}static lh(t,s){W.lh(t,s),this.En=new ki(s.Ye)}static fa(t){let s=this.En.Dn();return s.nt(t),s}static get M1(){return!0}static get da(){return D(this,"typesMap",new Map([[R.sg,"stroke-width"],[R.tg,"stroke"],[R.FM,"stroke-opacity"]]))}static lM(t,s,i,h,n){return new pn(t,s,i,h,n,this.En["stroke-width"])}static Sp(t,s,i,h,n,e){return Ft.Fs(t,s,i,h,n,e)}static async Fs(t,s,i){let h=null;if(t instanceof Ms){let{s:{iu:e,E:r,C:o,l:a,L:l,Jt:u,Fi:{tM:f},pt:d,rs:w,Ai:A,Ks:g,ms:p},a:{Nn:{Fn:m}}}=t;h=t={Qn:U._o,L:Array.xi(l),ys:f,Jt:u,Gp:{Wt:e},rf:null,Q:m-1,E:r.z(0),C:o,F:a,l:a,lt:!1,pt:d,rs:w,Yt:A?.Pt||null,Ks:g,ms:p}}let n=await super.Fs(t,s,i);return n.Uh=h,t.Yt&&n.Hf(t),n}get nr(){return this.Jo||=new ui(this),[["colorPicker",this.Jo]]}get Kw(){return R.tg}get L(){return this.Pi.$i}get Jt(){return this.Pi["stroke-opacity"]}ah(){if(!this.a)return;super.ah();let{Gs:t,Pi:s,a:i}=this;s.pu("stroke-width"),i.Y.nt(t,s.aa())}static Up(){let t=this.re;t&&(super.Up(),this.En.pu("stroke-width"),t.Y.nt(this.ee,this.En.aa()))}jp({L:t,ys:s,Jt:i}){this.Pi=c.fa({$i:E.hn(...t),"stroke-width":s,"stroke-opacity":i})}es(t=!1){if(this.ot())return null;if(this.lt)return this.yl();let{ph:s,Wt:i}=this.Pp(t),{Pi:{$i:h,"stroke-opacity":n,"stroke-width":e}}=this,r=Object.$h(super.es(t),{L:W.ll.Ku(h),Jt:n,ys:e,Gp:{ph:s,Wt:i}});return this.Je(r),t?(r.Vf=!0,r):this.F&&!this.#t(r)?null:(r.l=this.F,r)}#t(t){let{L:s,ys:i,Jt:h,Q:n}=this.Uh;return this.er||this.Ff||this.Yd||t.L.ff((e,r)=>e!==s[r])||t.ys!==i||t.Jt!==h||t.Q!==n}Pn(t){if(this.lt)return t.ii(),null;let{Wt:s,E:i}=this.Pp(!1);return t.dn({E:i,ys:this.Pi["stroke-width"],Wt:s,xt:this.Yt}),null}},xs=class extends Ft{Qt(){let t=super.Qt();return t.Jg("Z")||(t+="Z"),t}},Ct=class{static#t={Q5:512,V5:.02,z5:25,J5:16};static#s(t,s,i,h){return h-=s,(i-=t)===0?h>0?0:4:i===1?h+6:2-h}static#h=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,s,i,h,n,e,r){let o=this.#s(i,h,n,e);for(let a=0;a<8;a++){let l=(-a+o-r+16)%8;if(t[(i+this.#h[2*l])*s+(h+this.#h[2*l+1])]!==0)return l}return-1}static#r(t,s,i,h,n,e,r){let o=this.#s(i,h,n,e);for(let a=0;a<8;a++){let l=(a+o+r+16)%8;if(t[(i+this.#h[2*l])*s+(h+this.#h[2*l+1])]!==0)return l}return-1}static#e(t,s,i,h){let n=t.t,e=new Int32Array(n);for(let l=0;l<n;l++)e[l]=t[l]<=h?1:0;for(let l=1;l<i-1;l++)e[l*s]=e[l*s+s-1]=0;for(let l=0;l<s;l++)e[l]=e[s*i-1-l]=0;let r,o=1,a=[];for(let l=1;l<i-1;l++){r=1;for(let u=1;u<s-1;u++){let f=l*s+u,d=e[f];if(d===0)continue;let w=l,A=u;if(d===1&&e[f-1]===0)o+=1,A-=1;else{if(!(d>=1&&e[f+1]===0)){d!==1&&(r=Math.H(d));continue}o+=1,A+=1,d>1&&(r=d)}let g=[u,l],p=A===u+1,m={q5:p,Wt:g,l:o,a:0};a.r(m);let b;for(let C of a)if(C.l===r){b=C;break}b?b.q5?m.a=p?b.a:r:m.a=p?r:b.a:m.a=p?r:0;let y=this.#i(e,s,l,u,w,A,0);if(y===-1){e[f]=-o,e[f]!==1&&(r=Math.H(e[f]));continue}let M=this.#h[2*y],$=this.#h[2*y+1],k=l+M,x=u+$;w=k,A=x;let v=l,T=u;for(;;){let C=this.#r(e,s,v,T,w,A,1);M=this.#h[2*C],$=this.#h[2*C+1];let F=v+M,j=T+$;g.r(j,F);let P=v*s+T;if(e[P+1]===0?e[P]=-o:e[P]===1&&(e[P]=o),F===l&&j===u&&v===k&&T===x){e[f]!==1&&(r=Math.H(e[f]));break}w=v,A=T,v=F,T=j}}}return a}static#n(t,s,i,h){if(i-s<=4){for(let k=s;k<i-2;k+=2)h.r(t[k],t[k+1]);return}let n=t[s],e=t[s+1],r=t[i-4]-n,o=t[i-3]-e,a=Math.ei(r,o),l=r/a,u=o/a,f=l*e-u*n,d=o/r,w=1/a,A=Math.fM(d),g=Math.UN(A),p=Math.IN(A),m=w*(Math.H(g)+Math.H(p)),b=w*(1-m+m**2),y=Math.B(Math.fM(Math.H(p+g)*b),Math.fM(Math.H(p-g)*b)),M=0,$=s;for(let k=s+2;k<i-2;k+=2){let x=Math.H(f-l*t[k+1]+u*t[k]);x>M&&($=k,M=x)}M>(a*y)**2?(this.#n(t,s,$+2,h),this.#n(t,$,i,h)):h.r(n,e)}static#o(t){let s=[],i=t.t;return this.#n(t,0,i,s),s.r(t[i-2],t[i-1]),s.t<=4?null:s}static#a(t,s,i,h,n,e){let r=new Float32Array(e**2),o=-2*h**2,a=e>>1;for(let A=0;A<e;A++){let g=(A-a)**2;for(let p=0;p<e;p++)r[A*e+p]=Math.Z5((g+(p-a)**2)/o)}let l=new Float32Array(256),u=-2*n**2;for(let A=0;A<256;A++)l[A]=Math.Z5(A**2/u);let f=t.t,d=new Uint8Array(f),w=new Uint32Array(256);for(let A=0;A<i;A++)for(let g=0;g<s;g++){let p=A*s+g,m=t[p],b=0,y=0;for(let M=0;M<e;M++){let $=A+M-a;if(!($<0||$>=i))for(let k=0;k<e;k++){let x=g+k-a;if(x<0||x>=s)continue;let v=t[$*s+x],T=r[M*e+k]*l[Math.H(v-m)];b+=v*T,y+=T}}w[d[p]=Math.At(b/y)]++}return[d,w]}static#c(t){let s=new Uint32Array(256);for(let i of t)s[i]++;return s}static#f(t){let s=t.t,i=new Uint8ClampedArray(s>>2),h=-1/0,n=1/0;for(let r=0,o=i.t;r<o;r++){let a=i[r]=t[r<<2];h=Math.B(h,a),n=Math.D(n,a)}let e=255/(h-n);for(let r=0,o=i.t;r<o;r++)i[r]=(i[r]-n)*e;return i}static#l(t){let s,i=-1/0,h=-1/0,n=t.zy(o=>o!==0),e=n,r=n;for(s=n;s<256;s++){let o=t[s];o>i&&(s-e>h&&(h=s-e,r=s-1),i=o,e=s)}for(s=r-1;s>=0&&!(t[s]>t[s+1]);s--);return s}static#d(t){let s=t,{i,n:h}=t,{Q5:n}=this.#t,e=i,r=h;if(i>n||h>n){let l=i,u=h,f=Math.tI(Math.B(i,h)/n),d=Math.It(f);f=f===d?d-1:d;for(let A=0;A<f;A++){e=Math.dt(l/2),r=Math.dt(u/2);let g=new OffscreenCanvas(e,r);g.Us("2d").hs(t,0,0,l,u,0,0,e,r),l=e,u=r,t!==s&&t.Eh(),t=g.id()}let w=Math.D(n/e,n/r);e=Math.At(e*w),r=Math.At(r*w)}let o=new OffscreenCanvas(e,r).Us("2d",{fc:!0});o.Vt="white",o.ui(0,0,e,r),o.Kt="grayscale(1)",o.hs(t,0,0,t.i,t.n,0,0,e,r);let a=o.Fa(0,0,e,r).s;return[this.#f(a),e,r]}static Y5(t,{vo:s,sI:i,gA:h},n,e,r,o){let a=new OffscreenCanvas(1,1),l=a.Us("2d",{jw:!1}),u=l.Cn=`${i} ${h} 200px ${s}`,{HA:f,WA:d,QA:w,VA:A,DN:g,RN:p,i:m}=l.Uo(t),b=1.5,y=Math.dt(Math.B(Math.H(f)+Math.H(d)||0,m)*b),M=Math.dt(Math.B(Math.H(w)+Math.H(A)||200,Math.H(g)+Math.H(p)||200)*b);a=new OffscreenCanvas(y,M),l=a.Us("2d",{jw:!0,fc:!0}),l.Cn=u,l.Kt="grayscale(1)",l.Vt="white",l.ui(0,0,y,M),l.Vt="black",l.Ko(t,.5*y/2,1.5*M/2);let $=this.#f(l.Fa(0,0,y,M).s),k=this.#c($),x=this.#l(k),v=this.#e($,y,M,x);return this.gu({ph:{Wp:v,i:y,n:M},Ds:n,Rs:e,C:r,mu:o,wa:!0,Gi:!0})}static X5(t,s,i,h,n){let[e,r,o]=this.#d(t),[a,l]=this.#a(e,r,o,Math.ei(r,o)*this.#t.V5,this.#t.z5,this.#t.J5),u=this.#l(l),f=this.#e(a,r,o,u);return this.gu({ph:{Wp:f,i:r,n:o},Ds:s,Rs:i,C:h,mu:n,wa:!0,Gi:!0})}static gu({ph:t,Ds:s,Rs:i,C:h,mu:n,wa:e,Gi:r}){h%180!=0&&([s,i]=[i,s]);let{Wp:o,i:a,n:l}=t,u=t.ys??0,f=[],d=Math.D(s/a,i/l),w=d/s,A=d/i,g=[];for(let{Wt:m}of o){let b=e?this.#o(m):m;if(!b)continue;g.r(b);let y=b.t,M=new Float32Array(y),$=new Float32Array(3*(y===2?2:y-2));if(f.r({Mi:$,Wt:M}),y===2){M[0]=b[0]*w,M[1]=b[1]*A,$.y([NaN,NaN,NaN,NaN,M[0],M[1]],0);continue}let[k,x,v,T]=b;k*=w,x*=A,v*=w,T*=A,M.y([k,x,v,T],0),$.y([NaN,NaN,NaN,NaN,k,x],0);for(let C=4;C<y;C+=2){let F=M[C]=b[C]*w,j=M[C+1]=b[C+1]*A;$.y(N.Np(k,x,v,T,F,j),3*(C-2)),[k,x,v,T]=[v,T,F,j]}}if(f.t===0)return null;let p=r?new xs:new Ft;return p.k1(f,s,i,1,h,r?0:u,n),{w1:p,K5:g,Gi:r,ys:u,i:a,n:l}}static async iI({rM:t,Gi:s,ys:i,i:h,n}){let e,r=1/0,o=-1/0,a=0;for(let m of t){a+=m.t;for(let b=2,y=m.t;b<y;b++){let M=m[b]-m[b-2];r=Math.D(r,M),o=Math.B(o,M)}}e=r>=-128&&o<=127?Int8Array:r>=-32768&&o<=32767?Int16Array:Int32Array;let l=t.t,u=8+3*l,f=new Uint32Array(u),d=0;f[d++]=u*Uint32Array.pa+(a-2*l)*e.pa,f[d++]=0,f[d++]=h,f[d++]=n,f[d++]=s?0:1,f[d++]=Math.B(0,Math.It(i??0)),f[d++]=l,f[d++]=e.pa;for(let m of t)f[d++]=m.t-2,f[d++]=m[0],f[d++]=m[1];let w=new CompressionStream("deflate-raw"),A=w.gg._5();await A.No,A.ar(f);let g=e.prototype.constructor;for(let m of t){let b=new g(m.t-2);for(let y=2,M=m.t;y<M;y++)b[y-2]=m[y]-m[y-2];A.ar(b)}A.Eh();let p=await new Response(w.t6).Tg();return ue(new Uint8Array(p))}static async hI(t){try{let s=(function(y){return Uint8Array.s6?Uint8Array.s6(y):vs(atob(y))})(t),{t6:i,gg:h}=new DecompressionStream("deflate-raw"),n=h._5();await n.No,n.ar(s).wt(async()=>{await n.No,await n.Eh()}).qs(()=>{});let e=null,r=0;for await(let b of i)e||=new Uint8Array(new Uint32Array(b._,0,4)[0]),e.y(b,r),r+=b.t;let o=new Uint32Array(e._,0,e.t>>2),a=o[1];if(a!==0)throw new Error(`Invalid version: ${a}`);let l=o[2],u=o[3],f=o[4]===0,d=o[5],w=o[6],A=o[7],g=[],p=(8+3*w)*Uint32Array.pa,m;switch(A){case Int8Array.pa:m=new Int8Array(e._,p);break;case Int16Array.pa:m=new Int16Array(e._,p);break;case Int32Array.pa:m=new Int32Array(e._,p)}r=0;for(let b=0;b<w;b++){let y=o[3*b+8],M=new Float32Array(y+2);g.r(M);for(let $=0;$<2;$++)M[$]=o[3*b+8+$+1];for(let $=0;$<y;$++)M[$+2]=M[$]+m[r++]}return{Gi:f,ys:d,rM:g,i:l,n:u}}catch(s){return I(`decompressSignature: ${s}`),null}}},mn=class c extends Mi{constructor(){super(),super.nt({as:W.dl,"stroke-width":0})}Dn(){let t=new c;return t.b1(this),t}},bn=class c extends ki{constructor(t){super(t),super.nt({$i:W.dl,"stroke-width":1})}Dn(){let t=new c(this.Hp);return t.b1(this),t}},yn=class c extends $i{#t=!1;#s=null;#h=null;#i=null;static un="signature";static be=U.R1;static En=null;constructor(t){super({...t,oM:!0,R:"signatureEditor"}),this.zd=!0,this.#h=t.nI||null,this.#s=null,this.gl="pdfjs-editor-signature-editor1"}static lh(t,s){W.lh(t,s),this.En=new mn,this.dM=new bn(s.Ye)}static fa(t){let s=this.En.Dn();return s.nt(t),s}static get M1(){return!1}static get da(){return D(this,"typesMap",new Map)}static get Of(){return!1}get Jf(){return{j:"signature",i6:!!this.#s}}static aA(t){let s=t.m("hasDescription");return{sA:s.m(!0)??0,h6:s.m(!1)??0}}get xc(){return!0}ah(){this.Gs!==null&&super.ah()}P(){if(this.h)return this.h;let t,s,{Gn:i}=this;if(i&&(this.Gn=!1,t=this.A,s=this.f),super.P(),this.Gs===null)if(this.#h){let{ph:h,wa:n,Gi:e,Be:r,AM:o,eI:a}=this.#h,{Ji:{Ds:l,Rs:u},C:f}=this.a.ct,d=Ct.gu({ph:h,Ds:l,Rs:u,C:f,mu:c.la,wa:n,Gi:e});this.n6(d,a,r,o)}else this.h.e("data-l10n-args",JSON.Ke({Be:""})),this.h.Zt=!0,this.b._g(this);else this.h.e("data-l10n-args",JSON.Ke({Be:this.#s||""}));return i&&(this.Gn=!0,this.Df(t,s)),this.h}e6(t){this.#i=t,this.Sf()}r6(){return this.#i}get Be(){return this.#s}set Be(t){this.#s=t,this.h&&(this.h.e("data-l10n-args",JSON.Ke({Be:t})),super.Sf().wt(s=>{s?.jk(t)}))}rI(){let{K5:t,Gi:s,ys:i,i:h,n}=this.#h,e=Math.B(h,n);return{Gi:s,w1:Ct.gu({ph:{Wp:t.bt(r=>({Wt:r})),ys:i,i:h,n},Ds:e,Rs:e,C:0,mu:0,wa:!1,Gi:s}).w1}}get nr(){return this.b.tm?[["editSignature",this.b.tm]]:super.nr}n6(t,s,i,h){let{A:n,f:e}=this,{w1:r}=this.#h=t;this.#t=r instanceof xs,this.Be=i;let o;this.#t?o=c.fa():(o=c.dM.Dn(),o.nt({"stroke-width":r.ys})),this.cM({y1:r,aM:o});let[,a]=this.Cs,l=s/a;l=l>=1?.5:l,this.i*=l/this.n,this.i>=1&&(l*=.9/this.i,this.i=.9),this.n=l,this.ke(),this.A=n,this.f=e,this.Jd(),this.pl(),this.ah(),this.Oi(),this.b.Xe(this),this.e6(h),this.Ih({Ns:"pdfjs.signature.inserted",s:{oI:!!h,i6:!!i}}),this.h.Zt=!1}cI(t){let{Ji:{Ds:s,Rs:i},C:h}=this.a.ct;return Ct.X5(t,s,i,h,c.la)}aI(t,s){let{Ji:{Ds:i,Rs:h},C:n}=this.a.ct;return Ct.Y5(t,s,i,h,n,c.la)}lI(t){let{Ji:{Ds:s,Rs:i},C:h}=this.a.ct;return Ct.gu({ph:t,Ds:s,Rs:i,C:h,mu:c.la,wa:!1,Gi:!1})}jp({Gi:t,ys:s}){t?this.Pi=c.fa():(this.Pi=c.dM.Dn(),this.Pi.nt({"stroke-width":s}))}es(t=!1){if(this.ot())return null;let{ph:s,Wt:i}=this.Pp(t),{Pi:{"stroke-width":h}}=this,n=Object.$h(super.es(t),{uI:!0,Gi:this.#t,L:[0,0,0],ys:this.#t?0:h});return this.Je(n),t?(n.Gp={ph:s,Wt:i},n.AM=this.#i,n.Vf=!0):n.ph=s,this.#s&&(n.Vn={j:"Figure",x1:this.#s}),n}static Sp(t,s,i,h,n,e){return e.Gi?xs.Fs(t,s,i,h,n,e):Ft.Fs(t,s,i,h,n,e)}static async Fs(t,s,i){let h=await super.Fs(t,s,i);return h.#t=t.Gi,h.Be=t.Vn?.x1||"",h.#i=t.AM,h}},Mn=class extends W{#t=null;#s=null;#h=null;#i=null;#r=null;#e="";#n=null;#o=!1;#a=null;#c=!1;#f=!1;static un="stamp";static be=U.Hr;constructor(t){super({...t,R:"stampEditor"}),this.#i=t.wM,this.#r=t.o6,this.gl="pdfjs-editor-stamp-editor"}static lh(t,s){W.lh(t,s)}static lf(t){return Vi.Wi(t)}static Ja(t,s){s.c6({jn:U.Hr},{o6:t.fI()})}jm(){this.b.wc&&(this.h.Zt=!1),super.jm()}get Jf(){return{j:"stamp",sA:!!this.Gf?.Mc}}static aA(t){let s=t.m("hasAltText");return{sA:s.m(!0)??0,h6:s.m(!1)??0}}#l(t,s=!1){t?(this.#t=t.Ot,s||(this.#s=t.l,this.#c=t.no),t.Ac&&(this.#e=t.Ac.R),this.#A()):this.x()}#d(){if(this.#h=null,this.b.mc(!1),this.#n)if(this.b.dd&&this.b.wc&&this.#t)this.Sf().wt(()=>{this.js.ii(),this.b.md(this,!0)});else{if(!this.b.dd&&this.b.wc&&this.#t){this.Ih({Ns:"pdfjs.image.image_added",s:{a6:!1,dI:"empty"}});try{this.l6()}catch{}}this.h.gt()}}async l6(t=null,s=!0){if(this.Hm())return null;let{d3:i}=this.b;if(!i)throw new Error("No ML.");if(!await i.AI("altText"))throw new Error("ML isn't enabled for alt text.");let{s:h,i:n,n:e}=t||this.u6(null,null,!0).f6,r=await i.wI({R:"altText",Nw:{s:h,i:n,n:e,pI:h.t/(n*e)}});if(!r)throw new Error("No response from the AI service.");if(r.Cl)throw new Error("Error from the AI service.");if(r.kt)return null;if(!r.d6)throw new Error("No valid response from the AI service.");let o=r.d6;return await this.Lx(o),s&&!this.Hm()&&(this.Gf={x1:o,sl:!1}),o}#p(){if(this.#s){this.b.mc(!0),this.b.Sn.Kk(this.#s).wt(i=>this.#l(i,!0)).Yc(()=>this.#d());return}if(this.#i){let i=this.#i;this.#i=null,this.b.mc(!0),this.#h=this.b.Sn.Wg(i).wt(h=>this.#l(h)).Yc(()=>this.#d());return}if(this.#r){let i=this.#r;this.#r=null,this.b.mc(!0),this.#h=this.b.Sn.td(i).wt(h=>this.#l(h)).Yc(()=>this.#d());return}let t=document.$("input");t.j="file",t.gI=Vi.et(",");let s=this.b.ls;this.#h=new Promise(i=>{t.o("change",async()=>{if(t.v1&&t.v1.t!==0){this.b.mc(!0);let h=await this.b.Sn.td(t.v1[0]);this.Ih({Ns:"pdfjs.image.image_selected",s:{a6:this.b.wc}}),this.#l(h)}else this.x();i()},{w:s}),t.o("cancel",()=>{this.x(),i()},{w:s})}).Yc(()=>this.#d()),t.EM()}x(){this.#s&&(this.#t=null,this.b.Sn.t3(this.#s),this.#n?.x(),this.#n=null,this.#a&&(clearTimeout(this.#a),this.#a=null)),super.x()}Yi(){this.a?(super.Yi(),this.h!==null&&(this.#s&&this.#n===null&&this.#p(),this.Ti||this.a.d(this))):this.#s&&this.#p()}ml(t){this.Dh=!0,t&&this.h.gt()}ot(){return!(this.#h||this.#t||this.#i||this.#r||this.#s||this.#o)}get nr(){return[["altText",this.Pm()]]}get xc(){return!0}P(){if(this.h)return this.h;let t,s;return this.Gn&&(t=this.A,s=this.f),super.P(),this.h.Zt=!0,this.Pm(),this.#o||(this.#t?this.#A():this.#p()),this.Gn&&this.Df(t,s),this.b.yd(this),this.h}z3(t,s){let{l:i,Ot:h}=this.b.Sn.Qg(t,s);s.x(),i&&this.b.Sn.Vg(i)&&(this.#s=i,h&&(this.#t=h),this.#o=!1,this.#A())}pl(){this.ah()}ah(){this.a&&(this.#a!==null&&clearTimeout(this.#a),this.#a=setTimeout(()=>{this.#a=null,this.#w()},200))}#A(){let{h:t}=this,{i:s,n:i}=this.#t,[h,n]=this.Cs,e=.75;if(this.i)s=this.i*h,i=this.n*n;else if(s>e*h||i>e*n){let o=Math.D(e*h/s,e*n/i);s*=o,i*=o}this.b.mc(!1);let r=this.#n=document.$("canvas");r.e("role","img"),this.Tx(r),this.i=s/h,this.n=i/n,this.ke(),this.cl?.ul?this.Jd():this.Xi(),this.cl=null,this.b.dd&&this.b.wc&&!this.F||(t.Zt=!1),this.#w(),this.#f||(this.a.Lp(this),this.#f=!0),this.Ih({Ns:"inserted_image"}),this.#e&&this.h.e("aria-description",this.#e),this.F||this.b.af("pdfjs-editor-stamp-added-alert")}u6(t,s,i=!1){t||(t=224);let{i:h,n}=this.#t,e=new kt,r=this.#t,o=h,a=n,l=null;if(s){if(h>s||n>s){let $=Math.D(s/h,s/n);o=Math.It(h*$),a=Math.It(n*$)}l=document.$("canvas");let f=l.i=Math.dt(o*e.Kr),d=l.n=Math.dt(a*e._r);this.#c||(r=this.#u(f,d));let w=l.Us("2d");w.Kt=this.b.Ad;let A="white",g="#cfcfd8";this.b.Ad!=="none"?g="black":zi.kk&&(A="#8f8f9d",g="#42414d");let p=15,m=p*e.Kr,b=p*e._r,y=new OffscreenCanvas(2*m,2*b),M=y.Us("2d");M.Vt=A,M.ui(0,0,2*m,2*b),M.Vt=g,M.ui(0,0,m,b),M.ui(m,b,m,b),w.Vt=w.YA(y,"repeat"),w.ui(0,0,f,d),w.hs(r,0,0,r.i,r.n,0,0,f,d)}let u=null;if(i){let f,d;if(e.yk&&r.i<t&&r.n<t)f=r.i,d=r.n;else if(r=this.#t,h>t||n>t){let A=Math.D(t/h,t/n);f=Math.It(h*A),d=Math.It(n*A),this.#c||(r=this.#u(f,d))}let w=new OffscreenCanvas(f,d).Us("2d",{fc:!0});w.hs(r,0,0,r.i,r.n,0,0,f,d),u={i:f,n:d,s:w.Fa(0,0,f,d).s}}return{O:l,i:o,n:a,f6:u}}#u(t,s){let{i,n:h}=this.#t,n=i,e=h,r=this.#t;for(;n>2*t||e>2*s;){let o=n,a=e;n>2*t&&(n=n>=16384?Math.It(n/2)-1:Math.dt(n/2)),e>2*s&&(e=e>=16384?Math.It(e/2)-1:Math.dt(e/2));let l=new OffscreenCanvas(n,e);l.Us("2d").hs(r,0,0,o,a,0,0,n,e),r=l.id()}return r}#w(){let[t,s]=this.Es,{i,n:h}=this,n=new kt,e=Math.dt(i*t*n.Kr),r=Math.dt(h*s*n._r),o=this.#n;if(!o||o.i===e&&o.n===r)return;o.i=e,o.n=r;let a=this.#c?this.#t:this.#u(e,r),l=o.Us("2d");l.Kt=this.b.Ad,l.hs(a,0,0,a.i,a.n,0,0,e,r)}#g(t){if(t){if(this.#c){let i=this.b.Sn._k(this.#s);if(i)return i}let s=document.$("canvas");return{i:s.i,n:s.n}=this.#t,s.Us("2d").hs(this.#t,0,0),s.mI()}if(this.#c){let[s,i]=this.Cs,h=Math.At(this.i*s*Tt.Oa),n=Math.At(this.n*i*Tt.Oa),e=new OffscreenCanvas(h,n);return e.Us("2d").hs(this.#t,0,0,this.#t.i,this.#t.n,0,0,h,n),e.id()}return structuredClone(this.#t)}static async Fs(t,s,i){let h=null,n=!1;if(t instanceof gi){let{s:{E:A,C:g,l:p,Qp:m,pt:b,rs:y,Ai:M,Ks:$,ms:k},k:x,a:{Nn:{Fn:v}},O:T}=t,C,F;T?(delete t.O,{l:C,Ot:F}=i.Sn.Qg(x.l,T),T.x()):(n=!0,t.Xy=!0);let j=(await s.A6.y5(`${Wt}${p}`))?.m("aria-label")||"";h=t={Qn:U.Hr,Vp:C,Ot:F,Q:v-1,E:A.z(0),C:g,F:p,l:p,lt:!1,Vn:{sl:!1,Mc:j},no:!1,Qp:m,pt:b,rs:y,Yt:M?.Pt||null,Ks:$,ms:k}}let e=await super.Fs(t,s,i),{E:r,Ot:o,wM:a,Vp:l,no:u,Vn:f}=t;n?(i.J3(t.l,e),e.#o=!0):l&&i.Sn.Vg(l)?(e.#s=l,o&&(e.#t=o)):e.#i=a,e.#c=u;let[d,w]=e.Cs;return e.i=(r[2]-r[0])/d,e.n=(r[3]-r[1])/w,f&&(e.Gf=f),e.Uh=h,t.Yt&&e.Hf(t),e.#f=!!h,e}es(t=!1,s=null){if(this.ot())return null;if(this.lt)return this.yl();let i=Object.$h(super.es(t),{Vp:this.#s,no:this.#c});if(this.Je(i),t)return i.wM=this.#g(!0),i.Vn=this.Gm(!0),i.Vf=!0,i;let{sl:h,Mc:n}=this.Gm(!1);if(!h&&n&&(i.Vn={j:"Figure",x1:n}),this.F){let r=this.#b(i);return r.w6?null:(r.p6?delete i.Vn:i.Vn.Qp=this.Uh.Qp??-1,i.l=this.F,delete i.Vp,i)}if(s===null)return i;s.zp||=new Map;let e=this.#c?(i.E[2]-i.E[0])*(i.E[3]-i.E[1]):null;if(s.zp.ht(this.#s)){if(this.#c){let r=s.zp.m(this.#s);e>r.pM&&(r.pM=e,r.gM.Ot.Eh(),r.gM.Ot=this.#g(!1))}}else s.zp.y(this.#s,{pM:e,gM:i}),i.Ot=this.#g(!1);return i}#b(t){let{Q:s,Vn:{Mc:i}}=this.Uh,h=t.Q===s,n=(t.Vn?.x1||"")===i;return{w6:!this.er&&!this.Ff&&!this.Yd&&h&&n,p6:n}}Pn(t){return this.lt?(t.ii(),null):(t.dn({E:this.Wn(),xt:this.Yt}),null)}},$n=class c{#t;#s=!1;#h=null;#i=null;#r=null;#e=new Map;#n=!1;#o=!1;#a=!1;#c=null;#f=null;#l=null;#d=null;#p=null;#A=-1;#u;static mM=!1;static#w=new Map([dn,gn,Mn,yi,yn].bt(t=>[t.be,t]));constructor({Ao:t,Q:s,h:i,b5:h,m5:n,bI:e,Y:r,yI:o,ct:a,MI:l}){let u=[...c.#w.W()];if(!c.mM){c.mM=!0;for(let f of u)f.lh(l,t)}t.O3(u),this.#u=t,this.Q=s,this.h=i,this.#t=n,this.#h=e,this.ct=a,this.#l=o,this.Y=r,this.A6=h,this.#u.U3(this)}get ot(){return this.#e.rt===0}get $I(){return this.ot&&this.#u._a()===U.Is}Ya(t){this.#u.Ya(t)}wf(t=this.#u._a()){switch(this.#M(),t){case U.Is:this.h.p.$t("nonEditing",!0),this.N1(),this.Bh(!1),this.Jp(!0),this.Ed();return;case U._o:this.N1(),this.Bh(!0),this.Cd();break;case U.ki:this.bM(),this.Bh(!1),this.Ed();break;default:this.N1(),this.Bh(!0),this.Cd()}this.Jp(!1);let{p:s}=this.h;if(s.$t("nonEditing",!1),t===U.tc)s.$t("commentEditing",!0);else{s.$t("commentEditing",!1);for(let i of c.#w.W())s.$t(`${i.un}Editing`,t===i.be)}this.h.Zt=!1}im(t){return t===this.#l?.h}me(t){this.#u.me(t)}ni(t){this.#u.ni(t)}Ud(t){this.#u.Ud(t)}_e(t=!1){this.h.p.$t("drawing",!t)}Bh(t=!1){this.h.p.$t("disabled",!t)}Jp(t=!1){this.#h?.Bh(t)}get#g(){return this.#e.rt!==0?this.#e.W():this.#u.um(this.Q)}async df(){this.#a=!0,this.h.xs=0,this.Bh(!0),this.h.p.$t("nonEditing",!1),this.#p?.Ut(),this.#p=null;let t=new Set;for(let i of this.#g)i.xe(),i.Ws(!0),i.F&&(this.#u.wm(i),t.d(i.F));let s=this.#h;if(s)for(let i of s.Ky()){if(i.ii(),this.#u.Ld(i.s.l)||t.ht(i.s.l))continue;let h=await this.Fs(i);h&&(this.bf(h),h.xe())}this.#a=!1,this.#u.Ch.Vs("editorsrendered",{ns:this,Fn:this.Q+1})}Af(){if(this.#o=!0,this.h.xs=-1,this.Bh(!1),this.h.p.$t("nonEditing",!0),this.#l&&!this.#p){this.#p=new AbortController;let h=this.#u.hi(this.#p);this.#l.h.o("pointerdown",n=>{let{L1:e,I1:r,Rp:o}=n;if(o-this.#A>500){this.#A=o;return}this.#A=-1;let{p:a}=this.h;a.$t("getElements",!0);let l=document.kI(e,r);if(a.$t("getElements",!1),!this.h.$s(l[0]))return;let u,f=new RegExp(`^${os}[0-9]+$`);for(let w of l)if(f.xh(w.l)){u=w.l;break}if(!u)return;let d=this.#e.m(u);d?.F===null&&(n.Da(),n.Xs(),d.Hx(n))},{w:h,Ei:!0})}let t=this.#h,s=[];if(t){let h=new Map,n=new Map;for(let r of this.#g)r.rr(),r.F?r.es()===null?(n.y(r.F,r),this.$p(r.F)?.Ws(),r.x()):h.y(r.F,r):s.r(r);let e=t.Ky();for(let r of e){let{l:o}=r.s;if(this.#u.Ld(o)){r.dn({lt:!0});continue}let a=n.m(o);a?(a.eA(r),a.Ws(!1),r.Ws()):(a=h.m(o),a&&(this.#u.Am(a),a.Pn(r)&&a.Ws(!1)),r.Ws())}}this.#M(),this.ot&&(this.h.Zt=!0);let{p:i}=this.h;for(let h of c.#w.W())i.x(`${h.un}Editing`);this.N1(),this.Jp(!0),t?.$5(s),this.#o=!1}$p(t){return this.#h?.$p(t)||null}Xa(t){this.#u.xf()!==t&&this.#u.Xa(t)}bM(){if(this.h.xs=-1,this.#l?.h&&!this.#d){this.#d=new AbortController;let t=this.#u.hi(this.#d);this.#l.h.o("pointerdown",this.#b.N(this),{w:t}),this.#l.h.p.d("highlighting")}}N1(){this.h.xs=0,this.#l?.h&&this.#d&&(this.#d.Ut(),this.#d=null,this.#l.h.p.x("highlighting"))}#b(t){this.#u.ao();let{U:s}=t;if(s===this.#l.h||(s.qr("role")==="img"||s.p.$s("endOfContent"))&&this.#l.h.$s(s)){let{ue:i}=tt.Hi;if(t.za!==0||t.we&&i)return;this.#u.of("highlight",!0,!0),this.#l.h.p.d("free"),this._e(),yi.T5(this,this.#u.so==="ltr",{U:this.#l.h,A:t.A,f:t.f}),this.#l.h.o("pointerup",()=>{this.#l.h.p.x("free"),this._e(!0)},{sf:!0,w:this.#u.ls}),t.Xs()}}Cd(){if(this.#i)return;this.#i=new AbortController;let t=this.#u.hi(this.#i);this.h.o("pointerdown",this.Qm.N(this),{w:t});let s=this.g6.N(this);this.h.o("pointerup",s,{w:t}),this.h.o("pointercancel",s,{w:t})}Ed(){this.#i?.Ut(),this.#i=null}yM(t){this.#e.y(t.l,t);let{F:s}=t;s&&this.#u.Ld(s)&&this.#u.B3(t)}Cu(t){this.#e.it(t.l),this.#t?._y(t.zf),!this.#o&&t.F&&this.#u.dm(t)}x(t){this.Cu(t),this.#u.fm(t),t.h.x(),t.Ti=!1}kf(t){t.a!==this&&(t.a&&t.F&&(this.#u.dm(t.F),W.wx(t),t.F=null),this.yM(t),t.a?.Cu(t),t.mo(this),t.h&&t.Ti&&(t.h.x(),this.h.g(t.h)))}d(t){if(t.a!==this||!t.Ti){if(this.kf(t),this.#u.Od(t),this.yM(t),!t.Ti){let s=t.P();this.h.g(s),t.Ti=!0}t.Xi(),t.ml(!this.#a),this.#u.Xe(t),t.Ih(t.Km)}}Dx(t){if(!t.Ti)return;let{Bn:s}=document;t.h.$s(s)&&!this.#r&&(t.vh=!1,this.#r=setTimeout(()=>{this.#r=null,t.h.$s(document.Bn)?t.vh=!0:(t.h.o("focusin",()=>{t.vh=!0},{sf:!0,w:this.#u.ls}),s.gt())},0)),t.Lm=this.#t?.xI(this.h,t.h,t.zf,!0)}bf(t){t.Bx()?(t.a||=this,t.Yi(),t.Ws()):this.d(t)}Lp(t){this.ni({Ci:()=>t.b.Yi(t),vs:()=>{t.x()},ch:!1})}p3(t){for(let s of this.#e.W())if(s.gc===t)return s;return null}Lf(){return this.#u.L3()}get#m(){return c.#w.m(this.#u._a())}hi(t){return this.#u.hi(t)}#v(t){let s=this.#m;return s?new s.prototype.constructor(t):null}Za(){return this.#m?.Za()}async c6(t,s){this.Ya(t),await this.#u.wf(t.jn);let{Ct:i,Tt:h}=this.#k(),n=this.Lf(),e=this.#v({a:this,l:n,A:i,f:h,Ao:this.#u,ul:!0,...s});e&&this.d(e)}async Fs(t){return await c.#w.m(t.Qn??t.au)?.Fs(t,this,this.#u)||null}Va(t,s,i={}){let h=this.Lf(),n=this.#v({a:this,l:h,A:t.Ct,f:t.Tt,Ao:this.#u,ul:s,...i});return n&&this.d(n),n}get Se(){return this.h.di()}#k(){let{A:t,f:s,i,n:h}=this.Se,n=Math.B(0,t),e=Math.B(0,s),r=(n+Math.D(window.Sx,t+i))/2-t,o=(e+Math.D(window.Jm,s+h))/2-s,[a,l]=this.ct.C%180==0?[r,o]:[o,r];return{Ct:a,Tt:l}}lm(t={}){this.Va(this.#k(),!0,t)}sr(t){this.#u.sr(t)}Id(t){this.#u.Id(t)}Zi(t){this.#u.Zi(t)}g6(t){let{ue:s}=tt.Hi;if(t.za!==0||t.we&&s||t.U!==this.h||!this.#n||(this.#n=!1,this.#m?.Of&&this.#m.M1))return;if(!this.#s){this.#s=!0;return}let i=this.#u._a();i!==U.Hr&&i!==U.R1?this.Va(t,!1):this.#u.ao()}Qm(t){if(this.#u._a()===U.ki&&this.bM(),this.#n){this.#n=!1;return}let{ue:s}=tt.Hi;if(t.za!==0||t.we&&s||t.U!==this.h)return;if(this.#n=!0,this.#m?.Of){this.m6(t);return}let i=this.#u.xf();this.#s=!i||i.ot()}m6(t){if(this.h.gt({Ml:!0}),this.#c){this.#m.uM(this,this.#u,!1,t);return}this.#u.Yg(this),this.#c=new AbortController;let s=this.#u.hi(this.#c);this.h.o("blur",({If:i})=>{i&&!this.h.$s(i)&&(this.#f=null,this.zs())},{w:s}),this.#m.uM(this,this.#u,!1,t)}vI(t){if(t){let{Bn:s}=document;this.h.$s(s)&&(this.#f=s);return}this.#f&&setTimeout(()=>{this.#f?.gt(),this.#f=null},0)}Mf(t=!1){return this.#c?(this.#u.Yg(null),this.#c.Ut(),this.#c=null,this.#f=null,this.#m.Rc(t)):null}yx(t,s,i){let h=this.#u.M3(s,i);return h===null||h===this?!1:(h.kf(t),!0)}zs(){return this.#c?(this.Mf(),!0):!1}ah(){this.#c&&this.#m.Up(this)}K(){this.zs(),this.#u.xf()?.a===this&&(this.#u.zs(),this.#u.Xa(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(let t of this.#e.W())this.#t?._y(t.zf),t.mo(null),t.Ti=!1,t.h.x();this.h=null,this.#e.tt(),this.#u.D3(this)}#M(){for(let t of this.#e.W())t.ot()&&t.x()}P({ct:t}){this.ct=t,Ut(this.h,t);for(let s of this.#u.um(this.Q))this.d(s),s.Yi();this.wf()}Ae({ct:t}){this.#u.zs(),this.#M();let s=this.ct.C,i=t.C;if(this.ct=t,Ut(this.h,{C:i}),s!==i)for(let h of this.#e.W())h.Oi(i)}get Cs(){let{Ds:t,Rs:s}=this.ct.Ji;return[t,s]}get J(){return this.#u.Ye._u}},kn=class c{#t=null;#s=new Map;#h=new Map;static#i=0;constructor({Q:t}){this.Q=t}mo(t){if(this.#t){if(this.#t!==t){if(this.#s.rt>0)for(let s of this.#s.W())s.x(),t.g(s);this.#t=t}}else this.#t=t}static get Kh(){return D(this,"_svgFactory",new qt)}static#r(t,[s,i,h,n]){let{M:e}=t;e.Ni=100*i+"%",e.fn=100*s+"%",e.i=100*h+"%",e.n=100*n+"%"}#e(){let t=c.Kh.X(1,1,!0);return this.#t.g(t),t.e("aria-hidden",!0),t}#n(t,s){let i=c.Kh.$("clipPath");t.g(i);let h=`clip_${s}`;i.e("id",h),i.e("clipPathUnits","objectBoundingBox");let n=c.Kh.$("use");return i.g(n),n.e("href",`#${s}`),n.p.d("clip"),h}#o(t,s){for(let[i,h]of Object.en(s))h===null?t.Jr(i):t.e(i,h)}Zo(t,s=!1,i=!1){let h=c.#i++,n=this.#e(),e=c.Kh.$("defs");n.g(e);let r=c.Kh.$("path");e.g(r);let o=`path_p${this.Q}_${h}`;r.e("id",o),r.e("vector-effect","non-scaling-stroke"),s&&this.#h.y(h,r);let a=i?this.#n(e,o):null,l=c.Kh.$("use");return n.g(l),l.e("href",`#${o}`),this.nt(n,t),this.#s.y(h,n),{l:h,ca:`url(#${a})`}}nM(t,s){let i=c.#i++,h=this.#e(),n=c.Kh.$("defs");h.g(n);let e=c.Kh.$("path");n.g(e);let r=`path_p${this.Q}_${i}`;e.e("id",r),e.e("vector-effect","non-scaling-stroke");let o;if(s){let u=c.Kh.$("mask");n.g(u),o=`mask_p${this.Q}_${i}`,u.e("id",o),u.e("maskUnits","objectBoundingBox");let f=c.Kh.$("rect");u.g(f),f.e("width","1"),f.e("height","1"),f.e("fill","white");let d=c.Kh.$("use");u.g(d),d.e("href",`#${r}`),d.e("stroke","none"),d.e("fill","black"),d.e("fill-rule","nonzero"),d.p.d("mask")}let a=c.Kh.$("use");h.g(a),a.e("href",`#${r}`),o&&a.e("mask",`url(#${o})`);let l=a.NI();return h.g(l),a.p.d("mainOutline"),l.p.d("secondaryOutline"),this.nt(h,t),this.#s.y(i,h),i}hM(t,s){this.#h.it(t),this.nt(t,s)}nt(t,s){if(!s)return;let{wh:i,Dt:h,Si:n,ts:e}=s,r=typeof t=="number"?this.#s.m(t):t;if(r){if(i&&this.#o(r,i),h&&c.#r(r,h),n){let{p:o}=r;for(let[a,l]of Object.en(n))o.$t(a,l)}if(e){let o=r.on.on;this.#o(o,e)}}}F5(t,s){if(s===this)return;let i=this.#s.m(t);i&&(s.#t.g(i),this.#s.it(t),s.#s.y(t,i))}x(t){this.#h.it(t),this.#t!==null&&(this.#s.m(t).x(),this.#s.it(t))}K(){this.#t=null;for(let t of this.#s.W())t.x();this.#s.tt(),this.#h.tt()}};globalThis.EI={CI:$s};globalThis.TI={OI:bt,LI:$n,II:R,UI:U,DI:Rt,RI:fn,BI:Et,FI:K,jI:er,k1:Mr,SI:li,PI:oe,GI:Ji,HI:qt,WI:kn,QI:tt,VI:Ns,zI:rr,JI:En,qI:ir,ZI:hr,YI:As,r6:le,XI:nr,KI:$t,_I:Gs,tU:as,sU:Ei,iU:vn,hU:or,nU:et,eU:ut,rU:sr,oU:cs,cU:kt,aU:Ke,lU:ai,uU:ds,fU:ms,dU:Pe,AU:Tt,wU:fs,pU:fe,gU:Jt,mU:Ut,bU:D,yU:Ct,MU:Y,$U:Vi,kU:gs,xU:Js,vU:ce,NU:E,EU:xi,CU:yr,TU:Qs};var Me="./dist/pdf.worker.min.mjs";function $e(){$t.xr=Me,console.py(`Successfully set PDFJS global worker source to ${Me}`)}async function ke(c){let t=await c.Tg();return await En({s:t}).Z}async function xe(c,t){let s=await c.Ww(t),i=s.JN({J:1}),h=document.$("canvas");return h.i=i.i,h.n=i.n,await s.P({Vw:h.Us("2d"),ct:i}).Z,[h,s,i.i,i.n]}function ve(c,t){let[s,i,h,n,e,r]=c.I,o=Math.zr(h*h+n*n);return[e+c.i/2,t-(r+o/2)]}var kr=50,Cs=25,Ne=40,xr=2,vr=2,Nr="red";function Er(c){return c.Wi(",")||c.Wi(`
`)||c.Wi('"')?`"${c.bh('"','""')}"`:c}function Cr(c){for(let t of c)if(!Xt(t))return!1;return!0}var Oi=class{#t;#s;#h;#i;#r;#e;#n;#o=Array(4).as(Cs);#a=4*Cs;#c=[Ne];#f=Ne;#l=[5,5];#d=0;#p=0;constructor(t,s,i,h,n,e){this.#t=s,this.#s=h,this.#h=n,this.#r=document.$("div"),this.#r.p.d("page"),t.bu.$u(this.#r),this.#r.M.i=`${h}px`,this.#r.M.n=`${n}px`,this.#r.$u(i),this.#e=document.$("canvas"),this.#e.i=h,this.#e.n=n,this.#e.p.d("wordCanvas"),this.#r.$u(this.#e);let r=this.#e.Us("2d");r.Vt=Nr,this.#i=[];for(let o of e)if(!Xt(o.Pt)){let a=ve(o,n);this.#i.r({lu:o.Pt,A:a[0],f:a[1]}),r.Sr(),r.OU(a[0],a[1],vr,0,2*Math.Fw),r.as()}this.#i.du((o,a)=>o.f!==a.f?o.f-a.f:o.A-a.A),this.#n=new Is(this,t.b6,t.y6),this.E1()}static async X(t,s,i){let[h,n,e,r]=await xe(s,i),o=(await n.n4()).vi;return new this(t,i,h,e,r,o)}K(){this.#n.Cu(),this.#r.x()}MM(t){this.#e.M.tn=t?"visible":"hidden"}OM(t){this.#r.$u(t)}IM(t){this.#r.M.bo=t}jr(t,s){this.#l[0]=yt(t,0,this.i-this.Tu),this.#l[1]=yt(s,0,this.n-this.Fr)}U1(t,s){s=yt(s,5,this.i-this.cs-this.Tu+this._h(t));let i=s-this._h(t);this.#a+=i,this.#o[t]=s,t<this.#d&&(this.#p+=i)}D1(t){t=yt(t,xr,this.n-this.ps),this.#f=t,this.#c=[t]}qp(t){if(t=yt(t,1,kr),t===this.li)return t;if(t<this.li)for(t<=this.#d&&this.ku(t-1);this.#o.t>t;)this.#a-=this.#o.kh();else{let s=t-this.li,i=this.i-this.cs-this.#a;if(s*Cs<=i)this.#o.r(...Array(s).as(Cs)),this.#a+=s*Cs;else if(i/s>=5)this.#o.r(...Array(s).as(i/s)),this.#a+=i;else if((i+this.cs)/s>=5)this.jr(this.cs-(s-i/5)*5,this.ps),this.#o.r(...Array(s).as(5)),this.#a+=s*=5;else return this.qp(this.li+Math.It((i+this.cs)/5))}return t}ku(t){this.#d=yt(t,0,this.li-1),this.#p=0;for(let s=0;s<this.#d;s++)this.#p+=this._h(s)}E1(){this.#n.xu(),this.#n.ba()}M6(){let t=this.cs+this.Xo,s=0,i=-1;this.#c=[];for(let h of this.#i)if(ct(h.A,t,t+this.ae)&&ct(h.f,this.ps,this.ps+this.#f))if(i===-1)i=h.f-this.ps;else{let n=h.f-this.ps-s-i;s+=n,this.#c.r(n)}this.#c.r(this.#f-s),this.E1()}$6(t){this.jr(t.cs,t.ps),this.#o=[],this.#a=0;for(let s=0;s<t.li;s++)this.qp(s+1),this.U1(s,t._h(s));this.D1(t.Fr),this.ku(t.ma),this.E1()}vM(t){if(t<this.li)throw"Not enough columns!";let s=Array.xi(Array(this.Pe),()=>new Array(t).as(""));for(let i of this.#i){if(i.A<this.cs||i.f<this.ps)continue;let h=-1,n=0;for(let r=0;r<this.li;r++)if(n+=this._h(r),i.A<this.cs+n){h=r;break}let e=-1;n=0;for(let r=0;r<this.Pe;r++)if(n+=this.Kp(r),i.f<this.ps+n){e=r;break}h===-1||e===-1||(s[e][h]+=i.lu)}if(this.Pe===0||this.Pe===1&&Cr(s[0]))return"";for(let i=0;i<this.Pe;i++){for(let h=0;h<t;h++)s[i][h]=Er(s[i][h]);s[i]=s[i].et(",")}return s.et(`
`)}LM(t,s){let[i,h]=[t.A,s.A].du((o,a)=>o-a),[n,e]=[t.f,s.f].du((o,a)=>o-a),r=0;for(let o of this.#i)ct(o.A,i,h)&&ct(o.f,n,e)&&(r+=1);return r}get i(){return this.#s}get n(){return this.#h}get Se(){return this.#r.di()}get k6(){let t=this.Se;return Math.H((t.Ni+t.jx)/2-window.Jm/2)}get mp(){return this.#t}get Pe(){return this.#c.t}get li(){return this.#o.t}get cs(){return this.#l[0]}get ps(){return this.#l[1]}get Tu(){return this.#a}get Fr(){return this.#f}_h(t){return this.#o[t]}Kp(t){return this.#c[t]}get ma(){return this.#d}get ae(){return this._h(this.#d)}get Xo(){return this.#p}};var Tr=1e3,Q=Object.to({Zp:document.oe("fileInput"),$M:document.oe("fileTitle"),kM:document.oe("pageCount"),yu:document.oe("columnEntry"),xM:document.oe("showTextboxesAction"),x6:document.oe("applyToAllAction"),v6:document.oe("detectRowsAction"),Yp:document.oe("extractAction"),bu:document.oe("pageContainer"),b6:document.oe("bottomBar"),y6:document.oe("bottomBarContent")}),V={ga:-1,gh:[],Mu:!1};document.ce.o("contextmenu",c=>c.Xs());Q.Zp.o("change",async()=>{if(Q.Zp.v1.t===0){console.Y$("Aborting because no files selected");return}let c=Date.ac(),t=Q.Zp.v1[0];Q.$M.Ge=t.R,Q.$M.Nh=t.R,document.Nh=`PDFTables - ${t.R}`,Q.bu.LU=0,Q.bu.M.tn="hidden";for(let h of V.gh)h.K();V.gh=[];let s=await ke(t);V.ga=1,Q.kM.Ge=`Page 1/${s.Jl}`,Q.yu.c=4;for(let h=1;h<=s.Jl;h++){let n=await Oi.X(Q,s,h);V.gh.r(n),n.MM(V.Mu)}Q.bu.M.tn="visible";let i=(Date.ac()-c)/Tr;console.py(`Loaded ${t.R} with ${V.gh.t} pages in ${i.uh(2)} seconds`)});Q.bu.o("scroll",()=>{let c=null,t=1/0;for(let s of V.gh){let i=s.k6;i<t&&(t=i,c=s)}c&&(V.ga=c.mp,Q.kM.Ge=`Page ${V.ga}/${V.gh.t}`,Q.yu.c=c.li)});Q.yu.o("change",()=>{let c=V.gh[V.ga-1];if(c===void 0)return;let t=c.qp(Q.yu.c);c.E1(),Q.yu.c=t});Q.xM.o("click",()=>{V.Mu=!V.Mu,Q.xM.Ge=`${V.Mu?"Hide":"Show"} Textboxes`;for(let c of V.gh)c.MM(V.Mu)});Q.x6.o("click",()=>{let c=V.gh[V.ga-1];if(c!==void 0)for(let t=V.ga;t<V.gh.t;t++)V.gh[t].$6(c)});Q.v6.o("click",()=>{for(let c of V.gh)c.M6()});Q.Yp.o("click",()=>{Q.Yp.Ge="Extracting...";let c=Tn(V.gh);On("output.csv",c),Q.Yp.Ge="Extract"});$e();
